{"version":3,"sources":["flash/events/eventdispatcher.ts"],"names":["EventDispatcher","EventDispatcher.constructor","EventDispatcher.addEventListener","EventDispatcher.dispatchEvent","EventDispatcher.removeEventListener","EventDispatcher.hasEventListener","EventDispatcher.willTrigger","EventDispatcher.dispose"],"mappings":"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","file":"flash/events/EventDispatcher.js","sourcesContent":["/**\r\n * Created by MIC on 2015/11/18.\r\n */\r\n\r\nimport {IDisposable} from \"../../IDisposable\";\r\nimport {listeners} from \"cluster\";\r\nimport {GLUtil} from \"../../../lib/glantern-utils/src/GLUtil\";\r\n\r\nexport abstract class EventDispatcher implements IDisposable {\r\n\r\n    constructor() {\r\n        this._listeners = new Map<string, Function[]>();\r\n    }\r\n\r\n    addEventListener(type:string, listener:Function, useCapture:boolean = false):void {\r\n        // jabbany\r\n        if (!this._listeners.has(type)) {\r\n            this._listeners.set(type, []);\r\n        }\r\n        this._listeners.get(type).push(listener);\r\n    }\r\n\r\n    dispatchEvent(event:Event, data?:any):boolean {\r\n        // jabbany\r\n        if (this._listeners.has(event.type) && this._listeners.get(event.type) !== null) {\r\n            var arr = this._listeners.get(event.type);\r\n            for (var i = 0; i < arr.length; ++i) {\r\n                try {\r\n                    arr[i].call(null, data);\r\n                } catch (ex) {\r\n                    if (ex.hasOwnProperty(\"stack\")) {\r\n                        GLUtil.trace(ex.stack.toString(), \"dispatchEvent: error\");\r\n                    } else {\r\n                        GLUtil.trace(ex.toString(), \"dispatchEvent: error\");\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    removeEventListener(type:string, listener:Function, useCapture:boolean = false):void {\r\n        // jabbany\r\n        if (!this._listeners.has(type) || this._listeners.get(type).length === 0) {\r\n            return;\r\n        }\r\n        var index = this._listeners.get(type).indexOf(listener);\r\n        if (index >= 0) {\r\n            this._listeners.get(type).splice(index, 1);\r\n        }\r\n    }\r\n\r\n    hasEventListener(type:string):boolean {\r\n        return this._listeners.has(type);\r\n    }\r\n\r\n    willTrigger(type:string):boolean {\r\n        return this.hasEventListener(type) && this._listeners.get(type).length > 0;\r\n    }\r\n\r\n    dispose():void {\r\n        this._listeners.forEach((listeners:Function[]):void => {\r\n            while (listeners.length > 0) {\r\n                listeners.pop();\r\n            }\r\n        });\r\n        this._listeners.clear();\r\n    }\r\n\r\n    private _listeners:Map<string, Function[]> = null;\r\n\r\n}\r\n"],"sourceRoot":"/source/"}