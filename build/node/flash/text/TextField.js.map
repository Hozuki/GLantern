{"version":3,"sources":["flash/text/TextField.ts"],"names":[],"mappings":"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","file":"flash/text/TextField.js","sourcesContent":["/**\r\n * Created by MIC on 2015/12/23.\r\n */\r\n\r\nimport {InteractiveObject} from \"../display/InteractiveObject\";\r\nimport {WebGLRenderer} from \"../../webgl/WebGLRenderer\";\r\nimport {ShaderManager} from \"../../webgl/ShaderManager\";\r\nimport {Stage} from \"../display/Stage\";\r\nimport {DisplayObjectContainer} from \"../display/DisplayObjectContainer\";\r\nimport {AntiAliasType} from \"./AntiAliasType\";\r\nimport {TextFieldAutoSize} from \"./TextFieldAutoSize\";\r\nimport {TextFormat} from \"./TextFormat\";\r\nimport {GridFitType} from \"./GridFitType\";\r\nimport {StyleSheet} from \"./StyleSheet\";\r\nimport {TextInteractionMode} from \"./TextInteractionMode\";\r\nimport {TextFieldType} from \"./TextFieldType\";\r\nimport {Rectangle} from \"../geom/Rectangle\";\r\nimport {DisplayObject} from \"../display/DisplayObject\";\r\nimport {TextLineMetrics} from \"./TextLineMetrics\";\r\nimport {RenderTarget2D} from \"../../webgl/RenderTarget2D\";\r\nimport {ShaderID} from \"../../webgl/ShaderID\";\r\nimport {RenderHelper} from \"../../webgl/RenderHelper\";\r\nimport {NotImplementedError} from \"../../flash/errors/NotImplementedError\";\r\nimport {GLUtil} from \"../../GLUtil\";\r\n\r\nexport class TextField extends InteractiveObject {\r\n\r\n    constructor(root:Stage, parent:DisplayObjectContainer) {\r\n        super(root, parent);\r\n        if (root !== null) {\r\n            this._canvasTarget = this.__createCanvasTarget(root.worldRenderer);\r\n        }\r\n        this._textFormatChangedHandler = this.__textFormatChanged.bind(this);\r\n        this.defaultTextFormat = new TextFormat();\r\n    }\r\n\r\n    appendText(newText:string):void {\r\n        this.text += newText;\r\n    }\r\n\r\n    alwaysShowSelection:boolean = false;\r\n    antiAliasType:string = AntiAliasType.NORMAL;\r\n    autoSize:string = TextFieldAutoSize.NONE;\r\n\r\n    get background():boolean {\r\n        return this._background;\r\n    }\r\n\r\n    set background(v:boolean) {\r\n        var b = v !== this._background;\r\n        if (b) {\r\n            this._background = v;\r\n            this._isContentChanged = true;\r\n        }\r\n    }\r\n\r\n    get backgroundColor():number {\r\n        return this._backgroundColor;\r\n    }\r\n\r\n    set backgroundColor(v:number) {\r\n        var b = v !== this._backgroundColor;\r\n        if (b) {\r\n            this._backgroundColor = v;\r\n            this._isContentChanged = true;\r\n        }\r\n    }\r\n\r\n    get border():boolean {\r\n        return this._border;\r\n    }\r\n\r\n    set border(v:boolean) {\r\n        var b = v !== this._border;\r\n        if (b) {\r\n            this._border = v;\r\n            this._isContentChanged = true;\r\n        }\r\n    }\r\n\r\n    get borderColor():number {\r\n        return this._borderColor;\r\n    }\r\n\r\n    set borderColor(v:number) {\r\n        var b = v !== this._borderColor;\r\n        if (b) {\r\n            this._borderColor = v;\r\n            this._isContentChanged = true;\r\n        }\r\n    }\r\n\r\n    get bottomScrollV():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get caretIndex():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    condenseWhite:boolean = false;\r\n\r\n    get defaultTextFormat():TextFormat {\r\n        return this._defaultTextFormat;\r\n    }\r\n\r\n    set defaultTextFormat(v:TextFormat) {\r\n        if (this._defaultTextFormat !== null) {\r\n            this._defaultTextFormat.removeEventListener(TextFormat.TEXT_FORMAT_CHANGE, this._textFormatChangedHandler);\r\n        }\r\n        this._defaultTextFormat = !GLUtil.isUndefinedOrNull(v) ? v : new TextFormat();\r\n        this._defaultTextFormat.addEventListener(TextFormat.TEXT_FORMAT_CHANGE, this._textFormatChangedHandler);\r\n    }\r\n\r\n    displayAsPassword:boolean = false;\r\n    embedFonts:boolean = false;\r\n\r\n    getCharBoundaries():Rectangle {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getCharIndexAtPoint(x:number, y:number):number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getFirstCharInParagraph(charIndex:number):number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getImageReference(id:string):DisplayObject {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getLineIndexAtPoint(x:number, y:number):number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getLineIndexOfChar(charIndex:number):number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getLineLength(lineIndex:number):number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getLineMetrics(lineIndex:number):TextLineMetrics {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getLineOffset(lineIndex:number):number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getLineText(lineIndex:number):string {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getParagraphLength(charIndex:number):number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getTextFormat(beginIndex:number = -1, endIndex:number = -1):TextFormat {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    isFontCompatible(fontName:string, fontStyle:number):boolean {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    replaceSelectedText(value:string):void {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    replaceText(beginIndex:number, endIndex:number, newText:string):void {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    setSelection(beginIndex:number, endIndex:number):void {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    setTextFormat(format:TextFormat, beginIndex:number = -1, endIndex:number = -1):void {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    gridFitType:string = GridFitType.PIXEL;\r\n    htmlText:string = null;\r\n\r\n    get length():number {\r\n        return !GLUtil.isUndefinedOrNull(this.text) ? this.text.length : 0;\r\n    }\r\n\r\n    maxChars:number = 0;\r\n\r\n    get maxScrollH():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get maxScrollV():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    mouseWheelEnabled:boolean = true;\r\n    multiline:boolean = true;\r\n\r\n    get numLines():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    restrict:string = null;\r\n    scrollH:number = 0;\r\n    scrollV:number = 1;\r\n    selectable:boolean = true;\r\n\r\n    get selectionBeginIndex():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get selectionEndIndex():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    sharpness:number = 0;\r\n    styleSheet:StyleSheet = null;\r\n\r\n    get text():string {\r\n        return this._text;\r\n    }\r\n\r\n    set text(v:string) {\r\n        var b = this._text !== v;\r\n        if (b) {\r\n            this._text = v;\r\n            this._isContentChanged = true;\r\n        }\r\n    }\r\n\r\n    get textColor():number {\r\n        return this.defaultTextFormat.color;\r\n    }\r\n\r\n    set textColor(v:number) {\r\n        var b = this.defaultTextFormat.color !== v;\r\n        this.defaultTextFormat.color = v;\r\n        if (b && !this.customOutlineEnabled) {\r\n            this.textOutlineColor = v;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Non-standard extension.\r\n     * @returns {Number}\r\n     */\r\n    get textOutlineColor():number {\r\n        return this._textOutlineColor;\r\n    }\r\n\r\n    /**\r\n     * Non-standard extension.\r\n     * @param v {Number}\r\n     */\r\n    set textOutlineColor(v:number) {\r\n        var b = this._textOutlineColor !== v;\r\n        if (b) {\r\n            this._textOutlineColor = v;\r\n            this._isContentChanged = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * When set to true, outline color will not change when setting {@link textColor}, enabling drawing a\r\n     * colorful outline. The default value is false.\r\n     * Non-standard extension.\r\n     * @type {Boolean}\r\n     */\r\n    customOutlineEnabled:boolean = false;\r\n\r\n    get textHeight():number {\r\n        // TODO: This only works under single line circumstances.\r\n        var height = this.defaultTextFormat.size * 1.5;\r\n        if (this.thickness > 0) {\r\n            height += this.thickness * 2;\r\n        }\r\n        return height;\r\n    }\r\n\r\n    textInteractionMode:string = TextInteractionMode.NORMAL;\r\n\r\n    get textWidth():number {\r\n        // TODO: This only works under single line circumstances.\r\n        var metrics:TextMetrics = this._context2D.measureText(this.text);\r\n        var width = metrics.width;\r\n        if (this.thickness > 0) {\r\n            width += this.thickness * 2;\r\n        }\r\n        return width;\r\n    }\r\n\r\n    get thickness():number {\r\n        return this._thickness;\r\n    }\r\n\r\n    set thickness(v:number) {\r\n        var b = this._thickness !== v;\r\n        if (b) {\r\n            this._thickness = v;\r\n            this._isContentChanged = true;\r\n        }\r\n    }\r\n\r\n    type:string = TextFieldType.DYNAMIC;\r\n    useRichTextClipboard:boolean = false;\r\n    wordWrap:boolean = false;\r\n\r\n    dispose():void {\r\n        super.dispose();\r\n        // TODO: WARNING: HACK!\r\n        var renderer = (<Stage>this.root).worldRenderer;\r\n        renderer.releaseRenderTarget(this._canvasTarget);\r\n        this._canvasTarget = null;\r\n        this._canvas = null;\r\n        this._context2D = null;\r\n    }\r\n\r\n    protected __update():void {\r\n        if (!this._isContentChanged) {\r\n            return;\r\n        }\r\n        //var canvas = this._canvas;\r\n        //var context = this._context2D;\r\n        //context.font = this.__getStyleString();\r\n        //var metrics:TextMetrics = context.measureText(this.text);\r\n        //canvas.height = this.defaultTextFormat.size * 1.15;\r\n        //canvas.width = metrics.width;\r\n\r\n        this._canvasTarget.updateImageSize();\r\n        this.__updateCanvasTextStyle(this._context2D);\r\n        this.__drawTextElements(this._context2D);\r\n        this._isContentChanged = false;\r\n    }\r\n\r\n    protected __render(renderer:WebGLRenderer):void {\r\n        if (this.visible && this.alpha > 0 && this.text !== null && this.text.length > 0) {\r\n            this._canvasTarget.updateImageContent();\r\n            RenderHelper.copyImageContent(renderer, this._canvasTarget, renderer.currentRenderTarget, false, true, this.transform.matrix3D, this.alpha, false);\r\n        }\r\n    }\r\n\r\n    protected __selectShader(shaderManager:ShaderManager):void {\r\n        shaderManager.selectShader(ShaderID.COPY_IMAGE);\r\n    }\r\n\r\n    protected __createCanvasTarget(renderer:WebGLRenderer):RenderTarget2D {\r\n        if (this._canvas === null) {\r\n            var canvas = window.document.createElement(\"canvas\");\r\n            canvas.width = renderer.view.width;\r\n            canvas.height = renderer.view.height;\r\n            this._canvas = canvas;\r\n            this._context2D = canvas.getContext(\"2d\");\r\n        }\r\n        return renderer.createRenderTarget(this._canvas);\r\n    }\r\n\r\n    protected __updateCanvasTextStyle(context2D:CanvasRenderingContext2D):void {\r\n        var fontStyles:string[] = [];\r\n        if (this.defaultTextFormat.bold) {\r\n            fontStyles.push(\"bold\");\r\n        }\r\n        if (this.defaultTextFormat.italic) {\r\n            fontStyles.push(\"italic\");\r\n        }\r\n        fontStyles.push(this.defaultTextFormat.size.toString() + \"pt\");\r\n        fontStyles.push(\"\\\"\" + this.defaultTextFormat.font + \"\\\"\");\r\n        context2D.font = fontStyles.join(\" \");\r\n    }\r\n\r\n    protected __drawTextElements(context2D:CanvasRenderingContext2D):void {\r\n        var baseX = this.thickness;\r\n        var baseY = this.thickness;\r\n        var borderThickness = 1;\r\n        context2D.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n        if (this.background) {\r\n            context2D.fillStyle = GLUtil.colorToCssSharp(this.backgroundColor);\r\n            context2D.fillRect(0, 0, this.textWidth + borderThickness * 2, this.textHeight + borderThickness * 2);\r\n        }\r\n        context2D.fillStyle = GLUtil.colorToCssSharp(this.textColor);\r\n        context2D.fillText(this.text, baseX + borderThickness, this.textHeight * 0.75 + borderThickness);\r\n        if (this.thickness > 0) {\r\n            context2D.lineWidth = this.thickness;\r\n            context2D.strokeStyle = GLUtil.colorToCssSharp(this.textOutlineColor);\r\n            context2D.strokeText(this.text, baseX + borderThickness, this.textHeight * 0.75 + borderThickness);\r\n        }\r\n        if (this.border) {\r\n            context2D.lineWidth = 1;\r\n            context2D.strokeStyle = GLUtil.colorToCssSharp(this.borderColor);\r\n            context2D.strokeRect(borderThickness, borderThickness, this.textWidth + borderThickness * 2, this.textHeight + borderThickness * 2);\r\n        }\r\n    }\r\n\r\n    private __textFormatChanged():void {\r\n        this._isContentChanged = true;\r\n    }\r\n\r\n    private _textFormatChangedHandler:Function = null;\r\n    protected _defaultTextFormat:TextFormat = null;\r\n    protected _isContentChanged:boolean = true;\r\n    protected _canvasTarget:RenderTarget2D = null;\r\n    protected _canvas:HTMLCanvasElement = null;\r\n    protected _context2D:CanvasRenderingContext2D = null;\r\n    protected _text:string = null;\r\n    protected _background:boolean = false;\r\n    protected _backgroundColor:number = 0xffffff;\r\n    protected _border:boolean = false;\r\n    protected _borderColor:number = 0x000000;\r\n    protected _textColor:number = 0x000000;\r\n    protected _textOutlineColor:number = 0x000000;\r\n    protected _thickness:number = 0;\r\n\r\n}\r\n"],"sourceRoot":"/source/"}