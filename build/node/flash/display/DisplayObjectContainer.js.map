{"version":3,"sources":["flash/display/DisplayObjectContainer.ts"],"names":["DisplayObjectContainer","DisplayObjectContainer.constructor","DisplayObjectContainer.numChildren","DisplayObjectContainer.addChild","DisplayObjectContainer.addChildAt","DisplayObjectContainer.areInaccessibleObjectsUnderPoint","DisplayObjectContainer.contains","DisplayObjectContainer.getChildAt","DisplayObjectContainer.getChildByName","DisplayObjectContainer.getChildIndex","DisplayObjectContainer.getObjectsUnderPoint","DisplayObjectContainer.removeChild","DisplayObjectContainer.removeChildAt","DisplayObjectContainer.setChildIndex","DisplayObjectContainer.swapChildren","DisplayObjectContainer.swapChildrenAt","DisplayObjectContainer.width","DisplayObjectContainer.height","DisplayObjectContainer.dispatchEvent","DisplayObjectContainer.update","DisplayObjectContainer.render","DisplayObjectContainer.___selectShader"],"mappings":"AAAA;;GAEG;;;;;;AAEH,kCAAgC,qBAAqB,CAAC,CAAA;AAGtD,oCAAkC,iCAAiC,CAAC,CAAA;AAIpE,yBAAuB,sBAAsB,CAAC,CAAA;AAE9C;IAAqDA,0CAAiBA;IAElEA,gCAAYA,IAAUA,EAAEA,MAA6BA;QACjDC,kBAAMA,IAAIA,EAAEA,MAAMA,CAACA,CAACA;QAIxBA,kBAAaA,GAAWA,IAAIA,CAACA;QAM7BA,gBAAWA,GAAWA,IAAIA,CAACA;QAoKjBA,cAASA,GAAmBA,IAAIA,CAACA;QA7KvCA,IAAIA,CAACA,SAASA,GAAGA,EAAEA,CAACA;IACxBA,CAACA;IAIDD,sBAAIA,+CAAWA;aAAfA;YACIE,MAAMA,CAACA,IAAIA,CAACA,SAASA,CAACA,MAAMA,CAACA;QACjCA,CAACA;;;OAAAF;IAIDA,yCAAQA,GAARA,UAASA,KAAmBA;QACxBG,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,KAAKA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;YACpCA,IAAIA,CAACA,SAASA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA;QAC/BA,CAACA;QACDA,KAAKA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,GAAGA,CAACA,CAACA;QAC7CA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IAEDH,2CAAUA,GAAVA,UAAWA,KAAmBA,EAAEA,KAAYA;QACxCI,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,KAAKA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA;YACpCA,EAAEA,CAACA,CAACA,KAAKA,KAAKA,CAACA,CAACA,CAACA,CAACA;gBACdA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,KAAKA,CAACA,CAACA;YAClCA,CAACA;YAACA,IAAIA,CAACA,EAAEA,CAACA,CAACA,KAAKA,KAAKA,IAAIA,CAACA,SAASA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,CAACA;gBAC7CA,IAAIA,CAACA,SAASA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA;YAC/BA,CAACA;YAACA,IAAIA,CAACA,CAACA;gBACJA,IAAIA,CAACA,SAASA,GAAGA,IAAIA,CAACA,SAASA,CAACA,KAAKA,CAACA,CAACA,EAAEA,KAAKA,GAAGA,CAACA,CAACA,CAACA,MAAMA,CAACA,KAAKA,CAACA,CAACA,MAAMA,CAACA,IAAIA,CAACA,SAASA,CAACA,KAAKA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,SAASA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,CAACA;YACrIA,CAACA;QACLA,CAACA;QACDA,KAAKA,CAACA,UAAUA,GAAGA,KAAKA,CAACA;QACzBA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IAEDJ,iEAAgCA,GAAhCA,UAAiCA,KAAWA;QACxCK,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;IACpCA,CAACA;IAEDL,yCAAQA,GAARA,UAASA,KAAmBA;QACxBM,IAAIA,MAAMA,GAAGA,KAAKA,CAACA;QACnBA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,EAAEA,CAACA,EAAEA,CAACA;YAC7CA,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,KAAKA,KAAKA,CAACA,CAACA,CAACA;gBAC9BA,MAAMA,CAACA,IAAIA,CAACA;YAChBA,CAACA;YACDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,YAAYA,sBAAsBA,CAACA,CAACA,CAACA;gBACtDA,MAAMA,GAA4BA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAAEA,CAACA,QAAQA,CAACA,KAAKA,CAACA,CAACA;gBACrEA,EAAEA,CAACA,CAACA,MAAMA,CAACA,CAACA,CAACA;oBACTA,MAAMA,CAACA,IAAIA,CAACA;gBAChBA,CAACA;YACLA,CAACA;QACLA,CAACA;QACDA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IAEDN,2CAAUA,GAAVA,UAAWA,KAAYA;QACnBO,EAAEA,CAACA,CAACA,KAAKA,GAAGA,CAACA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,CAACA;YACjDA,MAAMA,CAACA,IAAIA,CAACA;QAChBA,CAACA;QAACA,IAAIA,CAACA,CAACA;YACJA,MAAMA,CAACA,IAAIA,CAACA,SAASA,CAACA,KAAKA,CAACA,CAACA;QACjCA,CAACA;IACLA,CAACA;IAEDP,+CAAcA,GAAdA,UAAeA,IAAWA;QACtBQ,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,MAAMA,KAAKA,CAACA,CAACA,CAACA,CAACA;YAC9BA,MAAMA,CAACA,IAAIA,CAACA;QAChBA,CAACA;QACDA,IAAIA,MAAMA,GAAiBA,IAAIA,CAACA;QAChCA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,EAAEA,CAACA,EAAEA,CAACA;YAC7CA,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA,IAAIA,KAAKA,IAAIA,CAACA,CAACA,CAACA;gBAClCA,MAAMA,CAACA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;YAC7BA,CAACA;YACDA,EAAEA,CAACA,CAACA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,YAAYA,sBAAsBA,CAACA,CAACA,CAACA;gBACtDA,MAAMA,GAA4BA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAAEA,CAACA,cAAcA,CAACA,IAAIA,CAACA,CAACA;gBAC1EA,EAAEA,CAACA,CAACA,MAAMA,KAAKA,IAAIA,CAACA,CAACA,CAACA;oBAClBA,MAAMA,CAACA,MAAMA,CAACA;gBAClBA,CAACA;YACLA,CAACA;QACLA,CAACA;QACDA,MAAMA,CAACA,IAAIA,CAACA;IAChBA,CAACA;IAEDR,8CAAaA,GAAbA,UAAcA,KAAmBA;QAC7BS,MAAMA,CAACA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,KAAKA,CAACA,CAACA;IACzCA,CAACA;IAEDT,qDAAoBA,GAApBA,UAAqBA,KAAWA;QAC5BU,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;IACpCA,CAACA;IAEDV,4CAAWA,GAAXA,UAAYA,KAAmBA;QAC3BW,IAAIA,UAAUA,GAAGA,IAAIA,CAACA,SAASA,CAACA,OAAOA,CAACA,KAAKA,CAACA,CAACA;QAC/CA,EAAEA,CAACA,CAACA,UAAUA,IAAIA,CAACA,CAACA,CAACA,CAACA;YAClBA,MAAMA,CAACA,IAAIA,CAACA,aAAaA,CAACA,UAAUA,CAACA,CAACA;QAC1CA,CAACA;QAACA,IAAIA,CAACA,CAACA;YACJA,MAAMA,CAACA,IAAIA,CAACA;QAChBA,CAACA;IACLA,CAACA;IAEDX,8CAAaA,GAAbA,UAAcA,KAAYA;QACtBY,EAAEA,CAACA,CAACA,KAAKA,GAAGA,CAACA,IAAIA,KAAKA,IAAIA,IAAIA,CAACA,WAAWA,CAACA,CAACA,CAACA;YACzCA,MAAMA,CAACA,IAAIA,CAACA;QAChBA,CAACA;QACDA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,SAASA,CAACA,KAAKA,CAACA,CAACA;QAClCA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,KAAKA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;YACrDA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA,UAAUA,EAAEA,CAACA;QACnCA,CAACA;QACDA,IAAIA,CAACA,SAASA,CAACA,MAAMA,CAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA;QAChCA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IAEDZ,8CAAaA,GAAbA,UAAcA,KAAmBA,EAAEA,KAAYA;QAC3Ca,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;IACpCA,CAACA;IAEDb,6CAAYA,GAAZA,UAAaA,MAAoBA,EAAEA,MAAoBA;QACnDc,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;IACpCA,CAACA;IAEDd,+CAAcA,GAAdA,UAAeA,MAAaA,EAAEA,MAAaA;QACvCe,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;IACpCA,CAACA;IAEDf,sBAAIA,yCAAKA;aAATA;YACIgB,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;QACpCA,CAACA;aAEDhB,UAAUA,CAAQA;YACdgB,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;QACpCA,CAACA;;;OAJAhB;IAMDA,sBAAIA,0CAAMA;aAAVA;YACIiB,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;QACpCA,CAACA;aAEDjB,UAAWA,CAAQA;YACfiB,MAAMA,IAAIA,yCAAmBA,EAAEA,CAACA;QACpCA,CAACA;;;OAJAjB;IAMDA,8CAAaA,GAAbA,UAAcA,KAAWA,EAAEA,IAASA;QAChCkB,IAAIA,CAACA,GAAGA,gBAAKA,CAACA,aAAaA,YAACA,KAAKA,EAAEA,IAAIA,CAACA,CAACA;QACzCA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;YAC7CA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA,aAAaA,CAACA,KAAKA,EAAEA,IAAIA,CAACA,CAACA;QACjDA,CAACA;QACDA,MAAMA,CAACA,CAACA,CAACA;IACbA,CAACA;IAEDlB,uCAAMA,GAANA;QACImB,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA,CAACA;YACfA,gBAAKA,CAACA,MAAMA,WAAEA,CAACA;YACfA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,EAAEA,CAACA,EAAEA,CAACA;gBAC7CA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA,MAAMA,EAAEA,CAACA;YAC/BA,CAACA;QACLA,CAACA;IACLA,CAACA;IAEDnB,uCAAMA,GAANA,UAAOA,QAAsBA;QACzBoB,EAAEA,CAACA,CAACA,IAAIA,CAACA,OAAOA,IAAIA,IAAIA,CAACA,KAAKA,GAAGA,CAACA,CAACA,CAACA,CAACA;YACjCA,IAAIA,CAACA,YAAYA,CAACA,QAAQA,CAACA,CAACA;YAC5BA,IAAIA,CAACA,QAAQA,CAACA,QAAQA,CAACA,CAACA;YACxBA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,SAASA,CAACA,MAAMA,EAAEA,EAAEA,CAACA,EAAEA,CAACA;gBAC7CA,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;gBAC9BA,KAAKA,CAACA,MAAMA,CAACA,QAAQA,CAACA,CAACA;gBACvBA,QAAQA,CAACA,uBAAuBA,CAACA,KAAKA,CAACA,kBAAkBA,EAAEA,IAAIA,CAACA,gBAAgBA,EAAEA,KAAKA,CAACA,CAACA;YAC7FA,CAACA;YACDA,IAAIA,CAACA,aAAaA,CAACA,QAAQA,CAACA,CAACA;QACjCA,CAACA;QAACA,IAAIA,CAACA,CAACA;QAERA,CAACA;IACLA,CAACA;IAESpB,+CAAcA,GAAxBA,UAAyBA,aAA2BA;QAChDqB,aAAaA,CAACA,YAAYA,CAACA,mBAAQA,CAACA,SAASA,CAACA,CAACA;IACnDA,CAACA;IAILrB,6BAACA;AAADA,CAnLA,AAmLCA,EAnLoD,qCAAiB,EAmLrE;AAnLqB,8BAAsB,yBAmL3C,CAAA","file":"flash/display/DisplayObjectContainer.js","sourcesContent":["/**\r\n * Created by MIC on 2015/11/18.\r\n */\r\n\r\nimport {InteractiveObject} from \"./InteractiveObject\";\r\nimport {Stage} from \"./Stage\";\r\nimport {WebGLRenderer} from \"../../webgl/WebGLRenderer\";\r\nimport {NotImplementedError} from \"../../_util/NotImplementedError\";\r\nimport {DisplayObject} from \"./DisplayObject\";\r\nimport {Point} from \"../geom/Point\";\r\nimport {ShaderManager} from \"../../webgl/ShaderManager\";\r\nimport {ShaderID} from \"../../webgl/ShaderID\";\r\n\r\nexport abstract class DisplayObjectContainer extends InteractiveObject {\r\n\r\n    constructor(root:Stage, parent:DisplayObjectContainer) {\r\n        super(root, parent);\r\n        this._children = [];\r\n    }\r\n\r\n    mouseChildren:boolean = true;\r\n\r\n    get numChildren():number {\r\n        return this._children.length;\r\n    }\r\n\r\n    tabChildren:boolean = true;\r\n\r\n    addChild(child:DisplayObject):DisplayObject {\r\n        if (this._children.indexOf(child) < 0) {\r\n            this._children.push(child);\r\n        }\r\n        child.childIndex = this._children.length - 1;\r\n        return child;\r\n    }\r\n\r\n    addChildAt(child:DisplayObject, index:number):DisplayObject {\r\n        if (this._children.indexOf(child) < 0) {\r\n            if (index === 0) {\r\n                this._children.unshift(child);\r\n            } else if (index === this._children.length - 1) {\r\n                this._children.push(child);\r\n            } else {\r\n                this._children = this._children.slice(0, index - 1).concat(child).concat(this._children.slice(index, this._children.length - 1));\r\n            }\r\n        }\r\n        child.childIndex = index;\r\n        return child;\r\n    }\r\n\r\n    areInaccessibleObjectsUnderPoint(point:Point):boolean {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    contains(child:DisplayObject):boolean {\r\n        var result = false;\r\n        for (var i = 0; i < this._children.length; ++i) {\r\n            if (this._children[i] === child) {\r\n                return true;\r\n            }\r\n            if (this._children[i] instanceof DisplayObjectContainer) {\r\n                result = (<DisplayObjectContainer>this._children[i]).contains(child);\r\n                if (result) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getChildAt(index:number):DisplayObject {\r\n        if (index < 0 || index > this._children.length - 1) {\r\n            return null;\r\n        } else {\r\n            return this._children[index];\r\n        }\r\n    }\r\n\r\n    getChildByName(name:string):DisplayObject {\r\n        if (this._children.length === 0) {\r\n            return null;\r\n        }\r\n        var result:DisplayObject = null;\r\n        for (var i = 0; i < this._children.length; ++i) {\r\n            if (this._children[i].name === name) {\r\n                return this._children[i];\r\n            }\r\n            if (this._children[i] instanceof DisplayObjectContainer) {\r\n                result = (<DisplayObjectContainer>this._children[i]).getChildByName(name);\r\n                if (result !== null) {\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getChildIndex(child:DisplayObject):number {\r\n        return this._children.indexOf(child);\r\n    }\r\n\r\n    getObjectsUnderPoint(point:Point):DisplayObject[] {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    removeChild(child:DisplayObject):DisplayObject {\r\n        var childIndex = this._children.indexOf(child);\r\n        if (childIndex >= 0) {\r\n            return this.removeChildAt(childIndex);\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    removeChildAt(index:number):DisplayObject {\r\n        if (index < 0 || index >= this.numChildren) {\r\n            return null;\r\n        }\r\n        var child = this._children[index];\r\n        for (var i = index + 1; i < this._children.length; i++) {\r\n            this._children[i].childIndex++;\r\n        }\r\n        this._children.splice(index, 1);\r\n        return child;\r\n    }\r\n\r\n    setChildIndex(child:DisplayObject, index:number):void {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    swapChildren(child1:DisplayObject, child2:DisplayObject):void {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    swapChildrenAt(index1:number, index2:number):void {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get width():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    set width(v:number) {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get height():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    set height(v:number) {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    dispatchEvent(event:Event, data?:any):boolean {\r\n        var r = super.dispatchEvent(event, data);\r\n        for (var i = 0; i < this._children.length; i++) {\r\n            this._children[i].dispatchEvent(event, data);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    update():void {\r\n        if (this.enabled) {\r\n            super.update();\r\n            for (var i = 0; i < this._children.length; ++i) {\r\n                this._children[i].update();\r\n            }\r\n        }\r\n    }\r\n\r\n    render(renderer:WebGLRenderer):void {\r\n        if (this.visible && this.alpha > 0) {\r\n            this.__preprocess(renderer);\r\n            this.__render(renderer);\r\n            for (var i = 0; i < this._children.length; ++i) {\r\n                var child = this._children[i];\r\n                child.render(renderer);\r\n                renderer.copyRenderTargetContent(child.outputRenderTarget, this._rawRenderTarget, false);\r\n            }\r\n            this.__postprocess(renderer);\r\n        } else {\r\n            //this.outputRenderTarget.clear();\r\n        }\r\n    }\r\n\r\n    protected __selectShader(shaderManager:ShaderManager):void {\r\n        shaderManager.selectShader(ShaderID.REPLICATE);\r\n    }\r\n\r\n    protected _children:DisplayObject[] = null;\r\n\r\n}\r\n"],"sourceRoot":"/source/"}