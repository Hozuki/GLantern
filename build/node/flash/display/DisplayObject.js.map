{"version":3,"sources":["flash/display/DisplayObject.ts"],"names":[],"mappings":"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","file":"flash/display/DisplayObject.js","sourcesContent":["/**\r\n * Created by MIC on 2015/11/18.\r\n */\r\n\r\nimport {Stage} from \"./Stage\";\r\nimport {DisplayObjectContainer} from \"./DisplayObjectContainer\";\r\nimport {Transform} from \"../geom/Transform\";\r\nimport {WebGLRenderer} from \"../../webgl/WebGLRenderer\";\r\nimport {Rectangle} from \"../geom/Rectangle\";\r\nimport {IWebGLElement} from \"../../webgl/IWebGLElement\";\r\nimport {IBitmapDrawable} from \"./IBitmapDrawable\";\r\nimport {EventDispatcher} from \"../events/EventDispatcher\";\r\nimport {BlendMode} from \"./BlendMode\";\r\nimport {RenderTarget2D} from \"../../webgl/RenderTarget2D\";\r\nimport {ShaderID} from \"../../webgl/ShaderID\";\r\nimport {ShaderManager} from \"../../webgl/ShaderManager\";\r\nimport {UniformCache} from \"../../webgl/UniformCache\";\r\nimport {BitmapFilter} from \"../filters/BitmapFilter\";\r\nimport {Matrix3D} from \"../geom/Matrix3D\";\r\nimport {Vector3D} from \"../geom/Vector3D\";\r\nimport {NotImplementedError} from \"../../flash/errors/NotImplementedError\";\r\nimport {GLUtil} from \"../../GLUtil\";\r\n\r\nexport abstract class DisplayObject extends EventDispatcher implements IBitmapDrawable, IWebGLElement {\r\n\r\n    constructor(root:Stage, parent:DisplayObjectContainer) {\r\n        super();\r\n        this._root = root;\r\n        this._stage = root;\r\n        this._parent = parent;\r\n        this._filters = [];\r\n        this._transform = new Transform();\r\n        this._isRoot = root === null;\r\n    }\r\n\r\n    get alpha():number {\r\n        return this._alpha;\r\n    }\r\n\r\n    set alpha(v:number) {\r\n        this._alpha = GLUtil.limitInto(v, 0, 1);\r\n    }\r\n\r\n    blendMode:string = BlendMode.NORMAL;\r\n\r\n    get cacheAsBitmap():boolean {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    set cacheAsBitmap(v:boolean) {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get childIndex():number {\r\n        return this._childIndex;\r\n    }\r\n\r\n    // DO NOT call manually\r\n    set childIndex(v:number) {\r\n        this._childIndex = v;\r\n    }\r\n\r\n    dispose():void {\r\n        super.dispose();\r\n        this.filters = [];\r\n    }\r\n\r\n    enabled:boolean = true;\r\n\r\n    get filters():BitmapFilter[] {\r\n        return this._filters.slice();\r\n    }\r\n\r\n    set filters(v:BitmapFilter[]) {\r\n        var i:number;\r\n        var hasFiltersBefore = this.__shouldProcessFilters();\r\n        if (hasFiltersBefore) {\r\n            for (i = 0; i < this._filters.length; ++i) {\r\n                this._filters[i].notifyRemoved();\r\n            }\r\n        }\r\n        this._filters = v;\r\n        var hasFiltersNow = this.__shouldProcessFilters();\r\n        if (hasFiltersNow) {\r\n            for (i = 0; i < this._filters.length; ++i) {\r\n                this._filters[i].notifyAdded();\r\n            }\r\n        }\r\n        if (hasFiltersNow !== hasFiltersBefore) {\r\n            if (hasFiltersNow) {\r\n                this.__createFilterTarget(this._root.worldRenderer);\r\n            } else {\r\n                this.__releaseFilterTarget();\r\n            }\r\n        }\r\n    }\r\n\r\n    get height():number {\r\n        return this._height;\r\n    }\r\n\r\n    set height(v:number) {\r\n        this._height = v;\r\n    }\r\n\r\n    mask:DisplayObject = null;\r\n\r\n    get mouseX():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get mouseY():number {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    get name():string {\r\n        return this._name;\r\n    }\r\n\r\n    set name(v:string) {\r\n        this._name = v;\r\n    }\r\n\r\n    get parent():DisplayObjectContainer {\r\n        return this._parent;\r\n    }\r\n\r\n    get root():DisplayObject {\r\n        return this._root;\r\n    }\r\n\r\n    get rotation():number {\r\n        return this._rotation;\r\n    }\r\n\r\n    set rotation(v:number) {\r\n        while (v < -180) {\r\n            v += 360;\r\n        }\r\n        while (v > 180) {\r\n            v -= 360;\r\n        }\r\n        this._rotation = v;\r\n    }\r\n\r\n    get rotationX():number {\r\n        return this._rotationX;\r\n    }\r\n\r\n    set rotationX(v:number) {\r\n        while (v < -180) {\r\n            v += 360;\r\n        }\r\n        while (v > 180) {\r\n            v -= 360;\r\n        }\r\n        this._rotationX = v;\r\n    }\r\n\r\n    get rotationY():number {\r\n        return this._rotationY;\r\n    }\r\n\r\n    set rotationY(v:number) {\r\n        while (v < -180) {\r\n            v += 360;\r\n        }\r\n        while (v > 180) {\r\n            v -= 360;\r\n        }\r\n        this._rotationY = v;\r\n    }\r\n\r\n    get rotationZ():number {\r\n        return this._rotationZ;\r\n    }\r\n\r\n    set rotationZ(v:number) {\r\n        while (v < -180) {\r\n            v += 360;\r\n        }\r\n        while (v > 180) {\r\n            v -= 360;\r\n        }\r\n        this._rotationZ = v;\r\n    }\r\n\r\n    get stage():Stage {\r\n        return this._stage;\r\n    }\r\n\r\n    get transform():Transform {\r\n        return this._transform;\r\n    }\r\n\r\n    visible:boolean = true;\r\n\r\n    get width():number {\r\n        return this._width;\r\n    }\r\n\r\n    set width(v:number) {\r\n        this._width = v;\r\n    }\r\n\r\n    get x():number {\r\n        return this._x;\r\n    }\r\n\r\n    set x(v:number) {\r\n        var b = this._x !== v;\r\n        this._x = v;\r\n        if (b) {\r\n            this.requestUpdateTransform();\r\n        }\r\n    }\r\n\r\n    get y():number {\r\n        return this._y;\r\n    }\r\n\r\n    set y(v:number) {\r\n        var b = this._y !== v;\r\n        this._y = v;\r\n        if (b) {\r\n            this.requestUpdateTransform();\r\n        }\r\n    }\r\n\r\n    get z():number {\r\n        return this._z;\r\n    }\r\n\r\n    set z(v:number) {\r\n        var b = this._z !== v;\r\n        this._z = v;\r\n        if (b) {\r\n            this.requestUpdateTransform();\r\n        }\r\n    }\r\n\r\n    getBounds(targetCoordinateSpace:DisplayObject):Rectangle {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    getRect(targetCoordinateSpace:DisplayObject):Rectangle {\r\n        throw new NotImplementedError();\r\n    }\r\n\r\n    update():void {\r\n        if (this._isTransformDirty) {\r\n            this.__updateTransform();\r\n        }\r\n        if (this.enabled) {\r\n            this.__update();\r\n        }\r\n    }\r\n\r\n    render(renderer:WebGLRenderer):void {\r\n        if (this.visible && this.alpha > 0) {\r\n            this.__preprocess(renderer);\r\n            this.__render(renderer);\r\n            this.__postprocess(renderer);\r\n        } else {\r\n            //this.outputRenderTarget.clear();\r\n        }\r\n    }\r\n\r\n    requestUpdateTransform():void {\r\n        this._isTransformDirty = true;\r\n    }\r\n\r\n    protected __updateTransform():void {\r\n        var matrix3D:Matrix3D;\r\n        if (this._isRoot) {\r\n            matrix3D = new Matrix3D();\r\n        } else {\r\n            matrix3D = this.parent.transform.matrix3D.clone();\r\n        }\r\n        matrix3D.prependTranslation(this.x, this.y, this.z);\r\n        matrix3D.prependRotation(this.rotationX, Vector3D.X_AXIS);\r\n        matrix3D.prependRotation(this.rotationY, Vector3D.Y_AXIS);\r\n        matrix3D.prependRotation(this.rotationZ, Vector3D.Z_AXIS);\r\n        this.transform.matrix3D.copyFrom(matrix3D);\r\n    }\r\n\r\n    protected abstract __update():void;\r\n\r\n    protected abstract __render(renderer:WebGLRenderer):void;\r\n\r\n    /**\r\n     * Override this function to select the proper shader.\r\n     * @param shaderManager {ShaderManager} The shader manager.\r\n     * @example\r\n     * protected __selectShader(shaderManager: ShaderManager): void {\r\n     * &nbsp;&nbsp;shaderManager.selectShader(ShaderID.PRIMITIVE);\r\n     * }\r\n     */\r\n    protected abstract __selectShader(shaderManager:ShaderManager):void;\r\n\r\n    protected __preprocess(renderer:WebGLRenderer):void {\r\n        if (this.__shouldProcessFilters()) {\r\n            this._filterTarget.clear();\r\n            renderer.setRenderTarget(this._filterTarget);\r\n        } else {\r\n            renderer.setRenderTarget(null);\r\n        }\r\n        var manager = renderer.shaderManager;\r\n        this.__selectShader(manager);\r\n        var shader = manager.currentShader;\r\n        if (!GLUtil.isUndefinedOrNull(shader)) {\r\n            shader.changeValue(\"uTransformMatrix\", (u:UniformCache):void => {\r\n                u.value = this.transform.matrix3D.toArray();\r\n            });\r\n            shader.changeValue(\"uAlpha\", (u:UniformCache):void => {\r\n                u.value = this.alpha;\r\n            });\r\n        }\r\n        renderer.setBlendMode(this.blendMode);\r\n    }\r\n\r\n    protected __postprocess(renderer:WebGLRenderer):void {\r\n        if (this.__shouldProcessFilters()) {\r\n            var filterManager = renderer.filterManager;\r\n            filterManager.pushFilterGroup(this.filters);\r\n            filterManager.processFilters(renderer, this._filterTarget, renderer.screenTarget, false);\r\n            filterManager.popFilterGroup();\r\n        }\r\n    }\r\n\r\n    protected __createFilterTarget(renderer:WebGLRenderer):void {\r\n        if (this._filterTarget !== null) {\r\n            return;\r\n        }\r\n        this._filterTarget = renderer.createRenderTarget();\r\n    }\r\n\r\n    protected __releaseFilterTarget():void {\r\n        if (this._filterTarget === null) {\r\n            return;\r\n        }\r\n        this._root.worldRenderer.releaseRenderTarget(this._filterTarget);\r\n        this._filterTarget = null;\r\n    }\r\n\r\n    private __shouldProcessFilters():boolean {\r\n        return this.filters !== null && this.filters.length > 0;\r\n    }\r\n\r\n    protected _parent:DisplayObjectContainer = null;\r\n    protected _root:Stage = null;\r\n    protected _name:string = \"\";\r\n    protected _rotation:number = 0;\r\n    protected _rotationX:number = 0;\r\n    protected _rotationY:number = 0;\r\n    protected _rotationZ:number = 0;\r\n    protected _scaleX:number = 1;\r\n    protected _scaleY:number = 1;\r\n    protected _scaleZ:number = 1;\r\n    protected _stage:Stage = null;\r\n    protected _height:number = 0;\r\n    protected _width:number = 0;\r\n    protected _x:number = 0;\r\n    protected _y:number = 0;\r\n    protected _z:number = 0;\r\n    protected _childIndex:number = -1;\r\n    protected _alpha:number = 1;\r\n    protected _filters:BitmapFilter[] = null;\r\n    protected _filterTarget:RenderTarget2D = null;\r\n    protected _transform:Transform = null;\r\n    protected _isTransformDirty:boolean = true;\r\n    private _isRoot:boolean = false;\r\n\r\n}\r\n"],"sourceRoot":"/source/"}