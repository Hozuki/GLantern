{"version":3,"sources":["webgl/shaders/BufferedShader.ts"],"names":[],"mappings":"AAAA;;GAEG;;;;;;;AAEH,yBAAuB,2BAA2B,CAAC,CAAA;AACnD,6BAA2B,iBAAiB,CAAC,CAAA;AAG7C,8BAA4B,kBAAkB,CAAC,CAAA;AAC/C,gCAA8B,oBAAoB,CAAC,CAAA;AACnD,2BAAyB,eAAe,CAAC,CAAA;AACzC,8BAA4B,kBAAkB,CAAC,CAAA;AAE/C;IAAoC,kCAAU;IAE1C,wBAAY,OAAqB,EAAE,YAAmB,EAAE,cAAqB;QACzE,kBAAM,OAAO,EAAE,YAAY,EAAE,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;IAC7D,CAAC;IAED,mCAAU,GAAV,UAAW,OAAoB;QAC3B,sCAAsC;QACtC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,OAAO,GAAG,OAAO,CAAC;IACrD,CAAC;IAMS,oCAAW,GAArB,UAAsB,OAAqB,EAAE,QAAkC,EAAE,UAAsC;QACnH,gBAAK,CAAC,WAAW,YAAC,OAAO,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;QAEjD,IAAI,CAAc,CAAC;QACnB,IAAI,gBAAgB,GAAG,IAAI,mBAAQ,EAAE,CAAC;QACtC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;QACpC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;QACrC,gBAAgB,CAAC,yBAAyB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAEpE,CAAC,GAAG,IAAI,2BAAY,EAAE,CAAC;QACvB,CAAC,CAAC,IAAI,GAAG,UAAU,CAAC;QACpB,CAAC,CAAC,IAAI,GAAG,6BAAa,CAAC,UAAU,CAAC;QAClC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;QACZ,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC;QACjB,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QAExB,CAAC,GAAG,IAAI,2BAAY,EAAE,CAAC;QACvB,CAAC,CAAC,IAAI,GAAG,mBAAmB,CAAC;QAC7B,CAAC,CAAC,IAAI,GAAG,6BAAa,CAAC,KAAK,CAAC;QAC7B,CAAC,CAAC,KAAK,GAAG,gBAAgB,CAAC,OAAO,EAAE,CAAC;QACrC,CAAC,CAAC,SAAS,GAAG,KAAK,CAAC;QACpB,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAC5B,CAAC;IA1BM,gCAAiB,GAAU,gBAAgB,CAAC;IAC5C,8BAAe,GAAU,iCAAe,CAAC,QAAQ,CAAC;IAClD,4BAAa,GAAU,6BAAa,CAAC,QAAQ,CAAC;IA0BzD,qBAAC;AAAD,CAvCA,AAuCC,CAvCmC,uBAAU,GAuC7C;AAvCY,sBAAc,iBAuC1B,CAAA","file":"webgl/shaders/BufferedShader.js","sourcesContent":["/**\r\n * Created by MIC on 2015/11/18.\r\n */\r\n\r\nimport {Matrix3D} from \"../../flash/geom/Matrix3D\";\r\nimport {UniformCache} from \"../UniformCache\";\r\nimport {AttributeCache} from \"../AttributeCache\";\r\nimport {ShaderManager} from \"../ShaderManager\";\r\nimport {VertexShaders} from \"../VertexShaders\";\r\nimport {FragmentShaders} from \"../FragmentShaders\";\r\nimport {ShaderBase} from \"../ShaderBase\";\r\nimport {WebGLDataType} from \"../WebGLDataType\";\r\n\r\nexport class BufferedShader extends ShaderBase {\r\n\r\n    constructor(manager:ShaderManager, vertexSource:string, fragmentSource:string) {\r\n        super(manager, vertexSource, fragmentSource, null, null);\r\n    }\r\n\r\n    setTexture(texture:WebGLTexture):void {\r\n        // Must contains a \"uSampler\" uniform.\r\n        this._uniforms.get(\"uSampler\").texture = texture;\r\n    }\r\n\r\n    static SHADER_CLASS_NAME:string = \"BufferedShader\";\r\n    static FRAGMENT_SOURCE:string = FragmentShaders.buffered;\r\n    static VERTEX_SOURCE:string = VertexShaders.buffered;\r\n\r\n    protected __localInit(manager:ShaderManager, uniforms:Map<string, UniformCache>, attributes:Map<string, AttributeCache>):void {\r\n        super.__localInit(manager, uniforms, attributes);\r\n\r\n        var u:UniformCache;\r\n        var projectionMatrix = new Matrix3D();\r\n        var w = manager.renderer.view.width;\r\n        var h = manager.renderer.view.height;\r\n        projectionMatrix.setOrthographicProjection(0, w, h, 0, -1000, 1000);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uSampler\";\r\n        u.type = WebGLDataType.USampler2D;\r\n        u.value = 0;\r\n        u.texture = null;\r\n        uniforms.set(u.name, u);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uProjectionMatrix\";\r\n        u.type = WebGLDataType.UMat4;\r\n        u.value = projectionMatrix.toArray();\r\n        u.transpose = false;\r\n        uniforms.set(u.name, u);\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"/source/"}