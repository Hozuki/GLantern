{"version":3,"sources":["webgl/webglutils.ts"],"names":["WebGLUtils","WebGLUtils.constructor","WebGLUtils.setupWebGL","WebGLUtils.setupWebGL.showLink","makeFailHtml","create3DContext"],"mappings":"AAAA;;GAEG;AAEH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BG;AAEH,IAAI,EAAE,GAAS,IAAK,CAAC,qBAAqB,IAAU,MAAO,CAAC,qBAAqB,CAAC;AAElF;IAAAA;IAuBAC,CAACA;IArBUD,qBAAUA,GAAjBA,UAAkBA,MAAwBA,EAAEA,kBAAsBA;QAC9DE,kBAAkBA,GAAUA;YACxBC,IAAIA,QAAQA,GAAUA,YAAYA,CAACA,GAAGA,CAACA,CAACA;YACxCA,OAAOA,CAACA,KAAKA,CAACA,QAAQA,CAACA,CAACA;YACxBA,IAAIA,SAASA,GAAGA,MAAMA,CAACA,aAAaA,CAACA;YACrCA,EAAEA,CAACA,CAACA,SAASA,CAACA,CAACA,CAACA;gBACZA,SAASA,CAACA,SAASA,GAAGA,QAAQA,CAACA;YACnCA,CAACA;QACLA,CAACA;QAEDD,EAAEA,CAACA,CAACA,EAAEA,KAAKA,SAASA,CAACA,CAACA,CAACA;YACnBA,QAAQA,CAACA,mBAAmBA,CAACA,CAACA;YAC9BA,MAAMA,CAACA,IAAIA,CAACA;QAChBA,CAACA;QACDA,IAAIA,OAAOA,GAAGA,eAAeA,CAACA,MAAMA,EAAEA,kBAAkBA,CAACA,CAACA;QAC1DA,EAAEA,CAACA,CAACA,OAAOA,IAAIA,IAAIA,CAACA,CAACA,CAACA;YAClBA,QAAQA,CAACA,aAAaA,CAACA,CAACA;QAC5BA,CAACA;QACDA,MAAMA,CAACA,OAAOA,CAACA;IACnBA,CAACA;IAELF,iBAACA;AAADA,CAvBA,AAuBCA,IAAA;AAvBqB,kBAAU,aAuB/B,CAAA;AAED,sBAAsB,OAAc;IAChCI,MAAMA,CAACA,EAAEA;QACLA,wEAAwEA;QACxEA,qBAAqBA;QACrBA,4DAA4DA;QAC5DA,gBAAgBA,GAAGA,OAAOA,GAAGA,QAAQA;QACrCA,QAAQA;QACRA,oBAAoBA,CAACA;AAC7BA,CAACA;AAED,yBAAyB,MAAwB,EAAE,kBAAsB;IACrEC,IAAIA,KAAKA,GAAGA,CAACA,OAAOA,EAAEA,oBAAoBA,EAAEA,WAAWA,EAAEA,WAAWA,CAACA,CAACA;IACtEA,IAAIA,OAAOA,GAAyBA,IAAIA,CAACA;IACzCA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,KAAKA,CAACA,MAAMA,EAAEA,EAAEA,CAACA,EAAEA,CAACA;QACpCA,IAAIA,CAACA;YACDA,OAAOA,GAA0BA,MAAMA,CAACA,UAAUA,CAACA,KAAKA,CAACA,CAACA,CAACA,EAAEA,kBAAkBA,CAACA,CAACA;QACrFA,CAAEA;QAAAA,KAAKA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;QACbA,CAACA;QACDA,EAAEA,CAACA,CAACA,OAAOA,CAACA,CAACA,CAACA;YACVA,KAAKA,CAACA;QACVA,CAACA;IACLA,CAACA;IACDA,MAAMA,CAACA,OAAOA,CAACA;AACnBA,CAACA;AAED,IAAI,mBAAmB,GAAU,EAAE;IAC/B,wDAAwD;IACxD,wEAAwE,CAAC;AAE7E,IAAI,aAAa,GAAU,EAAE;IACzB,yDAAyD;IACzD,sFAAsF,CAAC","file":"webgl/WebGLUtils.js","sourcesContent":["/**\r\n * Created by MIC on 2015/11/13.\r\n */\r\n\r\n/*\r\n * Copyright 2010, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nvar gl = (<any>this).WebGLRenderingContext || (<any>window).WebGLRenderingContext;\r\n\r\nexport abstract class WebGLUtils {\r\n\r\n    static setupWebGL(canvas:HTMLCanvasElement, optionalAttributes:any):WebGLRenderingContext {\r\n        function showLink(str:string) {\r\n            var failHtml:string = makeFailHtml(str);\r\n            console.error(failHtml);\r\n            var container = canvas.parentElement;\r\n            if (container) {\r\n                container.innerHTML = failHtml;\r\n            }\r\n        }\r\n\r\n        if (gl === undefined) {\r\n            showLink(GET_A_WEBGL_BROWSER);\r\n            return null;\r\n        }\r\n        var context = create3DContext(canvas, optionalAttributes);\r\n        if (context == null) {\r\n            showLink(OTHER_PROBLEM);\r\n        }\r\n        return context;\r\n    }\r\n\r\n}\r\n\r\nfunction makeFailHtml(message:string):string {\r\n    return '' +\r\n        '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\r\n        '<td align=\"center\">' +\r\n        '<div style=\"display: table-cell; vertical-align: middle;\">' +\r\n        '<div style=\"\">' + message + '</div>' +\r\n        '</div>' +\r\n        '</td></tr></table>';\r\n}\r\n\r\nfunction create3DContext(canvas:HTMLCanvasElement, optionalAttributes:any):WebGLRenderingContext {\r\n    var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n    var context:WebGLRenderingContext = null;\r\n    for (var i = 0; i < names.length; ++i) {\r\n        try {\r\n            context = <WebGLRenderingContext>canvas.getContext(names[i], optionalAttributes);\r\n        } catch (e) {\r\n        }\r\n        if (context) {\r\n            break;\r\n        }\r\n    }\r\n    return context;\r\n}\r\n\r\nvar GET_A_WEBGL_BROWSER:string = '' +\r\n    'This page requires a browser that supports WebGL.<br/>' +\r\n    '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\r\n\r\nvar OTHER_PROBLEM:string = '' +\r\n    \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n    '<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>';"],"sourceRoot":"/source/"}