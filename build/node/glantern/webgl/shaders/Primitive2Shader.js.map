{"version":3,"sources":["glantern/webgl/shaders/primitive2shader.ts"],"names":["Primitive2Shader","Primitive2Shader.constructor","Primitive2Shader.setProjection","Primitive2Shader.setTransform","Primitive2Shader.setAlpha","Primitive2Shader.setFlipX","Primitive2Shader.setFlipY","Primitive2Shader.setOriginalSize","Primitive2Shader.___localInit"],"mappings":"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","file":"glantern/webgl/shaders/Primitive2Shader.js","sourcesContent":["/**\r\n * Created by MIC on 2015/11/18.\r\n */\r\n\r\nimport {Matrix3D} from \"../../flash/geom/Matrix3D\";\r\nimport {UniformCache} from \"../UniformCache\";\r\nimport {AttributeCache} from \"../AttributeCache\";\r\nimport {ShaderManager} from \"../ShaderManager\";\r\nimport {VertexShaders} from \"../VertexShaders\";\r\nimport {FragmentShaders} from \"../FragmentShaders\";\r\nimport {ShaderBase} from \"../ShaderBase\";\r\nimport {WebGLDataType} from \"../WebGLDataType\";\r\n\r\nexport class Primitive2Shader extends ShaderBase {\r\n\r\n    constructor(manager:ShaderManager) {\r\n        super(manager, Primitive2Shader.VERTEX_SOURCE, Primitive2Shader.FRAGMENT_SOURCE, null, null);\r\n    }\r\n\r\n    static SHADER_CLASS_NAME:string = \"Primitive2Shader\";\r\n    static FRAGMENT_SOURCE:string = FragmentShaders.primitive;\r\n    static VERTEX_SOURCE:string = VertexShaders.primitive2;\r\n\r\n    setProjection(matrix:Matrix3D):void {\r\n        this._uniforms.get(\"uProjectionMatrix\").value = matrix.toArray();\r\n    }\r\n\r\n    setTransform(matrix:Matrix3D):void {\r\n        this._uniforms.get(\"uTransformMatrix\").value = matrix.toArray();\r\n    }\r\n\r\n    setAlpha(alpha:number):void {\r\n        this._uniforms.get(\"uAlpha\").value = alpha;\r\n    }\r\n\r\n    setFlipX(flip:boolean):void {\r\n        this._uniforms.get(\"uFlipX\").value = flip;\r\n    }\r\n\r\n    setFlipY(flip:boolean):void {\r\n        this._uniforms.get(\"uFlipY\").value = flip;\r\n    }\r\n\r\n    setOriginalSize(xy:number[]):void {\r\n        this._uniforms.get(\"uOriginalSize\").value = xy.slice();\r\n    }\r\n\r\n    protected __localInit(manager:ShaderManager, uniforms:Map<string,UniformCache>, attributes:Map<string, AttributeCache>):void {\r\n        super.__localInit(manager, uniforms, attributes);\r\n\r\n        var u:UniformCache;\r\n        var transformMatrix = new Matrix3D();\r\n        var projectionMatrix = new Matrix3D();\r\n        var w = manager.renderer.view.width;\r\n        var h = manager.renderer.view.height;\r\n        projectionMatrix.setOrthographicProjection(0, w, h, 0, -1000, 1000);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uProjectionMatrix\";\r\n        u.type = WebGLDataType.UMat4;\r\n        u.value = projectionMatrix.toArray();\r\n        u.transpose = false;\r\n        uniforms.set(u.name, u);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uTransformMatrix\";\r\n        u.type = WebGLDataType.UMat4;\r\n        u.value = transformMatrix.toArray();\r\n        u.transpose = false;\r\n        uniforms.set(u.name, u);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uAlpha\";\r\n        u.type = WebGLDataType.U1F;\r\n        u.value = 1;\r\n        uniforms.set(u.name, u);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uFlipX\";\r\n        u.type = WebGLDataType.UBool;\r\n        u.value = false;\r\n        uniforms.set(u.name, u);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uFlipY\";\r\n        u.type = WebGLDataType.UBool;\r\n        u.value = false;\r\n        uniforms.set(u.name, u);\r\n\r\n        u = new UniformCache();\r\n        u.name = \"uOriginalSize\";\r\n        u.type = WebGLDataType.U2F;\r\n        u.value = [0, 0];\r\n        uniforms.set(u.name, u);\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"/source/"}