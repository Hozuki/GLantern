{"version":3,"sources":["index.ts"],"names":["injectToGlobal","isSupported"],"mappings":"AAAA;;GAEG;AAEH,IAAY,KAAK,WAAM,eAAe,CAAC,CAAA;AAO/B,aAAK;AANb,IAAY,KAAK,WAAM,eAAe,CAAC,CAAA;AAMxB,aAAK;AALpB,IAAY,KAAK,WAAM,eAAe,CAAC,CAAA;AAKjB,aAAK;AAJ3B,IAAY,EAAE,WAAM,YAAY,CAAC,CAAA;AAIJ,UAAE;AAH/B,IAAY,EAAE,WAAM,YAAY,CAAC,CAAA;AAGA,UAAE;AAFnC,yBAAuB,YAAY,CAAC,CAAA;AAEC,gBAAQ;AAE7C,wBAA+B,KAAS;IACpCA,KAAKA,CAACA,OAAOA,CAACA,GAAGA,KAAKA,CAACA;IACvBA,KAAKA,CAACA,OAAOA,CAACA,GAAGA,KAAKA,CAACA;IACvBA,KAAKA,CAACA,OAAOA,CAACA,GAAGA,KAAKA,CAACA;IACvBA,KAAKA,CAACA,IAAIA,CAACA,GAAGA,EAAEA,CAACA;IACjBA,KAAKA,CAACA,IAAIA,CAACA,GAAGA,EAAEA,CAACA;AACrBA,CAACA;AANe,sBAAc,iBAM7B,CAAA;AAED;IACIC,IAAIA,YAAYA,GAAQA,MAAMA,CAACA;IAC/BA,IAAIA,IAAIA,GAAGA,KAAKA,CAACA,KAAKA,CAACA;IAEvBA,EAAEA,CAACA,CAACA,CAACA,YAAYA,CAACA,CAACA,CAACA;QAChBA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IACDA,qDAAqDA;IACrDA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,YAAYA,CAACA,mBAAmBA,CAACA,CAACA,CAACA,CAACA,CAACA;QAC7DA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IACDA,6EAA6EA;IAC7EA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,YAAYA,CAACA,uBAAuBA,CAACA,CAACA,CAACA,CAACA,CAACA;QACjEA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IACDA,yDAAyDA;IACzDA,mFAAmFA;IACnFA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA,CAACA;QAC/CA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IACDA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,iBAAiBA,CAACA,YAAYA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA,CAACA;QAC/CA,MAAMA,CAACA,KAAKA,CAACA;IACjBA,CAACA;IACDA,gGAAgGA;IAChGA,EAAEA,CAACA,CAACA,OAAOA,YAAYA,CAACA,QAAQA,CAACA,KAAKA,QAAQA,CAACA,CAACA,CAACA;QAC7CA,IAAIA,mBAAmBA,GAAGA,yBAAyBA,CAACA;QACpDA,IAAIA,iBAAiBA,GAAGA,mBAAmBA,CAACA,IAAIA,CAACA,MAAMA,CAACA,SAASA,CAACA,UAAUA,CAACA,CAACA;QAC9EA,EAAEA,CAACA,CAACA,iBAAiBA,CAACA,MAAMA,GAAGA,CAACA,IAAIA,QAAQA,CAACA,iBAAiBA,CAACA,CAACA,CAACA,CAACA,GAAGA,EAAEA,CAACA,CAACA,CAACA;YACtEA,MAAMA,CAACA,KAAKA,CAACA;QACjBA,CAACA;IACLA,CAACA;IACDA,MAAMA,CAACA,IAAIA,CAACA;AAChBA,CAACA;AAhCe,mBAAW,cAgC1B,CAAA","file":"index.js","sourcesContent":["/**\r\n * Created by MIC on 2015/11/20.\r\n */\r\n\r\nimport * as _util from \"./_util/index\";\r\nimport * as flash from \"./flash/index\";\r\nimport * as webgl from \"./webgl/index\";\r\nimport * as fl from \"./fl/index\";\r\nimport * as mx from \"./mx/index\";\r\nimport {GLantern} from \"./GLantern\";\r\n\r\nexport {_util, flash, webgl, fl, mx, GLantern};\r\n\r\nexport function injectToGlobal($this:any):void {\r\n    $this[\"_util\"] = _util;\r\n    $this[\"flash\"] = flash;\r\n    $this[\"webgl\"] = webgl;\r\n    $this[\"fl\"] = fl;\r\n    $this[\"mx\"] = mx;\r\n}\r\n\r\nexport function isSupported():boolean {\r\n    var globalObject = <any>window;\r\n    var util = _util._util;\r\n\r\n    if (!globalObject) {\r\n        return false;\r\n    }\r\n    // GLantern is based on <canvas>, so it should exist.\r\n    if (!util.isClassDefinition(globalObject[\"HTMLCanvasElement\"])) {\r\n        return false;\r\n    }\r\n    // GLantern uses WebGL, so there should be a corresponding rendering context.\r\n    if (!util.isClassDefinition(globalObject[\"WebGLRenderingContext\"])) {\r\n        return false;\r\n    }\r\n    // GLantern uses Map and Set class, so they should exist.\r\n    // Note: Map and Set are ES6 features, but they are implemented on modern browsers.\r\n    if (!util.isClassDefinition(globalObject[\"Map\"])) {\r\n        return false;\r\n    }\r\n    if (!util.isClassDefinition(globalObject[\"Set\"])) {\r\n        return false;\r\n    }\r\n    // No plans for support of Chrome whose version is under 40, due to a WebGL memory leak problem.\r\n    if (typeof globalObject[\"chrome\"] === \"object\") {\r\n        var chromeVersionRegExp = /Chrome\\/(\\d+)(?:\\.\\d+)*/;\r\n        var chromeVersionInfo = chromeVersionRegExp.exec(window.navigator.appVersion);\r\n        if (chromeVersionInfo.length < 2 || parseInt(chromeVersionInfo[1]) < 40) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n"],"sourceRoot":"/source/"}