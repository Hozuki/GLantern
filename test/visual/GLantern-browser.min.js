!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=r[a]={exports:{}};e[a][0].call(h.exports,function(t){var r=e[a][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";var n=t("./index");!function(t){t?t.GLantern=n:console.error("GLantern must run in a browser.")}(window||{})},{"./index":99}],2:[function(t,e,r){"use strict";var n=t("./transitions/index");r.transitions=n},{"./transitions/index":19}],3:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../flash/events/EventDispatcher"),o=t("../../flash/errors/NotImplementedError"),a=function(t){function e(e,r,n,i,o,a,s){void 0===s&&(s=!1),t.call(this),this.begin=NaN,this.duration=5,this.finish=5,this.FPS=60,this.func=null,this.isPlaying=!1,this.looping=!1,this.obj=null,this.position=0,this.prop=null,this.time=0,this.useSeconds=!1,this.obj=e,this.prop=r,this.func=n,this.begin=i,this.finish=o,this.duration=a,this.useSeconds=s}return n(e,t),e.prototype.continueTo=function(t,e){throw new o.NotImplementedError},e.prototype.fforward=function(){throw new o.NotImplementedError},e.prototype.nextFrame=function(){throw new o.NotImplementedError},e.prototype.prevFrame=function(){throw new o.NotImplementedError},e.prototype.resume=function(){throw new o.NotImplementedError},e.prototype.rewind=function(t){throw void 0===t&&(t=0),new o.NotImplementedError},e.prototype.start=function(){throw new o.NotImplementedError},e.prototype.stop=function(){throw new o.NotImplementedError},e.prototype.yoyo=function(){throw new o.NotImplementedError},e}(i.EventDispatcher);r.Tween=a},{"../../flash/errors/NotImplementedError":52,"../../flash/events/EventDispatcher":54}],4:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../flash/events/FlashEvent"),o=t("../../flash/errors/NotImplementedError"),a=function(t){function e(e,r,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),t.call(this,e,i,o),this._position=NaN,this._time=NaN,this._position=n,this._time=r}return n(e,t),e.prototype.clone=function(){throw new o.NotImplementedError},Object.defineProperty(e,"MOTION_CHANGE",{get:function(){return"motionChange"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MOTION_FINISH",{get:function(){return"motionFinish"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MOTION_LOOP",{get:function(){return"motionLoop"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MOTION_RESUME",{get:function(){return"motionResume"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MOTION_START",{get:function(){return"motionStart"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MOTION_STOP",{get:function(){return"motionStop"},enumerable:!0,configurable:!0}),e}(i.FlashEvent);r.TweenEvent=a},{"../../flash/errors/NotImplementedError":52,"../../flash/events/FlashEvent":55}],5:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n,i){return void 0===i&&(i=0),r*(t/=n)*t*((i+1)*t-i)+e},t.easeInOut=function(t,e,r,n,i){return void 0===i&&(i=0),(t/=n/2)<1?r/2*(t*t*(((i*=1.525)+1)*t-i))+e:r/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},t.easeOut=function(t,e,r,n,i){return void 0===i&&(i=0),r*((t=t/n-1)*t*((i+1)*t+i)+1)+e},t}();r.Back=n},{}],6:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(e,r,n,i){return n-t.easeOut(i-e,0,n,i)+r},t.easeInOut=function(e,r,n,i){return i/2>e?.5*t.easeIn(2*e,0,n,i)+r:.5*t.easeOut(2*e-i,0,n,i)+.5*n+r},t.easeOut=function(t,e,r,n){return(t/=n)<1/2.75?r*(7.5625*t*t)+e:2/2.75>t?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t}();r.Bounce=n},{}],7:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return-r*(Math.sqrt(1-(t/=n)*t)-1)+e},t.easeInOut=function(t,e,r,n){return(t/=n/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e},t.easeOut=function(t,e,r,n){return r*Math.sqrt(1-(t=t/n-1)*t)+e},t}();r.Circular=n},{}],8:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return r*(t/=n)*t*t+e},t.easeInOut=function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e},t.easeOut=function(t,e,r,n){return r*((t=t/n-1)*t*t+1)+e},t}();r.Cubic=n},{}],9:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var a;return 0==t?e:1==(t/=n)?e+r:(!i||i<Math.abs(r)?(a=o/4,i=r):a=o/(2*Math.PI)*Math.asin(r/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o))+e)},t.easeInOut=function(t,e,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var a;return 0==t?e:2==(t/=n/2)?e+r:(!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),1>t?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*(2*Math.PI)/o)*.5+r+e)},t.easeOut=function(t,e,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var a;return 0==t?e:1==(t/=n)?e+r:(!i||i<Math.abs(r)?(i=r,a=o/4):a=o/(2*Math.PI)*Math.asin(r/i),i*Math.pow(2,-10*t)*Math.sin((t*n-a)*(2*Math.PI)/o)+r+e)},t}();r.Elastic=n},{}],10:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return 0==t?e:r*Math.pow(2,10*(t/n-1))+e},t.easeInOut=function(t,e,r,n){return 0==t?e:t==n?e+r:(t/=n/2)<1?r/2*Math.pow(2,10*(t-1))+e:r/2*(-Math.pow(2,-10*--t)+2)+e},t.easeOut=function(t,e,r,n){return t==n?e+r:r*(-Math.pow(2,-10*t/n)+1)+e},t}();r.Exponential=n},{}],11:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return r*t/n+e},t.easeInOut=function(t,e,r,n){return r*t/n+e},t.easeNone=function(t,e,r,n){return n>t?e:e+r},t.easeOut=function(t,e,r,n){return r*t/n+e},t}();r.None=n},{}],12:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return r*(t/=n)*t+e},t.easeInOut=function(t,e,r,n){return(t/=n/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},t.easeOut=function(t,e,r,n){return-r*(t/=n)*(t-2)+e},t}();r.Quadratic=n},{}],13:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return r*(t/=n)*t*t*t+e},t.easeInOut=function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e},t.easeOut=function(t,e,r,n){return-r*((t=t/n-1)*t*t*t-1)+e},t}();r.Quartic=n},{}],14:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return r*(t/=n)*t*t*t*t+e},t.easeInOut=function(t,e,r,n){return(t/=n/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},t.easeOut=function(t,e,r,n){return r*((t=t/n-1)*t*t*t*t+1)+e},t}();r.Quintic=n},{}],15:[function(t,e,r){"use strict";var n=t("../../../flash/errors/NotImplementedError"),i=function(){function t(){}return t.easeIn=function(t,e,r,i){throw new n.NotImplementedError},t.easeInOut=function(t,e,r,i){throw new n.NotImplementedError},t.easeOut=function(t,e,r,i){throw new n.NotImplementedError},t}();r.Regular=i},{"../../../flash/errors/NotImplementedError":52}],16:[function(t,e,r){"use strict";var n=function(){function t(){}return t.easeIn=function(t,e,r,n){return-r*Math.cos(t/n*(Math.PI/2))+r+e},t.easeInOut=function(t,e,r,n){return-r/2*(Math.cos(Math.PI*t/n)-1)+e},t.easeOut=function(t,e,r,n){return r*Math.sin(t/n*(Math.PI/2))+e},t}();r.Sine=n},{}],17:[function(t,e,r){"use strict";var n=t("../../../flash/errors/NotImplementedError"),i=function(){function t(){}return t.easeIn=function(t,e,r,i){throw new n.NotImplementedError},t.easeInOut=function(t,e,r,i){throw new n.NotImplementedError},t.easeOut=function(t,e,r,i){throw new n.NotImplementedError},t}();r.Strong=i},{"../../../flash/errors/NotImplementedError":52}],18:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./Back")),n(t("./Bounce")),n(t("./Circular")),n(t("./Cubic")),n(t("./Elastic")),n(t("./Exponential")),n(t("./None")),n(t("./Quadratic")),n(t("./Quartic")),n(t("./Quintic")),n(t("./Regular")),n(t("./Sine")),n(t("./Strong"))},{"./Back":5,"./Bounce":6,"./Circular":7,"./Cubic":8,"./Elastic":9,"./Exponential":10,"./None":11,"./Quadratic":12,"./Quartic":13,"./Quintic":14,"./Regular":15,"./Sine":16,"./Strong":17}],19:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}var i=t("./easing/index");r.easing=i,n(t("./Tween")),n(t("./TweenEvent"))},{"./Tween":3,"./TweenEvent":4,"./easing/index":18}],20:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./DisplayObject"),o=t("./PixelSnapping"),a=t("../../webgl/ShaderID"),s=t("../../webgl/RenderHelper"),u=function(t){function e(e,r,n,i,a){void 0===n&&(n=null),void 0===i&&(i=o.PixelSnapping.AUTO),void 0===a&&(a=!1),t.call(this,e,r),this._bitmapData=null,this._renderTarget=null,this._pixelSnapping=null,this._smoothing=!1,this.bitmapData=n,this.pixelSnapping=i,this.smoothing=a}return n(e,t),Object.defineProperty(e.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(t){this.__disposeRenderTarget(),this._bitmapData=t,this._renderTarget=this.root.worldRenderer.createRenderTarget(t.canvas)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelSnapping",{get:function(){return this._pixelSnapping},set:function(t){this._pixelSnapping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this._smoothing},set:function(t){this._smoothing=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.__disposeRenderTarget(),t.prototype.dispose.call(this)},e.prototype._$update=function(t){},e.prototype._$render=function(t){this.bitmapData&&s.RenderHelper.renderImage(t,this._renderTarget,t.currentRenderTarget,!1)},e.prototype._$selectShader=function(t){t.selectShader(a.ShaderID.COPY_IMAGE)},e.prototype.__disposeRenderTarget=function(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)},e}(i.DisplayObject);r.Bitmap=u},{"../../webgl/RenderHelper":108,"../../webgl/ShaderID":111,"./DisplayObject":27,"./PixelSnapping":37}],21:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){function a(t,e){return t+e*f}function s(t,e){return c[a(t,e)]}function u(t,e,r){c[a(t,e)]=r}var l=e(0,0,t.width,t.height),h=l.data.buffer,c=new Uint32Array(h),f=t.width,p=[{x:n,y:i}],d=new Array(c.length),_=s(n,i);for(d[a(n,i)]=!0;p.length>0;){var g=p.shift();u(g.x,g.y,o);var b;g.y>0&&(b=a(g.x,g.y-1),d[b]||s(g.x,g.y-1)!==_||(d[b]=!0,p.push({x:g.x,y:g.y-1}))),g.x>0&&(b=a(g.x-1,g.y),d[b]||s(g.x-1,g.y)!==_||(d[b]=!0,p.push({x:g.x-1,y:g.y}))),g.y<this.height-1&&(b=a(g.x,g.y+1),d[b]||s(g.x,g.y+1)!==_||(d[b]=!0,p.push({x:g.x,y:g.y+1}))),g.x<this.width-1&&(b=a(g.x+1,g.y),d[b]||s(g.x+1,g.y)!==_||(d[b]=!0,p.push({x:g.x+1,y:g.y})))}r(l,0,0)}var i=t("../geom/Rectangle"),o=t("../geom/Point"),a=t("../errors/NotImplementedError"),s=t("../utils/ByteArray"),u=t("../../glantern/GLUtil"),l=t("../../glantern/MathUtil"),h=t("../errors/ArgumentError"),c=t("./StageQuality"),f=t("./DisplayObject"),p=t("../../webgl/WebGLRenderer"),d=t("./BlendMode"),_=t("../errors/EOFError"),g=function(){function t(t,e,r,n){void 0===r&&(r=!0),void 0===n&&(n=4294967295),this._canvas=null,this._context=null,this._supportsTransparent=!0,this._isLocked=!1,this._cachedImageData=null,this._cachedRenderer=null,this._isDataChangedDuringLockDown=!1;var i=window.document.createElement("canvas");i.width=t,i.height=e;var o=i.getContext("2d");o.fillStyle=u.GLUtil.colorToCssSharp(n),o.fillRect(0,0,t,e),this._canvas=i,this._context=o,this._supportsTransparent=r}return t.prototype.applyFilter=function(t,e,r,n){throw new a.NotImplementedError},t.prototype.clone=function(){var e=new t(this.width,this.height,this._supportsTransparent);return e._context.putImageData(this.__getArea(0,0,this.width,this.height),0,0),e},t.prototype.colorTransform=function(t,e){var r=t.clone();r.width=l.MathUtil.clampUpper(r.width,this.width-r.x),r.height=l.MathUtil.clampUpper(r.height,this.height-r.y);for(var n=this.__getArea(r.x,r.y,r.width,r.height),i=new Uint32Array(n.data.buffer),o=0;o<i.length;++o)i[o]=e.transform(i[o]);this.__setArea(n,r.x,r.y)},t.prototype.compare=function(e){function r(){s||(s=new ImageData(this.width,this.height),l=new Uint32Array(s.data))}if(this.width!==e.width)return-3;if(this.height!==e.height)return-4;for(var n=this.__getArea(0,0,this.width,this.height),i=e.__getArea(0,0,e.width,e.height),o=new Uint32Array(n.data.buffer),a=new Uint32Array(i.data.buffer),s=null,l=null,h=0;h<o.length;++h){var c=u.GLUtil.decomposeRgba(o[h]),f=u.GLUtil.decomposeRgba(a[h]),p={r:Math.abs(c.r-f.r),g:Math.abs(c.g-f.g),b:Math.abs(c.b-f.b),a:Math.abs(c.a-f.a)};p.r||p.g||p.b?(r(),l[h]=u.GLUtil.rgb(p.r,p.g,p.b)):p.a&&(r(),l[h]=p.a<<24|16777215)}return null!==s?t.fromImageData(s):0},t.prototype.copyChannel=function(t,e,r,n,i){var o=e.clone();o.width=l.MathUtil.clampUpper(o.width,t.width-o.x),o.height=l.MathUtil.clampUpper(o.height,t.height-o.y),o.width=l.MathUtil.clampUpper(o.width,this.width-r.x),o.height=l.MathUtil.clampUpper(o.height,this.height-r.y);for(var a=this.__getArea(r.x,r.y,o.width,o.height),s=t.__getArea(o.x,o.y,o.width,o.height),u=a.data,h=s.data,c=Math.round(Math.LOG2E*Math.log(n)),f=Math.round(Math.LOG2E*Math.log(i)),p=0;p<u.length;p+=4)u[p+f]=h[p+c];this.__setArea(a,r.x,r.y)},t.prototype.copyPixels=function(t,e,r,n,i,a){void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=!1);var s=e.clone();s.width=l.MathUtil.clampUpper(s.width,t.width-s.x),s.height=l.MathUtil.clampUpper(s.height,t.height-s.y),s.width=l.MathUtil.clampUpper(s.width,this.width-r.x),s.height=l.MathUtil.clampUpper(s.height,this.height-r.y),n&&(i||(i=new o.Point),s.width=l.MathUtil.clampUpper(s.width,n.width-i.x),s.height=l.MathUtil.clampUpper(s.height,n.height-i.y));var u=new ImageData(s.width,s.height),h=t.__getArea(s.x,s.y,s.width,s.height),c=new Uint32Array(u.data.buffer),f=new Uint32Array(h.data.buffer),p=null,d=null;n&&(p=n.__getArea(i.x,i.y,s.width,s.height),d=new Uint32Array(p.data.buffer));for(var _=0;_<c.length;++_){var g=f[_];if(n&&a){var b=d[_]>>>24,m=(4278190080&g)>>>24;m*=b/255|0,g=16777215&g|m<<24}c[_]=g}this.__setArea(u,r.x,r.y)},t.prototype.copyPixelsToByteArray=function(t,e){var r=t.width*t.height*4;e.bytesAvailable<r&&(e.length=e.position+r);for(var n=this.__getArea(t.x,t.y,t.width,t.height),i=new Uint32Array(n.data.buffer),o=0;o<i.length;++o)e.writeUnsignedInt(i[o])},t.prototype.dispose=function(){this._canvas=null,this._context=null,null!==this._cachedRenderer&&(this._cachedRenderer.dispose(),this._cachedRenderer=null)},t.prototype.draw=function(t,e,r,n,i,o){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1),this.drawWithQuality(t,e,r,n,i,o,c.StageQuality.MEDIUM)},t.prototype.drawWithQuality=function(t,e,r,n,i,o,s){if(void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===s&&(s=null),!(t instanceof f.DisplayObject))throw new a.NotImplementedError;var u=t;this.__buildRenderer();var l=this._cachedRenderer;l.setBlendMode(n||d.BlendMode.NORMAL),u.render(l)},t.prototype.encode=function(t,e,r){throw void 0===r&&(r=null),new a.NotImplementedError},t.prototype.fillRect=function(t,e){var r=this._context;r.fillStyle=u.GLUtil.colorToCssSharp(e),r.fillRect(t.x,t.y,t.width,t.height)},t.prototype.floodFill=function(t,e,r){this.isLocked||n(this,this.__getArea,this.__setArea,t,e,r)},t.prototype.generateFilterRect=function(t,e){throw new a.NotImplementedError},t.prototype.getColorBoundsRect=function(t,e,r){throw void 0===r&&(r=!0),new a.NotImplementedError},t.prototype.getPixel=function(t,e){var r=this.__getArea(t,e,1,1),n=r.data;return u.GLUtil.rgb(n[0],n[1],n[2])},t.prototype.getPixel32=function(t,e){var r=this.__getArea(t,e,1,1),n=r.data;return u.GLUtil.rgba(n[0],n[1],n[2],n[3])},t.prototype.getPixels=function(t){var e=this.__getArea(t.x,t.y,t.width,t.height),r=e.data;return s.ByteArray.from(r.buffer)},t.prototype.getVector=function(t){for(var e=this.__getArea(t.x,t.y,t.width,t.height),r=e.data,n=new Uint32Array(r.buffer),i=new Array(n.length),o=0;o<i.length;++o)i[o]=n[o];return i},Object.defineProperty(t.prototype,"height",{get:function(){return this._canvas.height},enumerable:!0,configurable:!0}),t.prototype.histogram=function(t){throw void 0===t&&(t=null),new a.NotImplementedError},t.prototype.hitTest=function(t,e,r,n,i){throw void 0===n&&(n=null),void 0===i&&(i=1),new a.NotImplementedError},t.prototype.lock=function(){this._isLocked=!0,this._cachedImageData=this._context.getImageData(0,0,this.width,this.height)},t.prototype.merge=function(t,e,r,n,i,o,s){throw new a.NotImplementedError},t.prototype.noise=function(t,e,r,n,i){throw void 0===e&&(e=0),void 0===r&&(r=255),void 0===n&&(n=7),void 0===i&&(i=!1),new a.NotImplementedError},t.prototype.paletteMap=function(t,e,r,n,i,o,s){throw void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new a.NotImplementedError},t.prototype.perlinNoise=function(t,e,r,n,i,o,s,u,l){throw void 0===s&&(s=7),void 0===u&&(u=!1),void 0===l&&(l=null),new a.NotImplementedError},t.prototype.pixelDissolve=function(t,e,r,n,i,o){throw void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),new a.NotImplementedError},Object.defineProperty(t.prototype,"rect",{get:function(){return new i.Rectangle(0,0,this.width,this.height)},enumerable:!0,configurable:!0}),t.prototype.scroll=function(t,e){throw new a.NotImplementedError},t.prototype.setPixel=function(t,e,r){this.setPixel32(t,e,4278190080|r)},t.prototype.setPixel32=function(t,e,r){r&=4294967295;var n=new ImageData(1,1),i=u.GLUtil.decomposeRgba(r),o=n.data;o[0]=i.r,o[1]=i.g,o[2]=i.b,o[3]=i.a,this.__setArea(n,t,e)},t.prototype.setPixels=function(t,e){var r=t.clone();r.width=l.MathUtil.clampUpper(r.width,this.width-r.x),r.height=l.MathUtil.clampUpper(r.height,this.height-r.y);for(var n=e.position,i=t.width*t.height*4,o=e.bytesAvailable/4|0,a=this.__getArea(t.x,t.y,t.width,t.height),s=new Uint32Array(a.data.buffer),u=0;i>u;++u){if(u>=o)throw this._context.putImageData(a,t.x,t.y),new _.EOFError("The input ByteArray is not large enough.");s[u]=e.readUnsignedInt()}e.position=n,this.__setArea(a,t.x,t.y)},t.prototype.setVector=function(t,e){var r=t.clone();r.width=l.MathUtil.clampUpper(r.width,this.width-r.x),r.height=l.MathUtil.clampUpper(r.height,this.height-r.y);var n=t.width*t.height;if(e.length!==n)throw new h.ArgumentError("Invalid vector is used when trying to set pixels.");for(var i=new ImageData(r.width,r.height),o=i.data,a=new Uint32Array(o.buffer),s=0;s<o.length;++s)a[s]=0|e[s];this.__setArea(i,t.x,t.y)},t.prototype.threshold=function(t,e,r,n,i,o,s,u){throw void 0===o&&(o=0),void 0===s&&(s=4294967295),void 0===u&&(u=!1),new a.NotImplementedError},Object.defineProperty(t.prototype,"transparent",{get:function(){return this._supportsTransparent},enumerable:!0,configurable:!0}),t.prototype.unlock=function(){this._isDataChangedDuringLockDown&&this._context.putImageData(this._cachedImageData,0,0),this._isLocked=!1,this._cachedImageData=null,this._isDataChangedDuringLockDown=!1},Object.defineProperty(t.prototype,"width",{get:function(){return this._canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isLocked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),t.fromImageData=function(e){var r=new t(e.width,e.height,!0,0);return r._context.putImageData(e,0,0),r},t.prototype.__getArea=function(t,e,r,n){if(this.isLocked){var i=this._cachedImageData,o=new Uint32Array(i.data.buffer),a=new ImageData(r,n),s=new Uint32Array(a.data.buffer);if(0===t&&0===e&&r===this.width&&n===this.height)for(var u=0;u<o.length;++u)s[u]=o[u];else{r=l.MathUtil.clampUpper(r,this.width-t),n=l.MathUtil.clampUpper(n,this.height-e);for(var h=this.width,c=0,u=0;u<o.length;++u){var f=u/h|0,p=u-f*h;p>=t&&t+r>=p&&f>=e&&e+n>=f&&(s[c++]=o[u])}}return a}return this._context.getImageData(t,e,r,n)},t.prototype.__setArea=function(t,e,r){if(this.isLocked){var n=this._cachedImageData,i=new Uint32Array(n.data.buffer),o=new Uint32Array(t.data.buffer);if(0===e&&0===r&&t.width===this.width&&t.height===this.height)for(var a=0;a<i.length;++a)i[a]=o[a];else for(var s=l.MathUtil.clampUpper(t.width,this.width-e),u=l.MathUtil.clampUpper(t.height,this.height-r),h=this.width,c=0,a=0;a<i.length;++a){var f=a/h|0,p=a-f*h;p>=e&&e+s>=p&&f>=r&&r+u>=f&&(i[a]=o[c++])}this._isDataChangedDuringLockDown=!0}else this._context.putImageData(t,e,r)},t.prototype.__buildRenderer=function(){null===this._cachedRenderer&&(this._cachedRenderer=new p.WebGLRenderer(this._canvas,p.WebGLRenderer.DEFAULT_OPTIONS))},t}();r.BitmapData=g},{"../../glantern/GLUtil":95,"../../glantern/MathUtil":96,"../../webgl/WebGLRenderer":116,"../errors/ArgumentError":49,"../errors/EOFError":50,"../errors/NotImplementedError":52,"../geom/Point":67,"../geom/Rectangle":68,"../utils/ByteArray":86,"./BlendMode":23,"./DisplayObject":27,"./StageQuality":44}],22:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"ALPHA",{get:function(){return 8},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BLUE",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GREEN",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RED",{get:function(){return 1},enumerable:!0,configurable:!0}),t}();r.BitmapDataChannel=n},{}],23:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"ADD",{get:function(){return"add"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ALPHA",{get:function(){return"alpha"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DARKEN",{get:function(){return"darken"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DIFFERENCE",{get:function(){return"difference"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ERASE",{get:function(){return"erase"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HARDLIGHT",{get:function(){return"hardlight"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"INVERT",{get:function(){return"invert"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LAYER",{get:function(){return"layer"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LIGHTEN",{get:function(){return"lighten"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MULTIPLY",{get:function(){return"multiply"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OVERLAY",{get:function(){return"overlay"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SCREEN",{get:function(){return"screen"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SHADER",{get:function(){return"shader"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SUBTRACT",{get:function(){return"subtract"},enumerable:!0,configurable:!0}),t}();r.BlendMode=n},{}],24:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ROUND",{get:function(){return"round"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SQUARE",{get:function(){return"square"},enumerable:!0,configurable:!0}),t}();r.CapsStyle=n},{}],25:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"DEFAULT",{get:function(){return"default"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OFF",{get:function(){return"off"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ON",{get:function(){return"on"},enumerable:!0,configurable:!0}),t}();r.ColorCorrection=n},{}],26:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"DEFAULT_OFF",{get:function(){return"defaultOff"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DEFAULT_ON",{get:function(){return"defaultOn"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"UNSUPPORTED",{get:function(){return"unsupported"},enumerable:!0,configurable:!0}),t}();r.ColorCorrectionSupport=n},{}],27:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../geom/Transform"),o=t("../events/EventDispatcher"),a=t("./BlendMode"),s=t("../geom/Matrix3D"),u=t("../geom/Vector3D"),l=t("../errors/NotImplementedError"),h=t("../../glantern/GLUtil"),c=t("../../glantern/MathUtil"),f=function(t){function e(e,r){t.call(this),this.blendMode=a.BlendMode.NORMAL,this.enabled=!0,this.mask=null,this.visible=!0,this._parent=null,this._root=null,this._name="",this._rotation=0,this._rotationX=0,this._rotationY=0,this._rotationZ=0,this._scaleX=1,this._scaleY=1,this._scaleZ=1,this._stage=null,this._height=0,this._width=0,this._x=0,this._y=0,this._z=0,this._childIndex=-1,this._alpha=1,this._filters=null,this._filterTarget=null,this._transform=null,this._isTransformDirty=!0,this._isRoot=!1,this._root=e,this._stage=e,this._parent=r,this._filters=[],this._transform=new i.Transform,this._isRoot=null===e}return n(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=c.MathUtil.clamp(t,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cacheAsBitmap",{get:function(){throw new l.NotImplementedError},set:function(t){throw new l.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.filters=[]},Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters.slice()},set:function(t){var e,r=this.__shouldProcessFilters();if(r)for(e=0;e<this._filters.length;++e)this._filters[e].notifyRemoved();this._filters=t;var n=this.__shouldProcessFilters();if(n)for(e=0;e<this._filters.length;++e)this._filters[e].notifyAdded();n!==r&&(n?this._$createFilterTarget(this._root.worldRenderer):this._$releaseFilterTarget())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){throw new l.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){throw new l.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){for(;-180>t;)t+=360;for(;t>180;)t-=360;this._rotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){for(;-180>t;)t+=360;for(;t>180;)t-=360;this._rotationX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){for(;-180>t;)t+=360;for(;t>180;)t-=360;this._rotationY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(t){for(;-180>t;)t+=360;for(;t>180;)t-=360;this._rotationZ=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){var e=this._x!==t;this._x=t,e&&this.requestUpdateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){var e=this._y!==t;this._y=t,e&&this.requestUpdateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){var e=this._z!==t;this._z=t,e&&this.requestUpdateTransform()},enumerable:!0,configurable:!0}),e.prototype.getBounds=function(t){throw new l.NotImplementedError},e.prototype.getRect=function(t){throw new l.NotImplementedError},e.prototype.update=function(t){this._isTransformDirty&&this._$updateTransform(),this.enabled&&this._$update(t)},e.prototype.render=function(t){this.visible&&this.alpha>0&&(this._$preprocess(t),this._$render(t),this._$postprocess(t))},e.prototype.requestUpdateTransform=function(){this._isTransformDirty=!0},e.prototype._$updateTransform=function(){var t;t=this._isRoot?new s.Matrix3D:this.parent.transform.matrix3D.clone(),t.prependTranslation(this.x,this.y,this.z),t.prependRotation(this.rotationX,u.Vector3D.X_AXIS),t.prependRotation(this.rotationY,u.Vector3D.Y_AXIS),t.prependRotation(this.rotationZ,u.Vector3D.Z_AXIS),this.transform.matrix3D.copyFrom(t)},e.prototype._$preprocess=function(t){var e=this;this.__shouldProcessFilters()?(this._filterTarget.clear(),t.setRenderTarget(this._filterTarget)):t.setRenderTarget(null);var r=t.shaderManager;this._$selectShader(r);var n=r.currentShader;h.GLUtil.isUndefinedOrNull(n)||(n.changeValue("uTransformMatrix",function(t){t.value=e.transform.matrix3D.toArray()}),n.changeValue("uAlpha",function(t){t.value=e.alpha})),t.setBlendMode(this.blendMode)},e.prototype._$postprocess=function(t){if(this.__shouldProcessFilters()){var e=t.filterManager;e.pushFilterGroup(this.filters),e.processFilters(t,this._filterTarget,t.screenTarget,!1),e.popFilterGroup()}},e.prototype._$createFilterTarget=function(t){null===this._filterTarget&&(this._filterTarget=t.createRenderTarget())},e.prototype._$releaseFilterTarget=function(){null!==this._filterTarget&&(this._root.worldRenderer.releaseRenderTarget(this._filterTarget),this._filterTarget=null)},e.prototype.__shouldProcessFilters=function(){return null!==this.filters&&this.filters.length>0},e}(o.EventDispatcher);r.DisplayObject=f},{"../../glantern/GLUtil":95,"../../glantern/MathUtil":96,"../errors/NotImplementedError":52,"../events/EventDispatcher":54,"../geom/Matrix3D":64,"../geom/Transform":69,"../geom/Vector3D":70,"./BlendMode":23}],28:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./InteractiveObject"),o=t("../errors/NotImplementedError"),a=function(t){function e(e,r){t.call(this,e,r),this.mouseChildren=!0,this.tabChildren=!0,this._children=null,this._children=[]}return n(e,t),Object.defineProperty(e.prototype,"numChildren",{
get:function(){return this._children.length},enumerable:!0,configurable:!0}),e.prototype.addChild=function(t){return this._children.indexOf(t)<0&&this._children.push(t),t.childIndex=this._children.length-1,t},e.prototype.addChildAt=function(t,e){return this._children.indexOf(t)<0&&(0===e?this._children.unshift(t):e===this._children.length-1?this._children.push(t):this._children=this._children.slice(0,e-1).concat(t).concat(this._children.slice(e,this._children.length-1))),t.childIndex=e,t},e.prototype.areInaccessibleObjectsUnderPoint=function(t){throw new o.NotImplementedError},e.prototype.contains=function(t){for(var r=!1,n=0;n<this._children.length;++n){if(this._children[n]===t)return!0;if(this._children[n]instanceof e&&(r=this._children[n].contains(t)))return!0}return!1},e.prototype.getChildAt=function(t){return 0>t||t>this._children.length-1?null:this._children[t]},e.prototype.getChildByName=function(t){if(0===this._children.length)return null;for(var r=null,n=0;n<this._children.length;++n){if(this._children[n].name===t)return this._children[n];if(this._children[n]instanceof e&&(r=this._children[n].getChildByName(t),null!==r))return r}return null},e.prototype.getChildIndex=function(t){return this._children.indexOf(t)},e.prototype.getObjectsUnderPoint=function(t){throw new o.NotImplementedError},e.prototype.removeChild=function(t){var e=this._children.indexOf(t);return e>=0?this.removeChildAt(e):null},e.prototype.removeChildAt=function(t){if(0>t||t>=this.numChildren)return null;for(var e=this._children[t],r=t+1;r<this._children.length;r++)this._children[r].childIndex++;return this._children.splice(t,1),e},e.prototype.setChildIndex=function(t,e){throw new o.NotImplementedError},e.prototype.swapChildren=function(t,e){throw new o.NotImplementedError},e.prototype.swapChildrenAt=function(t,e){throw new o.NotImplementedError},Object.defineProperty(e.prototype,"width",{get:function(){throw new o.NotImplementedError},set:function(t){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){throw new o.NotImplementedError},set:function(t){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),e.prototype.dispatchEvent=function(e,r){for(var n=t.prototype.dispatchEvent.call(this,e,r),i=0;i<this._children.length;i++)this._children[i].dispatchEvent(e,r);return n},e.prototype.update=function(e){if(t.prototype.update.call(this,e),this.enabled)for(var r=0;r<this._children.length;++r)this._children[r].update(e)},e.prototype.render=function(t){if(this.visible&&this.alpha>0){this._$preprocess(t),this._$render(t);for(var e=0;e<this._children.length;++e){var r=this._children[e];r.render(t)}this._$postprocess(t)}},e.prototype.requestUpdateTransform=function(){if(this._isTransformDirty=!0,null!==this._children&&this._children.length>0)for(var t=0;t<this._children.length;++t)this._children[t].requestUpdateTransform()},e.prototype._$selectShader=function(t){},e}(i.InteractiveObject);r.DisplayObjectContainer=a},{"../errors/NotImplementedError":52,"./InteractiveObject":33}],29:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"LINEAR",{get:function(){return"linear"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RADIAL",{get:function(){return"radial"},enumerable:!0,configurable:!0}),t}();r.GradientType=n},{}],30:[function(t,e,r){"use strict";function n(t,e){if(null===t||null===e||e.length%2!==0)return!1;for(var r=t.length,n=e.length,i=0;r>i;i++)switch(t[i]){case s.GraphicsPathCommand.CUBIC_CURVE_TO:if(n-=6,0>n)return!1;break;case s.GraphicsPathCommand.CURVE_TO:if(n-=4,0>n)return!1;break;case s.GraphicsPathCommand.LINE_TO:if(n-=2,0>n)return!1;break;case s.GraphicsPathCommand.MOVE_TO:if(n-=2,0>n)return!1;break;case s.GraphicsPathCommand.NO_OP:break;case s.GraphicsPathCommand.WIDE_LINE_TO:if(n-=4,0>n)return!1;break;case s.GraphicsPathCommand.WIDE_MOVE_TO:if(n-=4,0>n)return!1;break;default:return!1}return!0}var i=t("./SpreadMethod"),o=t("./InterpolationMethod"),a=t("./GraphicsPathWinding"),s=t("./GraphicsPathCommand"),u=t("./TriangleCulling"),l=t("./LineScaleMode"),h=t("../../webgl/graphics/BrushType"),c=t("../../webgl/graphics/SolidStrokeRenderer"),f=t("../../webgl/graphics/SolidFillRenderer"),p=t("../errors/NotImplementedError"),d=t("../../glantern/GLUtil"),_=t("../../glantern/MathUtil"),g=function(){function t(t,e){this._displayObject=null,this._isFilling=!1,this._renderer=null,this._bufferTarget=null,this._isDirty=!0,this._shouldUpdateRenderTarget=!1,this._lineType=h.BrushType.SOLID,this._lineWidth=1,this._lineAlpha=1,this._lineColor=0,this._currentX=0,this._currentY=0,this._lastPathStartX=0,this._lastPathStartY=0,this._currentStrokeRenderer=null,this._currentFillRenderer=null,this._strokeRenderers=null,this._fillRenderers=null,this._displayObject=t,this._renderer=e,this._isDirty=!0,this._strokeRenderers=[],this._fillRenderers=[],this._bufferTarget=e.createRenderTarget(),this.__updateCurrentPoint(0,0),this.__resetStyles(),this.clear()}return t.prototype.beginBitmapFill=function(t,e,r,n){throw void 0===e&&(e=null),void 0===r&&(r=!1),void 0===n&&(n=!1),new p.NotImplementedError},t.prototype.beginFill=function(t,e){void 0===e&&(e=1),this._isFilling&&this.endFill(),this._isFilling||(this._isFilling=!0,this._currentStrokeRenderer=this.__createStrokeRendererWithCurrentSettings(),this._strokeRenderers.push(this._currentStrokeRenderer),this._currentFillRenderer=new f.SolidFillRenderer(this,this._currentX,this._currentY,t,e),this._currentFillRenderer.beginIndex=this._strokeRenderers.length-1)},t.prototype.beginGradientFill=function(t,e,r,n,a,s,u,l){throw void 0===a&&(a=null),void 0===s&&(s=i.SpreadMethod.PAD),void 0===u&&(u=o.InterpolationMethod.RGB),void 0===l&&(l=0),new p.NotImplementedError},t.prototype.beginShaderFill=function(t,e){throw void 0===e&&(e=null),new p.NotImplementedError},t.prototype.clear=function(){var t;if(null!==this._strokeRenderers)for(t=0;t<this._strokeRenderers.length;++t)this._strokeRenderers[t].dispose(),this._isDirty=!0;if(null!==this._fillRenderers)for(t=0;t<this._fillRenderers.length;++t)this._fillRenderers[t].dispose(),this._isDirty=!0;for(null!==this._currentFillRenderer&&(this._currentFillRenderer.dispose(),this._isDirty=!0);this._strokeRenderers.length>0;)this._strokeRenderers.pop(),this._isDirty=!0;for(;this._fillRenderers.length>0;)this._fillRenderers.pop(),this._isDirty=!0;this._currentFillRenderer=null,this._currentStrokeRenderer=this.__createStrokeRendererWithCurrentSettings(),this._strokeRenderers.push(this._currentStrokeRenderer),this._isFilling=!1},t.prototype.copyFrom=function(t){throw new p.NotImplementedError},t.prototype.curveTo=function(t,e,r,n){this._isFilling&&this._currentFillRenderer.curveTo(t,e,r,n),this._currentStrokeRenderer.curveTo(t,e,r,n),this.__updateCurrentPoint(r,n),this._isDirty=!0},t.prototype.drawCircle=function(t,e,r){this._isFilling&&this._currentFillRenderer.drawCircle(t,e,r),this._currentStrokeRenderer.drawCircle(t,e,r),this.__updateCurrentPoint(t,e),this.__updateLastPathStartPoint(t+r,e),this._isDirty=!0},t.prototype.drawEllipse=function(t,e,r,n){this._isFilling&&this._currentFillRenderer.drawEllipse(t,e,r,n),this._currentStrokeRenderer.drawEllipse(t,e,r,n),this.__updateCurrentPoint(t+r,e+n/2),this.__updateLastPathStartPoint(t+r,e+n/2),this._isDirty=!0},t.prototype.drawGraphicsData=function(t){throw new p.NotImplementedError},t.prototype.drawPath=function(t,e,r,i){if(void 0===r&&(r=a.GraphicsPathWinding.EVEN_ODD),void 0===i&&(i=!0),!i||n(t,e)){for(var o,u,l=t.length,h=0,c=this._isFilling,f=this._currentStrokeRenderer,p=this._currentFillRenderer,d=0;l>d;++d)switch(t[d]){case s.GraphicsPathCommand.CUBIC_CURVE_TO:c&&p.bezierCurveTo(e[h],e[h+1],e[h+2],e[h+3],e[h+4],e[h+5]),f.bezierCurveTo(e[h],e[h+1],e[h+2],e[h+3],e[h+4],e[h+5]),o=e[h+4],u=e[h+5],h+=6;break;case s.GraphicsPathCommand.CURVE_TO:c&&p.curveTo(e[h],e[h+1],e[h+2],e[h+3]),f.curveTo(e[h],e[h+1],e[h+2],e[h+3]),o=e[h+2],u=e[h+3],h+=4;break;case s.GraphicsPathCommand.LINE_TO:c&&p.lineTo(e[h],e[h+1]),f.lineTo(e[h],e[h+1]),o=e[h],u=e[h+1],h+=2;break;case s.GraphicsPathCommand.MOVE_TO:c&&p.moveTo(e[h],e[h+1]),f.moveTo(e[h],e[h+1]),o=e[h],u=e[h+1],h+=2;break;case s.GraphicsPathCommand.NO_OP:break;case s.GraphicsPathCommand.WIDE_LINE_TO:c&&p.lineTo(e[h+2],e[h+3]),f.lineTo(e[h+2],e[h+3]),o=e[h+2],u=e[h+3],h+=4;break;case s.GraphicsPathCommand.WIDE_MOVE_TO:c&&p.moveTo(e[h+2],e[h+3]),f.moveTo(e[h+2],e[h+3]),o=e[h+2],u=e[h+3],h+=4}l>0&&this.__updateCurrentPoint(o,u),this._isDirty=!0}},t.prototype.drawRect=function(t,e,r,n){this._isFilling&&this._currentFillRenderer.drawRect(t,e,r,n),this._currentStrokeRenderer.drawRect(t,e,r,n),this.__updateCurrentPoint(t,e),this.__updateLastPathStartPoint(t,e),this._isDirty=!0},t.prototype.drawRoundRect=function(t,e,r,n,i,o){throw void 0===o&&(o=NaN),_.MathUtil.isNaN(o)&&(o=i),new p.NotImplementedError},t.prototype.drawTriangles=function(t,e,r,n){if(void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=u.TriangleCulling.NONE),null===e){e=[];for(var i=0;i<t.length;i+=2)e.push(i/2)}else e=e.slice(0);if(e.length%3!==0)return void d.GLUtil.trace("Graphics.drawTriangles malformed indices count. Must be multiple of 3.","err");if(n!==u.TriangleCulling.NONE)for(var i=0;i<e.length/3;i++){var o=t[2*e[3*i+1]]-t[2*e[3*i]],a=t[2*e[3*i+1]+1]-t[2*e[3*i]+1],s=t[2*e[3*i+2]]-t[2*e[3*i+1]],l=t[2*e[3*i+2]+1]-t[2*e[3*i+1]+1],h=o*l-s*a;(0>h&&n===u.TriangleCulling.POSITIVE||h>0&&n===u.TriangleCulling.NEGATIVE)&&(e.splice(3*i,3),i--)}for(var c=[],f=[],i=0;i<e.length/3;i++){var p=e[3*i],_=e[3*i+1],g=e[3*i+2],b=t[2*p],m=t[2*p+1],y=t[2*_],v=t[2*_+1],w=t[2*g],x=t[2*g+1];c.push(1,2,2,2),f.push(b,m,y,v,w,x,b,m)}this.drawPath(c,f,void 0,!1)},t.prototype.endFill=function(){this._isFilling&&(this._isFilling=!1,this._currentFillRenderer.endIndex=this._strokeRenderers.length-1,this._currentFillRenderer.closePath(),this._currentStrokeRenderer.closePath(),this._fillRenderers.push(this._currentFillRenderer),this._currentFillRenderer.hasDrawnAnything&&(this._isDirty=!0),this._currentFillRenderer=null)},t.prototype.lineBitmapStyle=function(t,e,r,n){throw void 0===e&&(e=null),void 0===r&&(r=!0),void 0===n&&(n=!1),new p.NotImplementedError},t.prototype.lineGradientStyle=function(t,e,r,n,a,s,u,l){throw void 0===a&&(a=null),void 0===s&&(s=i.SpreadMethod.PAD),void 0===u&&(u=o.InterpolationMethod.RGB),void 0===l&&(l=0),new p.NotImplementedError},t.prototype.lineShaderStyle=function(t,e){throw void 0===e&&(e=null),new p.NotImplementedError},t.prototype.lineStyle=function(t,e,r,n,i,o,a,s){void 0===t&&(t=NaN),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=!1),void 0===i&&(i=l.LineScaleMode.NORMAL),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=3),this._lineType===h.BrushType.SOLID&&this._lineWidth===t&&this._lineColor===e&&this._lineAlpha===r||(this._lineType=h.BrushType.SOLID,_.MathUtil.isNaN(t)||(this._lineWidth=t),this._lineColor=e,this._lineAlpha=r,this._currentStrokeRenderer=new c.SolidStrokeRenderer(this,this._lastPathStartX,this._lastPathStartY,this._currentX,this._currentY,t,e,r),this._strokeRenderers.push(this._currentStrokeRenderer))},t.prototype.lineTo=function(t,e){this._isFilling&&this._currentFillRenderer.lineTo(t,e),this._currentStrokeRenderer.lineTo(t,e),this.__updateCurrentPoint(t,e),this._isDirty=!0},t.prototype.moveTo=function(t,e){this._isFilling&&this._currentFillRenderer.moveTo(t,e),this._currentStrokeRenderer.moveTo(t,e),this.__updateCurrentPoint(t,e),this.__updateLastPathStartPoint(t,e),this._isDirty=!0},t.prototype.update=function(t){if(this._isDirty){for(var e=0,r=this._fillRenderers.length,n=0;n<this._strokeRenderers.length;++n)r>e&&n===this._fillRenderers[e].beginIndex&&(this._fillRenderers[e].update(),e++),this._strokeRenderers[n].update();this._shouldUpdateRenderTarget=!0}this._isDirty=!1},t.prototype.render=function(t,e,r){var n=0,i=this._fillRenderers.length;this._bufferTarget.clear();for(var o=0;o<this._strokeRenderers.length;++o)i>n&&o===this._fillRenderers[n].beginIndex&&(this._fillRenderers[n].render(t),n++),this._strokeRenderers[o].render(t);this._shouldUpdateRenderTarget=!1},t.prototype.dispose=function(){this.clear(),this._strokeRenderers.pop(),this._currentStrokeRenderer.dispose(),this._currentStrokeRenderer=null,this._bufferTarget.dispose(),this._bufferTarget=null},Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFilling",{get:function(){return this._isFilling},enumerable:!0,configurable:!0}),t.prototype.__createStrokeRendererWithCurrentSettings=function(){switch(this._lineType){case h.BrushType.SOLID:return new c.SolidStrokeRenderer(this,this._lastPathStartX,this._lastPathStartY,this._currentX,this._currentY,this._lineWidth,this._lineColor,this._lineAlpha);default:throw new p.NotImplementedError}},t.prototype.__updateCurrentPoint=function(t,e){this._currentX=t,this._currentY=e},t.prototype.__updateLastPathStartPoint=function(t,e){this._lastPathStartX=t,this._lastPathStartY=e},t.prototype.__resetStyles=function(){this._lineType=h.BrushType.SOLID,this._lineWidth=1,this._lineColor=0,this._lineAlpha=1},t}();r.Graphics=g},{"../../glantern/GLUtil":95,"../../glantern/MathUtil":96,"../../webgl/graphics/BrushType":125,"../../webgl/graphics/SolidFillRenderer":129,"../../webgl/graphics/SolidStrokeRenderer":130,"../errors/NotImplementedError":52,"./GraphicsPathCommand":31,"./GraphicsPathWinding":32,"./InterpolationMethod":34,"./LineScaleMode":36,"./SpreadMethod":40,"./TriangleCulling":46}],31:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"CUBIC_CURVE_TO",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CURVE_TO",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LINE_TO",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MOVE_TO",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NO_OP",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WIDE_LINE_TO",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WIDE_MOVE_TO",{get:function(){return 4},enumerable:!0,configurable:!0}),t}();r.GraphicsPathCommand=n},{}],32:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"EVEN_ODD",{get:function(){return"evenOdd"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NON_ZERO",{get:function(){return"nonZero"},enumerable:!0,configurable:!0}),t}();r.GraphicsPathWinding=n},{}],33:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./DisplayObject"),o=function(t){function e(e,r){t.call(this,e,r),this.doubleClickEnabled=!0,this.focusRect=!0,this.mouseEnabled=!0,this.needsSoftKeyboard=!1,this.tabEnabled=!0,this.tabIndex=-1}return n(e,t),e}(i.DisplayObject);r.InteractiveObject=o},{"./DisplayObject":27}],34:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"LINEAR_RGB",{get:function(){return"linearRGB"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RGB",{get:function(){return"rgb"},enumerable:!0,configurable:!0}),t}();r.InterpolationMethod=n},{}],35:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"BEVEL",{get:function(){return"bevel"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MITER",{get:function(){return"miter"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ROUND",{get:function(){return"round"},enumerable:!0,configurable:!0}),t}();r.JointStyle=n},{}],36:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"HORIZONTAL",{get:function(){return"horizontal"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"VERTICAL",{get:function(){return"vertical"},enumerable:!0,configurable:!0}),t}();r.LineScaleMode=n},{}],37:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"ALWAYS",{get:function(){return"always"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"AUTO",{get:function(){return"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NEVER",{get:function(){return"never"},enumerable:!0,configurable:!0}),t}();r.PixelSnapping=n},{}],38:[function(t,e,r){"use strict";var n=function(){function t(){}return t}();r.Shader=n},{}],39:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./DisplayObject"),o=t("./Graphics"),a=t("../../webgl/ShaderID"),s=function(t){function e(e,r){t.call(this,e,r),this._graphics=null,this._graphics=new o.Graphics(this,e.worldRenderer)}return n(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._graphics.dispose(),this._graphics=null},Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics},enumerable:!0,configurable:!0}),e.prototype._$update=function(t){this._graphics.update(t)},e.prototype._$render=function(t){this.graphics.render(t,t.currentRenderTarget,!1)},e.prototype._$selectShader=function(t){t.selectShader(a.ShaderID.PRIMITIVE2)},e}(i.DisplayObject);r.Shape=s},{"../../webgl/ShaderID":111,"./DisplayObject":27,"./Graphics":30}],40:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"PAD",{get:function(){return"pad"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"REFLECT",{get:function(){return"reflect"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"REPEAT",{get:function(){return"repeat"},enumerable:!0,configurable:!0}),t}();r.SpreadMethod=n},{}],41:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./ColorCorrectionSupport"),o=t("./StageScaleMode"),a=t("./StageQuality"),s=t("./StageDisplayState"),u=t("./ColorCorrection"),l=t("./StageAlign"),h=t("./DisplayObjectContainer"),c=t("../errors/NotImplementedError"),f=function(t){function e(e){t.call(this,null,null),this.align=l.StageAlign.TOP_LEFT,this.color=0,this.colorCorrection=u.ColorCorrection.DEFAULT,this.displayState=s.StageDisplayState.NORMAL,this.focus=null,this.frameRate=60,this.fullScreenSourceRect=null,this.mouseChildren=!0,this.quality=a.StageQuality.HIGH,this.scaleMode=o.StageScaleMode.NO_SCALE,this.showDefaultContextMenu=!0,this.tabChildren=!0,this._allowFullScreen=!0,this._allowFullScreenInteractive=!0,this._colorCorrectionSupport=i.ColorCorrectionSupport.DEFAULT_OFF,this._worldRenderer=null,this._root=this,this._worldRenderer=e,this.resize(e.view.width,e.view.height)}return n(e,t),Object.defineProperty(e.prototype,"allowFullScreen",{get:function(){return this._allowFullScreen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowFullScreenInteractive",{get:function(){return this._allowFullScreenInteractive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorCorrectionSupport",{get:function(){return this._colorCorrectionSupport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullScreenHeight",{get:function(){return screen.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullScreenWidth",{get:function(){return screen.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"softKeyboardRect",{get:function(){throw new c.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return this.worldRenderer.view.height},set:function(t){throw new c.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stageWidth",{get:function(){return this.worldRenderer.view.width},set:function(t){throw new c.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.worldRenderer.view.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.worldRenderer.view.height},enumerable:!0,configurable:!0}),e.prototype.invalidate=function(){throw new c.NotImplementedError},e.prototype.isFocusInaccessible=function(){throw new c.NotImplementedError},Object.defineProperty(e.prototype,"worldRenderer",{get:function(){return this._worldRenderer},enumerable:!0,configurable:!0}),e.prototype.resize=function(t,e){this._width=t,this._height=e},e.prototype._$update=function(t){},e.prototype._$render=function(t){t.currentRenderTarget.clear()},e}(h.DisplayObjectContainer);r.Stage=f},{"../errors/NotImplementedError":52,"./ColorCorrection":25,"./ColorCorrectionSupport":26,"./DisplayObjectContainer":28,"./StageAlign":42,"./StageDisplayState":43,"./StageQuality":44,"./StageScaleMode":45}],42:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"BOTTOM",{get:function(){return"B"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BOTTOM_LEFT",{get:function(){return"BL"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BOTTOM_RIGHT",{get:function(){return"BR"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LEFT",{get:function(){return"L"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RIGHT",{get:function(){return"R"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TOP",{get:function(){return"T"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TOP_LEFT",{get:function(){return"TL"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TOP_RIGHT",{get:function(){return"TR"},enumerable:!0,configurable:!0}),t}();r.StageAlign=n},{}],43:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"FULL_SCREEN",{get:function(){return"fullScreen"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FULL_SCREEN_INTERACTIVE",{get:function(){return"fullScreenInteractive"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),t}();r.StageDisplayState=n},{}],44:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"BEST",{get:function(){return"best"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"HIGH",{get:function(){return"high"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LOW",{get:function(){return"low"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MEDIUM",{get:function(){return"medium"},enumerable:!0,configurable:!0}),t}();r.StageQuality=n},{}],45:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"EXACT_FIT",{get:function(){return"exactFit"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NO_BORDER",{get:function(){return"noBorder"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NO_SCALE",{get:function(){return"noScale"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SHOW_ALL",{get:function(){return"showAll"},enumerable:!0,configurable:!0}),t}();r.StageScaleMode=n},{}],46:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"NEGATIVE",{get:function(){return"negative"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"POSITIVE",{get:function(){return"positive"},enumerable:!0,configurable:!0}),t}();r.TriangleCulling=n},{}],47:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./Bitmap")),n(t("./BitmapData")),n(t("./BitmapDataChannel")),n(t("./BlendMode")),n(t("./CapsStyle")),n(t("./ColorCorrection")),n(t("./ColorCorrectionSupport")),n(t("./DisplayObject")),n(t("./DisplayObjectContainer")),n(t("./GradientType")),n(t("./Graphics")),n(t("./GraphicsPathCommand")),n(t("./GraphicsPathWinding")),n(t("./InteractiveObject")),n(t("./InterpolationMethod")),n(t("./JointStyle")),n(t("./LineScaleMode")),n(t("./PixelSnapping")),n(t("./Shader")),n(t("./Shape")),n(t("./SpreadMethod")),n(t("./Stage")),n(t("./StageAlign")),n(t("./StageDisplayState")),n(t("./StageQuality")),n(t("./StageScaleMode")),n(t("./TriangleCulling"))},{"./Bitmap":20,"./BitmapData":21,"./BitmapDataChannel":22,"./BlendMode":23,"./CapsStyle":24,"./ColorCorrection":25,"./ColorCorrectionSupport":26,"./DisplayObject":27,"./DisplayObjectContainer":28,"./GradientType":29,"./Graphics":30,"./GraphicsPathCommand":31,"./GraphicsPathWinding":32,"./InteractiveObject":33,"./InterpolationMethod":34,"./JointStyle":35,"./LineScaleMode":36,"./PixelSnapping":37,"./Shader":38,"./Shape":39,"./SpreadMethod":40,"./Stage":41,"./StageAlign":42,"./StageDisplayState":43,"./StageQuality":44,"./StageScaleMode":45,"./TriangleCulling":46}],48:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../glantern/ErrorBase"),o=function(t){function e(e){void 0===e&&(e=""),t.call(this,e)}return n(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"ApplicationError"},enumerable:!0,configurable:!0}),e}(i.ErrorBase);r.ApplicationError=o},{"../../glantern/ErrorBase":93}],49:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../glantern/ErrorBase"),o=function(t){function e(e,r){void 0===e&&(e=""),void 0===r&&(r=null),t.call(this,e),this._argument=null,this._argument=r}return n(e,t),Object.defineProperty(e.prototype,"argument",{get:function(){return this._argument},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return"ArgumentError"},enumerable:!0,configurable:!0}),e}(i.ErrorBase);r.ArgumentError=o},{"../../glantern/ErrorBase":93}],50:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../glantern/ErrorBase"),o=function(t){function e(e){void 0===e&&(e=""),t.call(this,e)}return n(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"EOFError"},enumerable:!0,configurable:!0}),e}(i.ErrorBase);r.EOFError=o},{"../../glantern/ErrorBase":93}],51:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../glantern/ErrorBase"),o=function(t){function e(e){void 0===e&&(e=""),t.call(this,e)}return n(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"IOError"},enumerable:!0,configurable:!0}),e}(i.ErrorBase);r.IOError=o},{"../../glantern/ErrorBase":93}],52:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../glantern/ErrorBase"),o=function(t){function e(e){void 0===e&&(e=""),t.call(this,e)}return n(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"NotImplementedError"},enumerable:!0,configurable:!0}),e}(i.ErrorBase);r.NotImplementedError=o},{"../../glantern/ErrorBase":93}],53:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./ApplicationError")),n(t("./ArgumentError")),n(t("./NotImplementedError")),n(t("./IOError")),n(t("./EOFError"))},{"./ApplicationError":48,"./ArgumentError":49,"./EOFError":50,"./IOError":51,"./NotImplementedError":52}],54:[function(t,e,r){"use strict";var n=t("../../glantern/GLUtil"),i=function(){function t(){this._listeners=null,this._listeners=new Map}return t.prototype.addEventListener=function(t,e,r){void 0===r&&(r=!1),this._listeners.has(t)||this._listeners.set(t,[]),this._listeners.get(t).push(e)},t.prototype.dispatchEvent=function(t,e){if(this._listeners.has(t.type)&&null!==this._listeners.get(t.type)){for(var r=this._listeners.get(t.type),i=0;i<r.length;++i)try{r[i].call(null,e)}catch(o){n.GLUtil.trace(o.toString(),"dispatchEvent: error")}return!0}return!1},t.prototype.removeEventListener=function(t,e,r){if(void 0===r&&(r=!1),this._listeners.has(t)&&0!==this._listeners.get(t).length){var n=this._listeners.get(t).indexOf(e);n>=0&&this._listeners.get(t).splice(n,1)}},t.prototype.hasEventListener=function(t){return this._listeners.has(t)},t.prototype.willTrigger=function(t){return this.hasEventListener(t)&&this._listeners.get(t).length>0},t.prototype.dispose=function(){this._listeners.forEach(function(t){for(;t.length>0;)t.pop()}),this._listeners.clear()},t}();r.EventDispatcher=i},{"../../glantern/GLUtil":95}],55:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../glantern/EventBase"),o=function(t){function e(){t.apply(this,arguments)}return n(e,t),Object.defineProperty(e,"ENTER_FRAME",{get:function(){return"enterFrame"},enumerable:!0,configurable:!0}),e}(i.EventBase);r.FlashEvent=o},{"../../glantern/EventBase":94}],56:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./FlashEvent"),o=t("../errors/NotImplementedError"),a=function(t){function e(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),t.call(this,e,r,n)}return n(e,t),Object.defineProperty(e,"TIMER",{get:function(){return"timer"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TIMER_COMPLETE",{get:function(){return"timerComplete"},enumerable:!0,configurable:!0}),e.prototype.updateAfterEvent=function(){throw new o.NotImplementedError},e.prototype.clone=function(){throw new o.NotImplementedError},e}(i.FlashEvent);r.TimerEvent=a},{"../errors/NotImplementedError":52,"./FlashEvent":55}],57:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./EventDispatcher"));var i=t("./FlashEvent");r.Event=i.FlashEvent,n(t("./TimerEvent"))},{"./EventDispatcher":54,"./FlashEvent":55,"./TimerEvent":56}],58:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"HIGH",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LOW",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MEDIUM",{get:function(){return 2},enumerable:!0,configurable:!0}),t}();r.BitmapFilterQuality=n},{}],59:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../webgl/filters/Blur2Filter"),o=t("./BitmapFilterQuality"),a=function(t){function e(e,r,n,i){void 0===r&&(r=4),void 0===n&&(n=4),void 0===i&&(i=o.BitmapFilterQuality.LOW),
t.call(this,e),this.blurX=r,this.blurY=n,this.quality=i}return n(e,t),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.strengthX},set:function(t){this.strengthX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.strengthY},set:function(t){this.strengthY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.pass},set:function(t){this.pass=t},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.filterManager,this.blurX,this.blurY,this.quality)},e}(i.Blur2Filter);r.BlurFilter=a},{"../../webgl/filters/Blur2Filter":118,"./BitmapFilterQuality":58}],60:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../webgl/filters/GlowFilter"),o=t("./BitmapFilterQuality"),a=t("../../glantern/MathUtil"),s=function(t){function e(e,r,n,i,s,u,l,h,c){void 0===r&&(r=16711680),void 0===n&&(n=1),void 0===i&&(i=6),void 0===s&&(s=6),void 0===u&&(u=2),void 0===l&&(l=o.BitmapFilterQuality.LOW),void 0===h&&(h=!1),void 0===c&&(c=!1),t.call(this,e),this.inner=!1,this.knockout=!1,this.strength=2,this._color=0,this._alpha=1,this.color=r,this.alpha=a.MathUtil.clamp(n,0,1),this.blurX=i,this.blurY=s,this.strength=u,this.quality=l,this.inner=h,this.knockout=c}return n(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){var e=t!==this.alpha;this._alpha=t,e&&this.__updateColorMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.strengthX},set:function(t){this.strengthX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.strengthY},set:function(t){this.strengthY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){t|=0;var e=t!==this._color;this._color=t,e&&this.__updateColorMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.pass},set:function(t){this.pass=t},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.filterManager,this.color,this.alpha,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout)},e.prototype.__updateColorMatrix=function(){var t=(this._color>>>16&255)/255,e=(this._color>>>8&255)/255,r=(255&this._color)/255,n=this._alpha,i=[0,0,0,t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,n,0];this.setColorMatrix(i)},e}(i.GlowFilter);r.GlowFilter=s},{"../../glantern/MathUtil":96,"../../webgl/filters/GlowFilter":123,"./BitmapFilterQuality":58}],61:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./BitmapFilterQuality")),n(t("./BlurFilter")),n(t("./GlowFilter"))},{"./BitmapFilterQuality":58,"./BlurFilter":59,"./GlowFilter":60}],62:[function(t,e,r){"use strict";var n=t("../errors/NotImplementedError"),i=t("../../glantern/MathUtil"),o=t("../../glantern/GLUtil"),a=function(){function t(t,e,r,n,i,o,a,s){void 0===t&&(t=1),void 0===e&&(e=1),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),this.color=0,this._alphaMultiplier=1,this._alphaOffset=0,this._redMultiplier=1,this._redOffset=0,this._greenMultiplier=1,this._greenOffset=0,this._blueMultiplier=1,this._blueOffset=0,this.redMultiplier=t,this.greenMultiplier=e,this.blueMultiplier=r,this.alphaMultiplier=n,this.redOffset=i,this.greenOffset=o,this.blueOffset=a,this.alphaOffset=s}return Object.defineProperty(t.prototype,"alphaMultiplier",{get:function(){return this._alphaMultiplier},set:function(t){this._alphaMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alphaOffset",{get:function(){return this._alphaOffset},set:function(t){this._alphaOffset=i.MathUtil.clamp(t,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redMultiplier",{get:function(){return this._redMultiplier},set:function(t){this._redMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redOffset",{get:function(){return this._redOffset},set:function(t){this._redOffset=i.MathUtil.clamp(t,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"greenMultiplier",{get:function(){return this._greenMultiplier},set:function(t){this._greenMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"greenOffset",{get:function(){return this._greenOffset},set:function(t){this._greenOffset=i.MathUtil.clamp(t,-1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blueMultiplier",{get:function(){return this._blueMultiplier},set:function(t){this._blueMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blueOffset",{get:function(){return this._blueOffset},set:function(t){this._blueOffset=i.MathUtil.clamp(t,-1,1)},enumerable:!0,configurable:!0}),t.prototype.concat=function(t){throw new n.NotImplementedError},t.prototype.transform=function(t){var e=o.GLUtil.decomposeRgba(t);return e.r=i.MathUtil.clamp(e.r*this.redMultiplier+this.redOffset,0,255),e.g=i.MathUtil.clamp(e.g*this.greenMultiplier+this.greenOffset,0,255),e.b=i.MathUtil.clamp(e.b*this.blueMultiplier+this.blueOffset,0,255),e.a=i.MathUtil.clamp(e.a*this.alphaMultiplier+this.alphaOffset,0,255),o.GLUtil.rgba(e.r,e.g,e.b,e.a)},t}();r.ColorTransform=a},{"../../glantern/GLUtil":95,"../../glantern/MathUtil":96,"../errors/NotImplementedError":52}],63:[function(t,e,r){"use strict";var n=t("./Point"),i=t("../errors/NotImplementedError"),o=function(){function t(t,e,r,n,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),this._data=[t,r,i,e,n,o,0,0,1]}return Object.defineProperty(t.prototype,"a",{get:function(){return this._data[0]},set:function(t){this._data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._data[3]},set:function(t){this._data[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this._data[1]},set:function(t){this._data[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"d",{get:function(){return this._data[4]},set:function(t){this._data[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tx",{get:function(){return this._data[2]},set:function(t){this._data[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ty",{get:function(){return this._data[5]},set:function(t){this._data[5]=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.prototype.concat=function(e){this._data=t.__dotProduct(this._data,e._data)},t.prototype.copyColumnFrom=function(t,e){if(0>t||t>2)throw new RangeError("Column must be 0, 1, or 2.");this._data[3*t]=e.x,this._data[1+3*t]=e.y,this._data[2+3*t]=e.z},t.prototype.copyColumnTo=function(t,e){if(0>t||t>2)throw new RangeError("Column must be 0, 1, or 2.");e.x=this._data[3*t],e.y=this._data[1+3*t],e.z=this._data[2+3*t]},t.prototype.copyFrom=function(t){this._data=t._data.slice()},t.prototype.copyRowFrom=function(t,e){if(0>t||t>2)throw new RangeError("Row must be 0, 1, or 2.");this._data[t]=e.x,this._data[t+3]=e.y,this._data[t+6]=e.z},t.prototype.copyRowTo=function(t,e){if(0>t||t>2)throw new RangeError("Column must be 0, 1, or 2.");e.x=this._data[t],e.y=this._data[3+t],e.z=this._data[6+t]},t.prototype.createBox=function(t,e,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.identity(),this.rotate(r),this.scale(t,e),this.translate(n,i)},t.prototype.createGradientBox=function(t,e,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),this.createBox(t,e,r,n,i)},t.prototype.deltaTransformPoint=function(t){throw new i.NotImplementedError},t.prototype.identity=function(){this._data=[1,0,0,0,1,0,0,0,1]},t.prototype.invert=function(){throw new i.NotImplementedError},t.prototype.rotate=function(e){this._data=t.__dotProduct(this._data,[Math.cos(e),-Math.sin(e),0,Math.sin(e),Math.cos(e),0,0,0,1])},t.prototype.scale=function(e,r){this._data=t.__dotProduct(this._data,[e,0,0,0,r,0,0,0,1])},t.prototype.skew=function(e,r){this._data=t.__dotProduct(this._data,[0,Math.tan(e),0,Math.tan(r),0,0,0,0,1])},t.prototype.setTo=function(t,e,r,n,i,o){this._data=[t,r,i,e,n,o,0,0,1]},t.prototype.toString=function(){return"["+this.a+" "+this.b+" 0\r\n"+this.c+" "+this.d+" 0\r\n"+this.tx+" "+this.ty+" 1]"},t.prototype.transformPoint=function(t){return new n.Point(t.x*this._data[0]+t.y*this._data[1]+this._data[2],t.x*this._data[3]+t.y*this._data[4]+this._data[5])},t.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},t.__dotProduct=function(t,e){if(9!=e.length)throw new Error("Matrix dot product requires a 3x3 matrix.");for(var r=[0,0,0,0,0,0,0,0,0],n=0;3>n;n++)for(var i=0;3>i;i++)for(var o=0;3>o;o++)r[3*n+i]+=t[3*n+o]*e[3*o+i];return r},t}();r.Matrix=o},{"../errors/NotImplementedError":52,"./Point":67}],64:[function(t,e,r){"use strict";var n=t("./Vector3D"),i=t("./Orientation3D"),o=t("../errors/NotImplementedError"),a=t("../errors/ArgumentError"),s=t("../errors/ApplicationError"),u=t("../../glantern/MathUtil"),l=function(){function t(t){void 0===t&&(t=null),this.position=null,this._data=null,(null===t||t.length<=0)&&(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.rawData=t}return Object.defineProperty(t.prototype,"determinant",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rawData",{get:function(){return this._data},set:function(t){if(t.length<16)throw new Error("Data length of Matrix3D must be no less than 16.");this._data=t.slice()},enumerable:!0,configurable:!0}),t.prototype.append=function(e){this._data=t.__dotProduct(e._data,this._data)},t.prototype.appendRotation=function(e,r,n){void 0===n&&(n=null),null!==n&&this.appendTranslation(n.x,n.y,n.z),this._data=t.__dotProduct(t.__getRotationMatrix(e*Math.PI/180,r),this._data),null!==n&&this.appendTranslation(-n.x,-n.y,-n.z)},t.prototype.appendScale=function(e,r,n){this._data=t.__dotProduct([e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1],this._data)},t.prototype.appendTranslation=function(e,r,n){this._data=t.__dotProduct([1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1],this._data)},t.prototype.clone=function(){var e=new t(this.rawData);return e.position=null!==this.position?this.position.clone():null,e},t.prototype.copyColumnFrom=function(t,e){if(0>t||t>3)throw new RangeError("Column must be 0, 1, 2 or 3.");this._data[4*t]=e.x,this._data[4*t+1]=e.y,this._data[4*t+2]=e.z,this._data[4*t+3]=e.w},t.prototype.copyColumnTo=function(t,e){if(0>t||t>3)throw new RangeError("Column must be 0, 1, 2 or 3.");e.x=this._data[4*t],e.y=this._data[4*t+1],e.z=this._data[4*t+2],e.w=this._data[4*t+3]},t.prototype.copyFrom=function(t){this.position=null!==t.position?t.position.clone():null,this.rawData=t.rawData},t.prototype.copyRawDataFrom=function(t,e,r){throw void 0===e&&(e=0),void 0===r&&(r=!1),new o.NotImplementedError},t.prototype.copyRawDataTo=function(t,e,r){throw void 0===e&&(e=0),void 0===r&&(r=!1),new o.NotImplementedError},t.prototype.copyRowFrom=function(t,e){if(0>t||t>3)throw new RangeError("Row must be 0, 1, 2 or 3.");this._data[t]=e.x,this._data[t+4]=e.y,this._data[t+8]=e.z,this._data[t+12]=e.w},t.prototype.copyRowTo=function(t,e){if(0>t||t>3)throw new RangeError("Row must be 0, 1, 2 or 3.");e.x=this._data[t],e.y=this._data[t+4],e.z=this._data[t+8],e.w=this._data[t+12]},t.prototype.copyToMatrix3D=function(t){t.position=null!==this.position?this.position.clone():null,t.rawData=this.rawData},t.prototype.decompose=function(t){throw void 0===t&&(t=i.Orientation3D.EULER_ANGLES),new o.NotImplementedError},t.prototype.deltaTransformVector=function(t){throw new o.NotImplementedError},t.prototype.identity=function(){this._data=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.interpolate=function(e,r,n){n=u.MathUtil.clamp(n,0,1);for(var i=[],o=0;16>o;o++)i.push(e._data[o]*(1-n)+r._data[o]*n);return new t(i)},t.prototype.interpolateTo=function(e,r){return t.interpolate(this,e,r)},t.prototype.invert=function(){throw new o.NotImplementedError},t.prototype.pointAt=function(t,e,r){void 0===e&&(e=n.Vector3D.ORIGIN),void 0===r&&(r=n.Vector3D.Z_AXIS);var i=e.x-t.x,o=e.y-t.y,a=e.z-t.z,s=1/Math.sqrt(i*i+o*o+a*a);i*=s,o*=s,a*=s;var u=o*r.z-a*r.y,l=a*r.x-i*r.z,h=i*r.y-o*r.x,c=1/Math.sqrt(u*u+l*l+h*h);u*=c,l*=c,h*=c;var f=l*a-h*o,p=h*i-u*a,d=u*o-l*i,_=this._data;_[0]=u,_[1]=l,_[2]=h,_[3]=0,_[4]=f,_[5]=p,_[6]=d,_[7]=0,_[8]=-i,_[9]=-o,_[10]=-a,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1;var g=-t.x,b=-t.y,m=-t.z;_[3]+=_[0]*g+_[1]*b+_[2]*m,_[7]+=_[4]*g+_[5]*b+_[6]*m,_[11]+=_[8]*g+_[9]*b+_[10]*m,_[15]+=_[12]*g+_[13]*b+_[14]*m},t.prototype.prepend=function(e){this._data=t.__dotProduct(this._data,e._data)},t.prototype.prependRotation=function(e,r,n){void 0===n&&(n=null),null!==n&&this.prependTranslation(n.x,n.y,n.z),this._data=t.__dotProduct(this._data,t.__getRotationMatrix(e*Math.PI/180,r)),null!==n&&this.prependTranslation(-n.x,-n.y,-n.z)},t.prototype.prependScale=function(e,r,n){this._data=t.__dotProduct(this._data,[e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1])},t.prototype.prependTranslation=function(e,r,n){this._data=t.__dotProduct(this._data,[1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1])},t.prototype.recompose=function(t,e){throw void 0===e&&(e=i.Orientation3D.EULER_ANGLES),new o.NotImplementedError},t.prototype.transformVector=function(t){var e=this._data[0]*t.x+this._data[1]*t.y+this._data[2]*t.z+this._data[3]*t.w,r=this._data[4]*t.x+this._data[5]*t.y+this._data[6]*t.z+this._data[7]*t.w,i=this._data[8]*t.x+this._data[9]*t.y+this._data[10]*t.z+this._data[11]*t.w,o=this._data[12]*t.x+this._data[13]*t.y+this._data[14]*t.z+this._data[15]*t.w;return new n.Vector3D(e,r,i,o)},t.prototype.transformVectors=function(t,e){if(t.length%3!==0)throw new s.ApplicationError("Matrix3D.transformVectors needs 2 arrays, size of the input array must be multiple of 3.");for(var r=0;r<t.length/3;r++){var n=t[3*r],i=t[3*r+1],o=t[3*r+2],a=this._data[0]*n+this._data[1]*i+this._data[2]*o,u=this._data[4]*n+this._data[5]*i+this._data[6]*o,l=this._data[8]*n+this._data[9]*i+this._data[10]*o;e.push(a,u,l)}},t.prototype.transpose=function(){var t=this._data;this._data=[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},t.prototype.toArray=function(){var t=this._data;return new Float32Array([t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]])},t.prototype.setOrthographicProjection=function(t,e,r,n,i,o){if(t===e||r===n||i===o)throw new a.ArgumentError("Null frustum");var s=1/(e-t),u=1/(r-n),l=1/(o-i),h=this._data;h[0]=2*s,h[1]=0,h[2]=0,h[3]=-(t+e)*s,h[4]=0,h[5]=2*u,h[6]=0,h[7]=-(r+n)*u,h[8]=0,h[9]=0,h[10]=-2*l,h[11]=-(i+o)*l,h[12]=0,h[13]=0,h[14]=0,h[15]=1},t.prototype.setPerspectiveProjection=function(t,e,r,n){if(r===n||0===e)throw new a.ArgumentError("Null frustum");if(0>=r)throw new a.ArgumentError("near <= 0");if(0>=n)throw new a.ArgumentError("far <= 0");t=Math.PI/2*t/180;var i=Math.sin(t);if(0===i)throw new a.ArgumentError("Null frustum");var o=1/(n-r),s=Math.cos(t)/i,u=this._data;u[0]=s/e,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=s,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=-(n+r)*o,u[11]=-2*r*n*o,u[12]=0,u[13]=0,u[14]=-1,u[15]=0},t.__dotProduct=function(t,e){if(16!==t.length||16!==e.length)throw new Error("Matrix3D dot product needs a array of 16 elements.");for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;4>n;n++)for(var i=0;4>i;i++)for(var o=0;4>o;o++)r[4*n+i]+=t[4*n+o]*e[4*o+i];return r},t.__getRotationMatrix=function(t,e){var r=Math.sin(t),n=Math.cos(t);return[n+e.x*e.x*(1-n),e.x*e.y*(1-n)-e.z*r,e.x*e.z*(1-n)+e.y*r,0,e.x*e.y*(1-n)+e.z*r,n+e.y*e.y*(1-n),e.y*e.z*(1-n)-e.x*r,0,e.z*e.x*(1-n)-e.y*r,e.z*e.y*(1-n)+e.x*r,n+e.z*e.z*(1-n),0,0,0,0,1]},t}();r.Matrix3D=l},{"../../glantern/MathUtil":96,"../errors/ApplicationError":48,"../errors/ArgumentError":49,"../errors/NotImplementedError":52,"./Orientation3D":65,"./Vector3D":70}],65:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"AXIS_ANGLE",{get:function(){return"axisAngle"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EULER_ANGLES",{get:function(){return"eulerAngles"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"QUATERNION",{get:function(){return"quaternion"},enumerable:!0,configurable:!0}),t}();r.Orientation3D=n},{}],66:[function(t,e,r){"use strict";var n=t("./Point"),i=t("../errors/NotImplementedError"),o=t("../../glantern/MathUtil"),a=function(){function t(){this.focalLength=10,this.projectionCenter=null,this._fieldOfView=90,this.projectionCenter=new n.Point}return Object.defineProperty(t.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(t){this._fieldOfView=o.MathUtil.clamp(t,0,180)},enumerable:!0,configurable:!0}),t.prototype.toMatrix3D=function(){throw new i.NotImplementedError},t}();r.PerspectiveProjection=a},{"../../glantern/MathUtil":96,"../errors/NotImplementedError":52,"./Point":67}],67:[function(t,e,r){"use strict";var n=t("../../glantern/MathUtil"),i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},t.interpolate=function(e,r,i){return i=n.MathUtil.clamp(i,0,1),new t(e.x*i+r.x*(1-i),e.y*i+r.y*(1-i))},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),t.prototype.normalize=function(t){var e=this.length;e>0&&(this.x*=t/e,this.y*=t/e)},t.prototype.offset=function(t,e){this.x+=t,this.y+=e},t.polar=function(e,r){return new t(e*Math.cos(r),e*Math.sin(r))},t.prototype.setTo=function(t,e){this.x=t,this.y=e},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.toString=function(){return"(X="+this.x+", y="+this.y+")"},t}();r.Point=i},{"../../glantern/MathUtil":96}],68:[function(t,e,r){"use strict";var n=t("./Point"),i=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this._x=0,this._y=0,this._w=0,this._h=0,this._x=t>=0?t:0,this._y=e>=0?e:0,this._w=r>=0?r:0,this._h=n>=0?n:0}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this._y+this._h},set:function(t){t<this._y&&(t=this._y),this._h=t-this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new n.Point(this._x+this._w,this._y+this._h)},set:function(t){this.right=t.x,this.bottom=t.y},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._x,this._y,this._w,this._h)},t.prototype.contains=function(t,e){return this.left<=t&&t<=this.right&&this.top<=e&&e<=this.bottom},t.prototype.containsPoint=function(t){return this.contains(t.x,t.y)},t.prototype.containsRect=function(t){return this.containsPoint(t.topLeft)&&this.containsPoint(t.bottomRight)},t.prototype.copyFrom=function(t){this._x=t._x,this._y=t._y,this._w=t._w,this._h=t._h},t.prototype.equals=function(t){return this._x==t._x&&this._y==t._y&&this._w==t._w&&this._h==t._h},Object.defineProperty(t.prototype,"height",{get:function(){return this._h},set:function(t){this._h=t>=0?t:0},enumerable:!0,configurable:!0}),t.prototype.inflate=function(t,e){this.x-=t,this.width+=t+t,this.y-=e,this.height+=e+e},t.prototype.inflatePoint=function(t){this.inflate(t.x,t.y)},t.prototype.intersection=function(e){var r=this.intersects(e);if(r){var n=this,i=e,o=Math.max(n.x,i.x),a=Math.max(n.bottom,i.bottom),s=Math.min(n.right,i.right),u=Math.min(n.y,i.y);return new t(o,u,s-o,a-u)}return t.empty},t.prototype.intersects=function(e){return t.testIntersection(this,e)},t.prototype.isEmpty=function(){return this._w<=0||this._h<=0},Object.defineProperty(t.prototype,"left",{get:function(){return this._x},set:function(t){this._x=t>=0?t:0},enumerable:!0,configurable:!0}),t.prototype.offset=function(t,e){this.x+=t,this.y+=e},t.prototype.offsetPoint=function(t){this.offset(t.x,t.y)},Object.defineProperty(t.prototype,"right",{get:function(){return this._x+this._w},set:function(t){t<this._x&&(t=this._x),this._w=t-this._x},enumerable:!0,configurable:!0}),t.prototype.setEmpty=function(){this._x=this._y=this._w=this._h=0},t.prototype.setTo=function(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n},Object.defineProperty(t.prototype,"size",{get:function(){return new n.Point(this._w,this._h)},set:function(t){this._w=t.x,this._h=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._y},set:function(t){t>this._y+this._h&&(t=this._y+this._h),this._h=this._y+this._h-t,this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new n.Point(this._x,this._y)},set:function(t){this.left=t.x,this.top=t.y},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"},t.prototype.union=function(e){var r=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.right,e.right),o=Math.max(this.bottom,e.bottom);return new t(r,n,i-r,o-n)},Object.defineProperty(t.prototype,"width",{get:function(){return this._w},set:function(t){this._w=t>=0?t:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"empty",{get:function(){return o.clone()},enumerable:!0,configurable:!0}),t.testIntersection=function(t,e,r){void 0===r&&(r=!0);var n;return n=r?t.right<e.left||t.left>e.right||t.top<e.bottom||t.bottom>e.top:t.right<=e.left||t.left>=e.right||t.top<=e.bottom||t.bottom>=e.top,!n},t}();r.Rectangle=i;var o=new i},{"./Point":67}],69:[function(t,e,r){"use strict";var n=t("./Matrix3D"),i=t("./ColorTransform"),o=t("./Matrix"),a=t("./PerspectiveProjection"),s=t("../errors/NotImplementedError"),u=function(){function t(){this.colorTransform=null,this.matrix=null,this.matrix3D=null,this.perspectiveProjection=null,this._pixelBounds=null,this.matrix=new o.Matrix,this.matrix3D=new n.Matrix3D,this.colorTransform=new i.ColorTransform,this.perspectiveProjection=new a.PerspectiveProjection}return Object.defineProperty(t.prototype,"concatenatedColorTransform",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"concatenatedMatrix",{get:function(){throw new s.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:!0,configurable:!0}),t.prototype.getRelativeMatrix3D=function(t){throw new s.NotImplementedError},t}();r.Transform=u},{"../errors/NotImplementedError":52,"./ColorTransform":62,"./Matrix":63,"./Matrix3D":64,"./PerspectiveProjection":66}],70:[function(t,e,r){"use strict";var n=t("../../glantern/MathUtil"),i=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.w=0,this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=r,this.w=n}return Object.defineProperty(t,"X_AXIS",{get:function(){return new t(1,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Y_AXIS",{get:function(){return new t(0,1,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Z_AXIS",{get:function(){return new t(0,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ORIGIN",{get:function(){return new t(0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z,this.w)},t.angleBetween=function(t,e){var r=t.x*e.x+t.y*e.y+t.z*e.z,n=t.length*e.length,i=Math.sqrt(r*r/n);return Math.acos(i)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},t.prototype.crossProduct=function(e){var r=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,i=this.x*e.y-this.y*e.x;return new t(r,n,i,this.w)},t.prototype.decrementBy=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.equals=function(t,e){return void 0===e&&(e=!1),this.x==t.x&&this.y==t.y&&this.z==t.y&&!(e&&this.w!=t.w)},t.prototype.incrementBy=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},t.prototype.nearEquals=function(t,e,r){return void 0===r&&(r=!1),n.MathUtil.isValueBetweenNotEquals(this.x,t.x-e,t.x+e)&&n.MathUtil.isValueBetweenNotEquals(this.y,t.y-e,t.y+e)&&n.MathUtil.isValueBetweenNotEquals(this.z,t.z-e,t.z+e)&&!(r&&!n.MathUtil.isValueBetweenNotEquals(this.w,t.w-e,t.w+e))},t.prototype.negate=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},t.prototype.normalize=function(){var t=this.length;return t>0&&(this.x/=t,this.y/=t,this.z/=t),t},t.prototype.project=function(){null!=this.w&&0!=this.w&&(this.x/=this.w,this.y/=this.w,this.z/=this.w)},t.prototype.scaleBy=function(t){this.x*=t,this.y*=t,this.z*=t},t.prototype.setTo=function(t,e,r){this.x=t,this.y=e,this.z=r},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z,this.w)},t.prototype.toString=function(){return"[x="+this.x+", y="+this.y+", z="+this.z+", w="+this.w+"]"},t}();r.Vector3D=i},{"../../glantern/MathUtil":96}],71:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./ColorTransform")),n(t("./Matrix")),n(t("./Matrix3D")),n(t("./Orientation3D")),n(t("./PerspectiveProjection")),n(t("./Point")),n(t("./Rectangle")),n(t("./Transform")),n(t("./Vector3D"))},{"./ColorTransform":62,"./Matrix":63,"./Matrix3D":64,"./Orientation3D":65,"./PerspectiveProjection":66,"./Point":67,"./Rectangle":68,"./Transform":69,"./Vector3D":70}],72:[function(t,e,r){"use strict";var n=t("./display/index");r.display=n;var i=t("./events/index");r.events=i;var o=t("./geom/index");r.geom=o;var a=t("./filters/index");r.filters=a;var s=t("./text/index");r.text=s;var u=t("./utils/index");r.utils=u;var l=t("./media/index");r.media=l;var h=t("./errors/index");r.errors=h},{"./display/index":47,"./errors/index":53,"./events/index":57,"./filters/index":61,"./geom/index":71,"./media/index":74,"./text/index":85,"./utils/index":90}],73:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../events/EventDispatcher"),o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(i.EventDispatcher);r.Sound=o},{"../events/EventDispatcher":54}],74:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./Sound"))},{"./Sound":73}],75:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"ADVANCED",{get:function(){return"advanced"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),t}();r.AntiAliasType=n},{}],76:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PIXEL",{get:function(){return"pixel"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SUBPIXEL",{get:function(){return"subpixel"},enumerable:!0,configurable:!0}),t}();r.GridFitType=n},{}],77:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../events/EventDispatcher"),o=t("../errors/NotImplementedError"),a=function(t){function e(){throw t.call(this),new o.NotImplementedError}return n(e,t),e.prototype.clear=function(){throw new o.NotImplementedError},e.prototype.getStyle=function(t){throw new o.NotImplementedError},e.prototype.parseCSS=function(t){throw new o.NotImplementedError},e.prototype.setStyle=function(t,e){throw new o.NotImplementedError},e.prototype.transform=function(t){throw new o.NotImplementedError},e.prototype.dispose=function(){throw t.prototype.dispose.call(this),new o.NotImplementedError},Object.defineProperty(e.prototype,"styleNames",{get:function(){throw new o.NotImplementedError},enumerable:!0,configurable:!0}),e}(i.EventDispatcher);r.StyleSheet=a},{"../errors/NotImplementedError":52,"../events/EventDispatcher":54}],78:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../display/InteractiveObject"),o=t("./AntiAliasType"),a=t("./TextFieldAutoSize"),s=t("./TextFormat"),u=t("./GridFitType"),l=t("./TextInteractionMode"),h=t("./TextFieldType"),c=t("../../webgl/ShaderID"),f=t("../../webgl/RenderHelper"),p=t("../errors/NotImplementedError"),d=t("../../glantern/GLUtil"),_=function(t){function e(e,r){t.call(this,e,r),this.alwaysShowSelection=!1,this.antiAliasType=o.AntiAliasType.NORMAL,this.autoSize=a.TextFieldAutoSize.NONE,this.condenseWhite=!1,this.displayAsPassword=!1,this.embedFonts=!1,this.gridFitType=u.GridFitType.PIXEL,this.htmlText=null,this.maxChars=0,this.mouseWheelEnabled=!0,this.multiline=!0,this.restrict=null,this.scrollH=0,this.scrollV=1,this.selectable=!0,this.sharpness=0,this.styleSheet=null,this.customOutlineEnabled=!1,this.textInteractionMode=l.TextInteractionMode.NORMAL,this.type=h.TextFieldType.DYNAMIC,this.useRichTextClipboard=!1,this.wordWrap=!1,this._textFormatChangedHandler=null,this._defaultTextFormat=null,this._isContentChanged=!0,this._canvasTarget=null,this._canvas=null,this._context2D=null,this._text=null,this._background=!1,this._backgroundColor=16777215,this._border=!1,this._borderColor=0,this._textColor=0,this._textOutlineColor=0,this._thickness=0,null!==e&&(this._canvasTarget=this._$createCanvasTarget(e.worldRenderer)),this._textFormatChangedHandler=this.__textFormatChanged.bind(this),this.defaultTextFormat=new s.TextFormat}return n(e,t),e.prototype.appendText=function(t){this.text+=t},Object.defineProperty(e.prototype,"background",{get:function(){return this._background},set:function(t){var e=t!==this._background;e&&(this._background=t,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e=t!==this._backgroundColor;e&&(this._backgroundColor=t,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){return this._border},set:function(t){var e=t!==this._border;e&&(this._border=t,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(t){var e=t!==this._borderColor;e&&(this._borderColor=t,this._isContentChanged=!0);
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomScrollV",{get:function(){throw new p.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caretIndex",{get:function(){throw new p.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTextFormat",{get:function(){return this._defaultTextFormat},set:function(t){null!==this._defaultTextFormat&&this._defaultTextFormat.removeEventListener(s.TextFormat.TEXT_FORMAT_CHANGE,this._textFormatChangedHandler),this._defaultTextFormat=d.GLUtil.isUndefinedOrNull(t)?new s.TextFormat:t,this._defaultTextFormat.addEventListener(s.TextFormat.TEXT_FORMAT_CHANGE,this._textFormatChangedHandler)},enumerable:!0,configurable:!0}),e.prototype.getCharBoundaries=function(){throw new p.NotImplementedError},e.prototype.getCharIndexAtPoint=function(t,e){throw new p.NotImplementedError},e.prototype.getFirstCharInParagraph=function(t){throw new p.NotImplementedError},e.prototype.getImageReference=function(t){throw new p.NotImplementedError},e.prototype.getLineIndexAtPoint=function(t,e){throw new p.NotImplementedError},e.prototype.getLineIndexOfChar=function(t){throw new p.NotImplementedError},e.prototype.getLineLength=function(t){throw new p.NotImplementedError},e.prototype.getLineMetrics=function(t){throw new p.NotImplementedError},e.prototype.getLineOffset=function(t){throw new p.NotImplementedError},e.prototype.getLineText=function(t){throw new p.NotImplementedError},e.prototype.getParagraphLength=function(t){throw new p.NotImplementedError},e.prototype.getTextFormat=function(t,e){throw void 0===t&&(t=-1),void 0===e&&(e=-1),new p.NotImplementedError},e.prototype.isFontCompatible=function(t,e){throw new p.NotImplementedError},e.prototype.replaceSelectedText=function(t){throw new p.NotImplementedError},e.prototype.replaceText=function(t,e,r){throw new p.NotImplementedError},e.prototype.setSelection=function(t,e){throw new p.NotImplementedError},e.prototype.setTextFormat=function(t,e,r){throw void 0===e&&(e=-1),void 0===r&&(r=-1),new p.NotImplementedError},Object.defineProperty(e.prototype,"length",{get:function(){return d.GLUtil.isUndefinedOrNull(this.text)?0:this.text.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollH",{get:function(){throw new p.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollV",{get:function(){throw new p.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numLines",{get:function(){throw new p.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionBeginIndex",{get:function(){throw new p.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionEndIndex",{get:function(){throw new p.NotImplementedError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){var e=this._text!==t;e&&(this._text=t,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this.defaultTextFormat.color},set:function(t){var e=this.defaultTextFormat.color!==t;this.defaultTextFormat.color=t,e&&!this.customOutlineEnabled&&(this.textOutlineColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textOutlineColor",{get:function(){return this._textOutlineColor},set:function(t){var e=this._textOutlineColor!==t;e&&(this._textOutlineColor=t,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){var t=1.5*this.defaultTextFormat.size;return this.thickness>0&&(t+=2*this.thickness),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){var t=this._context2D.measureText(this.text),e=t.width;return this.thickness>0&&(e+=2*this.thickness),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){var e=this._thickness!==t;e&&(this._thickness=t,this._isContentChanged=!0)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this);var e=this.root.worldRenderer;e.releaseRenderTarget(this._canvasTarget),this._canvasTarget=null,this._canvas=null,this._context2D=null},e.prototype._$update=function(t){this._isContentChanged&&(this._canvasTarget.updateImageSize(),this._$updateCanvasTextStyle(this._context2D),this._$drawTextElements(this._context2D),this._isContentChanged=!1)},e.prototype._$render=function(t){this.visible&&this.alpha>0&&null!==this.text&&this.text.length>0&&(this._canvasTarget.updateImageContent(),f.RenderHelper.copyImageContent(t,this._canvasTarget,t.currentRenderTarget,!1,!0,this.transform.matrix3D,this.alpha,!1))},e.prototype._$selectShader=function(t){t.selectShader(c.ShaderID.COPY_IMAGE)},e.prototype._$createCanvasTarget=function(t){if(null===this._canvas){var e=window.document.createElement("canvas");e.width=t.view.width,e.height=t.view.height,this._canvas=e,this._context2D=e.getContext("2d")}return t.createRenderTarget(this._canvas)},e.prototype._$updateCanvasTextStyle=function(t){var e=[];this.defaultTextFormat.bold&&e.push("bold"),this.defaultTextFormat.italic&&e.push("italic"),e.push(this.defaultTextFormat.size.toString()+"pt"),e.push('"'+this.defaultTextFormat.font+'"'),t.font=e.join(" ")},e.prototype._$drawTextElements=function(t){var e=this.thickness,r=(this.thickness,1);t.clearRect(0,0,this._canvas.width,this._canvas.height),this.background&&(t.fillStyle=d.GLUtil.colorToCssSharp(this.backgroundColor),t.fillRect(0,0,this.textWidth+2*r,this.textHeight+2*r)),t.fillStyle=d.GLUtil.colorToCssSharp(this.textColor),t.fillText(this.text,e+r,.75*this.textHeight+r),this.thickness>0&&(t.lineWidth=this.thickness,t.strokeStyle=d.GLUtil.colorToCssSharp(this.textOutlineColor),t.strokeText(this.text,e+r,.75*this.textHeight+r)),this.border&&(t.lineWidth=1,t.strokeStyle=d.GLUtil.colorToCssSharp(this.borderColor),t.strokeRect(r,r,this.textWidth+2*r,this.textHeight+2*r))},e.prototype.__textFormatChanged=function(){this._isContentChanged=!0},e}(i.InteractiveObject);r.TextField=_},{"../../glantern/GLUtil":95,"../../webgl/RenderHelper":108,"../../webgl/ShaderID":111,"../display/InteractiveObject":33,"../errors/NotImplementedError":52,"./AntiAliasType":75,"./GridFitType":76,"./TextFieldAutoSize":79,"./TextFieldType":80,"./TextFormat":81,"./TextInteractionMode":83}],79:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"CENTER",{get:function(){return"center"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LEFT",{get:function(){return"left"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NONE",{get:function(){return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RIGHT",{get:function(){return"right"},enumerable:!0,configurable:!0}),t}();r.TextFieldAutoSize=n},{}],80:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"DYNAMIC",{get:function(){return"dynamic"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"INPUT",{get:function(){return"input"},enumerable:!0,configurable:!0}),t}();r.TextFieldType=n},{}],81:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("os"),o=t("./TextFormatAlign"),a=t("../events/EventDispatcher"),s=t("../../glantern/GLUtil"),u=t("../../glantern/EventBase"),l=function(t){function e(e,r,n,a,s,u,l,h,c,f,p,d,_){void 0===e&&(e=null),void 0===r&&(r=12),void 0===n&&(n=0),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===u&&(u=!1),void 0===l&&(l=null),void 0===h&&(h=null),void 0===c&&(c=o.TextFormatAlign.LEFT),void 0===f&&(f=0),void 0===p&&(p=0),void 0===d&&(d=0),void 0===_&&(_=0),t.call(this),this._align=o.TextFormatAlign.LEFT,this._blockIndent=0,this._bold=!1,this._bullet=!1,this._color=0,this._font=null,this._indent=0,this._italic=!1,this._kerning=!1,this._leading=0,this._leftMargin=0,this._letterSpacing=0,this._rightMargin=0,this._size=12,this._tabStops=[],this._target=null,this._underline=!1,this._url=null,null===e?this.font=i.type().toLowerCase().indexOf("osx")>=0?"Times":"Times New Roman":this.font=e,this.size=r,this.color=n,this.bold=a,this.italic=s,this.underline=u,this.url=l,this.target=h,this.align=c,this.leftMargin=f,this.rightMargin=p,this.indent=d,this.leading=_}return n(e,t),Object.defineProperty(e,"TEXT_FORMAT_CHANGE",{get:function(){return"textFormatChange"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){var e=this._align!==t;e&&(this._align=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockIndent",{get:function(){return this._blockIndent},set:function(t){var e=this._blockIndent!==t;e&&(this._blockIndent=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bold",{get:function(){return this._bold},set:function(t){var e=this._bold!==t;e&&(this._bold=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bullet",{get:function(){return this._bullet},set:function(t){var e=this._bullet!==t;e&&(this._bullet=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){var e=this._color!==t;e&&(this._color=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){var e=this._font!==t;e&&(this._font=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(t){var e=this._indent!==t;e&&(this._indent=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"italic",{get:function(){return this._italic},set:function(t){var e=this._italic!==t;e&&(this._italic=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kerning",{get:function(){return this._kerning},set:function(t){var e=this._kerning!==t;e&&(this._kerning=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._indent},set:function(t){var e=this._leading!==t;e&&(this._leading=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftMargin",{get:function(){return this._leftMargin},set:function(t){var e=this._leftMargin!==t;e&&(this._leftMargin=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){var e=this._letterSpacing!==t;e&&(this._letterSpacing=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightMargin",{get:function(){return this._rightMargin},set:function(t){var e=this._rightMargin!==t;e&&(this._rightMargin=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){var e=this._size!==t;e&&(this._size=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabStops",{get:function(){return this._tabStops},set:function(t){s.GLUtil.isUndefinedOrNull(t)&&(t=[]);var e=!1;if(e||(e=this._tabStops.length!==t.length),!e)for(var r=0;r<t.length;++r)if(this._tabStops[r]!==t[r]){e=!0;break}e&&(this._tabStops=t.slice(),this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){var e=this._target!==t;e&&(this._target=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"underline",{get:function(){return this._underline},set:function(t){var e=this._underline!==t;e&&(this._underline=t,this.__raiseChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(t){var e=this._url!==t;e&&(this._url=t,this.__raiseChange())},enumerable:!0,configurable:!0}),e.prototype.__raiseChange=function(){var t=u.EventBase.create(e.TEXT_FORMAT_CHANGE);this.dispatchEvent(t)},e}(a.EventDispatcher);r.TextFormat=l},{"../../glantern/EventBase":94,"../../glantern/GLUtil":95,"../events/EventDispatcher":54,"./TextFormatAlign":82,os:145}],82:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"CENTER",{get:function(){return"center"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"END",{get:function(){return"end"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"JUSTIFY",{get:function(){return"justify"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LEFT",{get:function(){return"left"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RIGHT",{get:function(){return"right"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"START",{get:function(){return"start"},enumerable:!0,configurable:!0}),t}();r.TextFormatAlign=n},{}],83:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"NORMAL",{get:function(){return"normal"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SELECTION",{get:function(){return"selection"},enumerable:!0,configurable:!0}),t}();r.TextInteractionMode=n},{}],84:[function(t,e,r){"use strict";var n=function(){function t(t,e,r,n,i,o){this.ascent=0,this.descent=0,this.height=0,this.leading=0,this.width=0,this.x=0,this.x=t,this.width=e,this.height=r,this.ascent=n,this.descent=i,this.leading=o}return t}();r.TextLineMetrics=n},{}],85:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./AntiAliasType")),n(t("./GridFitType")),n(t("./StyleSheet")),n(t("./TextField")),n(t("./TextFieldAutoSize")),n(t("./TextFieldType")),n(t("./TextFormat")),n(t("./TextFormatAlign")),n(t("./TextInteractionMode")),n(t("./TextLineMetrics"))},{"./AntiAliasType":75,"./GridFitType":76,"./StyleSheet":77,"./TextField":78,"./TextFieldAutoSize":79,"./TextFieldType":80,"./TextFormat":81,"./TextFormatAlign":82,"./TextInteractionMode":83,"./TextLineMetrics":84}],86:[function(t,e,r){"use strict";var n=t("pako"),i=t("../errors/NotImplementedError"),o=t("./Endian"),a=t("../errors/ArgumentError"),s=t("../../glantern/GLUtil"),u=t("../errors/EOFError"),l=t("./CompressionAlgorithm"),h=t("../errors/ApplicationError"),c=function(){function t(){this._length=0,this._position=-1,this._endian=o.Endian.BIG_ENDIAN,this._buffer=null,this._dataView=null}return Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){var t=this.length-this.position-1;return 0>t?0:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endian",{get:function(){return this._endian},set:function(t){if(t!==o.Endian.BIG_ENDIAN&&t!==o.Endian.LITTLE_ENDIAN)throw new a.ArgumentError("Argument out of range.","v");this._endian=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){t>0&&t!==this._length&&(this.__adjustLength(t),this._length=t,this.position>=t&&(this._position=t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){t>=this.length||(this._position=t)},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._dataView=null,this._buffer=null,this._position=0,this._length=0},t.prototype.compress=function(t){void 0===t&&(t=l.CompressionAlgorithm.ZLIB),this.__ensureBufferExists();var e,r=new Uint8Array(this._buffer);switch(t){case l.CompressionAlgorithm.DEFLATE:e=n.deflateRaw(r);break;case l.CompressionAlgorithm.ZLIB:e=n.deflate(r);break;case l.CompressionAlgorithm.LZMA:throw new i.NotImplementedError("LZMA compression algorithm is not implemented yet.");default:throw new a.ArgumentError("Unknown compression algorithm.")}this._buffer=e.buffer,this._dataView=new DataView(this._buffer),this._length=this._buffer.byteLength,this._position=this._length},t.prototype.deflate=function(){this.compress(l.CompressionAlgorithm.DEFLATE)},t.prototype.inflate=function(){this.uncompress(l.CompressionAlgorithm.DEFLATE)},t.prototype.readBoolean=function(){return 0!==this.readByte()},t.prototype.readByte=function(){this.__checkPosition(1);var t=this._dataView.getInt8(this.position);return this.position+=1,t},t.prototype.readBytes=function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.__checkPosition(r),t.__checkPosition(r),r>0){t.position=e;for(var n=this.position,i=0;r>i;++i)t._dataView.setUint8(e,this._dataView.getUint8(n+i));this.position+=r,t.position+=r}},t.prototype.readDouble=function(){this.__checkPosition(8);var t=this._dataView.getFloat64(this.position,this.__isLittleEndian());return this.position+=8,t},t.prototype.readFloat=function(){this.__checkPosition(4);var t=this._dataView.getFloat32(this.position,this.__isLittleEndian());return this.position+=4,t},t.prototype.readInt=function(){this.__checkPosition(4);var t=this._dataView.getInt32(this.position,this.__isLittleEndian());return this.position+=4,t},t.prototype.readShort=function(){this.__checkPosition(2);var t=this._dataView.getInt16(this.position,this.__isLittleEndian());return this.position+=2,t},t.prototype.readUnsignedByte=function(){this.__checkPosition(1);var t=this._dataView.getUint8(this.position);return this.position+=1,t},t.prototype.readUnsignedInt=function(){this.__checkPosition(4);var t=this._dataView.getUint32(this.position,this.__isLittleEndian());return this.position+=4,t},t.prototype.readUnsignedShort=function(){this.__checkPosition(2);var t=this._dataView.getUint16(this.position,this.__isLittleEndian());return this.position+=2,t},t.prototype.uncompress=function(t){void 0===t&&(t=l.CompressionAlgorithm.ZLIB),this.__ensureBufferExists();var e,r=new Uint8Array(this._buffer);switch(t){case l.CompressionAlgorithm.DEFLATE:e=n.inflateRaw(r);break;case l.CompressionAlgorithm.ZLIB:e=n.inflate(r);break;case l.CompressionAlgorithm.LZMA:throw new i.NotImplementedError("LZMA compression algorithm is not implemented yet.");default:throw new a.ArgumentError("Unknown compression algorithm.")}this._buffer=e.buffer,this._dataView=new DataView(this._buffer),this._length=this._buffer.byteLength,this._position=this._length},t.prototype.writeBoolean=function(t){this.writeByte(t?1:0)},t.prototype.writeByte=function(t){this.__checkPosition(1),this._dataView.setInt8(this.position,t),this.position+=1},t.prototype.writeBytes=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),t.readBytes(this,e,r)},t.prototype.writeDouble=function(t){this.__checkPosition(8),this._dataView.setFloat64(this.position,t,this.__isLittleEndian()),this.position+=8},t.prototype.writeFloat=function(t){this.__checkPosition(4),this._dataView.setFloat64(this.position,t,this.__isLittleEndian()),this.position+=4},t.prototype.writeInt=function(t){this.__checkPosition(4),this._dataView.setInt32(this.position,t,this.__isLittleEndian()),this.position+=4},t.prototype.writeShort=function(t){this.__checkPosition(2),this._dataView.setInt16(this.position,t,this.__isLittleEndian()),this.position+=2},t.prototype.writeUnsignedByte=function(t){this.__checkPosition(1),this._dataView.setUint8(this.position,t),this.position+=1},t.prototype.writeUnsignedInt=function(t){this.__checkPosition(4),this._dataView.setUint32(this.position,t,this.__isLittleEndian()),this.position+=4},t.prototype.writeUnsignedShort=function(t){this.__checkPosition(2),this._dataView.setUint16(this.position,t,this.__isLittleEndian()),this.position+=2},t.from=function(e){var r=new t;return r._buffer=e,r._dataView=new DataView(e),r._length=e.byteLength,r._position=0,r},t.prototype.flatten=function(){this.__ensureBufferExists();for(var t=new Array(this.length),e=0;e<t.length;++e)t[e]=this._dataView.getUint8(e);return t},Object.defineProperty(t.prototype,"rawBuffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0}),t.prototype.__adjustLength=function(t){var e=this._buffer,r=this._dataView,n=new ArrayBuffer(t),i=new DataView(n);if(s.GLUtil.isUndefinedOrNull(e))for(var o=0;o<n.byteLength;++o)i.setUint8(o,0);else{for(var a=t>this.length?e.byteLength:n.byteLength,o=0;a>o;++o)i.setUint8(o,r.getUint8(o));for(var o=a;o<n.byteLength;++o)i.setUint8(o,0)}this._buffer=n,this._dataView=i},t.prototype.__ensureBufferExists=function(){if(null===this._buffer)throw new h.ApplicationError("Buffer has not been allocated.")},t.prototype.__checkPosition=function(t){if(this.__ensureBufferExists(),this.bytesAvailable<t)throw new u.EOFError("Position is out of buffer range.")},t.prototype.__isLittleEndian=function(){return this.endian===o.Endian.LITTLE_ENDIAN},t}();r.ByteArray=c},{"../../glantern/GLUtil":95,"../errors/ApplicationError":48,"../errors/ArgumentError":49,"../errors/EOFError":50,"../errors/NotImplementedError":52,"./CompressionAlgorithm":87,"./Endian":88,pako:146}],87:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"DEFLATE",{get:function(){return"deflate"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LZMA",{get:function(){return"lzma"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ZLIB",{get:function(){return"zlib"},enumerable:!0,configurable:!0}),t}();r.CompressionAlgorithm=n},{}],88:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"BIG_ENDIAN",{get:function(){return"bigEndian"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LITTLE_ENDIAN",{get:function(){return"littleEndian"},enumerable:!0,configurable:!0}),t}();r.Endian=n},{}],89:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../events/EventDispatcher"),o=t("../events/TimerEvent"),a=function(t){function e(e,r){void 0===r&&(r=0),t.call(this),this.enabled=!0,this._currentCount=0,this._delay=1e3,this._repeatCount=0,this._running=!1,this._handle=0,this.delay=e,this.repeatCount=r,this.start()}return n(e,t),Object.defineProperty(e.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){t=Math.floor(t),this._delay=t>=0?t:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(t){t=Math.floor(t),this._repeatCount=t>=0?t:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.running&&(window.clearInterval(this._handle),this._handle=0,this._running=!1,this._currentCount=0)},e.prototype.start=function(){!this.running&&(this.currentCount<this.repeatCount||0===this.repeatCount)&&(this._handle=window.setInterval(this._$timerCallback.bind(this),this.delay),this._running=!0)},e.prototype.stop=function(){this.running&&(window.clearInterval(this._handle),this._handle=0,this._running=!1)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.reset()},e.prototype._$timerCallback=function(){this.enabled&&(this._currentCount++,this.repeatCount>0&&this.currentCount>this.repeatCount?(this.stop(),this._$raiseTimerCompleteEvent()):this._$raiseTimerEvent())},e.prototype._$raiseTimerEvent=function(){var t=new o.TimerEvent(o.TimerEvent.TIMER);t.timeStamp=Date.now(),this.dispatchEvent(t)},e.prototype._$raiseTimerCompleteEvent=function(){var t=new o.TimerEvent(o.TimerEvent.TIMER_COMPLETE);t.timeStamp=Date.now(),this.dispatchEvent(t)},e}(i.EventDispatcher);r.Timer=a},{"../events/EventDispatcher":54,"../events/TimerEvent":56}],90:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./Timer")),n(t("./ByteArray")),n(t("./Endian")),n(t("./CompressionAlgorithm"))},{"./ByteArray":86,"./CompressionAlgorithm":87,"./Endian":88,"./Timer":89}],91:[function(t,e,r){"use strict";function n(t){for(var e=new Array(t),r=0;t>r;++r)e[r]=u.uint8View[r];return e}function i(t,e,r){for(var n=e;e+r>n;++n)u.uint8View[n-e]=t[n]}var o,a=t("./MathUtil"),s=new ArrayBuffer(8),u={uint8View:new Uint8Array(s),int8View:new Int8Array(s),uint16View:new Uint16Array(s),int16View:new Int16Array(s),uint32View:new Uint32Array(s),int32View:new Int32Array(s),float32View:new Float32Array(s),float64View:new Float64Array(s)};!function(){var t=new ArrayBuffer(2),e=new DataView(t);e.setInt16(0,256,!0);var r=new Int16Array(t);o=256===r[0]}();var l=function(){function t(){}return Object.defineProperty(t,"isLittleEndian",{get:function(){return o},enumerable:!0,configurable:!0}),t.float32ToBytes=function(t){return u.float32View[0]=t,n(4)},t.float64ToBytes=function(t){return u.float64View[0]=t,n(8)},t.bytesToFloat32=function(t,e){return void 0===e&&(e=0),i(t,e,4),u.float32View[0]},t.bytesToFloat64=function(t,e){return void 0===e&&(e=0),i(t,e,8),u.float64View[0]},t.int16ToBytes=function(t){return u.int16View[0]=t,n(2)},t.uint16ToBytes=function(t){return u.uint16View[0]=t,n(2)},t.int32ToBytes=function(t){return u.int32View[0]=t,n(4)},t.uint32ToBytes=function(t){return u.uint32View[0]=t,n(4)},t.int64ToBytes=function(t){for(var e=[0,0,0,0,0,0,0,0],r=e.length-1;r>=0;r--){var n=255&t;e[r]=n,t=(t-n)/256}return e},t.uint64ToBytes=function(e){return t.int64ToBytes(e>=0?e:-e)},t.bytesToInt64=function(e,r){void 0===r&&(r=0);var n=t.bytesToUint64(e,r),i=t.__isComplement(e,r,8);return i&&(n=a.MathUtil.complementToNegative(n)),n},t.bytesToUint64=function(t,e){void 0===e&&(e=0);for(var r=0,n=e;e+8>n;n++)r=(r<<8)+t[n];return r},t.bytesToInt32=function(t,e){return void 0===e&&(e=0),i(t,e,4),u.int32View[0]},t.bytesToUint32=function(t,e){return void 0===e&&(e=0),i(t,e,4),u.uint32View[0]},t.bytesToInt16=function(t,e){return void 0===e&&(e=0),i(t,e,2),u.int16View[0]},t.bytesToUint16=function(t,e){return void 0===e&&(e=0),i(t,e,2),u.uint16View[0]},t.swapEndian=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);for(var n=new Array(r),i=e+r-1,o=e+((r+1)/2|0),a=e;o>a;a++)n[a-e]=t[i-a];return n},t.float64ToInt64Bits=function(e){u.float64View[0]=e;var r=n(8);return t.bytesToInt64(r)},t.int64ToFloat64Bits=function(e){var r=t.int64ToBytes(e);return i(r,0,r.length),u.float64View[0]},t.float32ToInt32Bits=function(t){return u.float32View[0]=t,u.int32View[0]},t.int32ToFloat32Bits=function(t){return u.int32View[0]=t,u.float32View[0]},t.__isComplement=function(t,e,r){return a.MathUtil.isByteComplement(t[e+r-1])},t}();r.BitConverter=l},{"./MathUtil":96}],92:[function(t,e,r){"use strict";var n=t("../webgl/WebGLRenderer"),i=t("../flash/display/Stage"),o=t("../flash/events/FlashEvent"),a=t("./VisualUtil"),s=t("./EventBase"),u=function(){function t(){this._isRunning=!1,this._renderer=null,this._stage=null,this._isInitialized=!1,this._attachedUpdateFunctions=null,this._loopFunction=null,this._elapsedMillis=0,this._fps=0,this._fpsCounter=0,this._lastTimeFpsUpdated=0,this._lastTimeUpdated=-1,this._attachedUpdateFunctions=[]}return t.prototype.initialize=function(t,e,r){void 0===r&&(r=n.WebGLRenderer.DEFAULT_OPTIONS),this.isInitialized||(this._renderer=new n.WebGLRenderer(t,e,r),this._stage=new i.Stage(this._renderer),this._loopFunction=this.__mainLoop.bind(this),this._isInitialized=!0)},t.prototype.dispose=function(){if(this.isInitialized){for(this._stage.dispose(),this._renderer.dispose(),this._stage=null,this._renderer=null;this._attachedUpdateFunctions.length>0;)this._attachedUpdateFunctions.pop();this._isInitialized=!1}},t.prototype.startAnimation=function(){this.isInitialized&&(this.isAnimationRunning||(this._lastTimeUpdated=Date.now()),this._isRunning=!0,a.VisualUtil.requestAnimationFrame(this._loopFunction))},t.prototype.stopAnimation=function(){this.isInitialized&&(this.__updateTimeCounters(),this._fps=0,this._isRunning=!1)},t.prototype.clear=function(){this._renderer.clear()},t.prototype.runOneFrame=function(t){if(this._isInitialized){if(this._attachedUpdateFunctions.length>0)for(var e=0;e<this._attachedUpdateFunctions.length;++e){var r=this._attachedUpdateFunctions[e];"function"==typeof r&&r(t)}this._stage.dispatchEvent(s.EventBase.create(o.FlashEvent.ENTER_FRAME)),this._stage.update(t),this._stage.render(this._renderer)}},Object.defineProperty(t.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this.isInitialized?this._renderer.view:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimationRunning",{get:function(){return this.isInitialized&&this._isRunning},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),t.prototype.attachUpdateFunction=function(t){"function"==typeof t&&this._attachedUpdateFunctions.indexOf(t)<0&&this._attachedUpdateFunctions.push(t)},Object.defineProperty(t.prototype,"elapsedMillis",{get:function(){return this._elapsedMillis},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps},enumerable:!0,configurable:!0}),t.prototype.__updateTimeCounters=function(){if(this._lastTimeUpdated>0){var t=Date.now();this._elapsedMillis+=t-this._lastTimeUpdated,this._lastTimeUpdated=t}++this._fpsCounter,this.elapsedMillis-this._lastTimeFpsUpdated>1e3&&(this._fps=this._fpsCounter/(this.elapsedMillis-this._lastTimeFpsUpdated)*1e3,this._fpsCounter=0,this._lastTimeFpsUpdated=this.elapsedMillis)},t.prototype.__mainLoop=function(t){if(this.isAnimationRunning){this.__updateTimeCounters();var e={millisFromStartup:this.elapsedMillis};this.runOneFrame(e),a.VisualUtil.requestAnimationFrame(this._loopFunction)}},t}();r.EngineBase=u},{"../flash/display/Stage":41,"../flash/events/FlashEvent":55,"../webgl/WebGLRenderer":116,"./EventBase":94,"./VisualUtil":97}],93:[function(t,e,r){"use strict";var n=function(){function t(t){void 0===t&&(t=""),this._message=null,this._message=t}return Object.defineProperty(t.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return"ErrorBase"},enumerable:!0,configurable:!0}),t}();r.ErrorBase=n},{}],94:[function(t,e,r){"use strict";var n=function(){function t(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=null,this.defaultPrevented=!1,this.eventPhase=-1,this.isTrusted=!0,this.returnValue=!1,this.srcElement=null,this.target=null,this.timeStamp=0,this.type=null,this.AT_TARGET=2,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=1,this.type=t,this.bubbles=e,this.cancelable=r}return t.prototype.initEvent=function(t,e,r){},t.prototype.preventDefault=function(){},t.prototype.stopImmediatePropagation=function(){},t.prototype.stopPropagation=function(){},t.create=function(e){var r=new t(e,!1,!1);return r.timeStamp=Date.now(),r},t}();r.EventBase=n},{}],95:[function(t,e,r){"use strict";function n(t,e){return t===e}var i=window,o=function(){function t(){}return t.checkSupportStatus=function(){var e={ok:!0,reasons:[]},r=window;r||(e.ok=!1,e.reasons.push("'window' object is not found in global scope."));var n=" is not supported by this browser";t.isClassDefinition(r.HTMLCanvasElement)||(e.ok=!1,e.reasons.push("Canvas element"+n)),t.isClassDefinition(r.WebGLRenderingContext)||(e.ok=!1,e.reasons.push("WebGL"+n));for(var i=["ArrayBuffer","DataView","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float32Array","Float64Array"],o=0;o<i.length;++o)t.isClassDefinition(r[i[o]])||(e.ok=!1,
e.reasons.push("'"+i[o]+"' class"+n));if(t.isClassDefinition(r.Map)||(e.ok=!1,e.reasons.push("'Map' class"+n)),t.isClassDefinition(r.Set)||(e.ok=!1,e.reasons.push("'Set' class"+n)),"object"==typeof r.chrome){var a=/Chrome\/(\d+)(?:\.\d+)*/,s=a.exec(window.navigator.appVersion);(s.length<2||parseInt(s[1])<40)&&(e.ok=!1,e.reasons.push("Chrome under version 40 is not supported due to performance faults."))}return e},t.isUndefinedOrNull=function(t){return"undefined"==typeof t||null===t},t.isUndefined=function(t){return"undefined"==typeof t},t.isFunction=function(t){return"function"==typeof t},t.isClassDefinition=function(t){var e;if("function"==typeof t)e=!0;else{var r=window.navigator.appVersion.indexOf("Trident/7.0")>=0&&window.navigator.appVersion.indexOf("rv:11.0")>=0;e=r&&"object"==typeof t}var n=t&&t.prototype?t.prototype.constructor===t:!1;return e&&n},t.formatString=function(e){function r(t){var e=t.substring(1,t.length-1),r=parseInt(e);return!o&&r>=0&&a>r?"undefined"==typeof n[r]?"undefined":null===n[r]?"null":n[r].toString():t}for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=t.isUndefinedOrNull(n),a=o?-1:n.length,s=/{[\d]+}/g;return e.replace(s,r)},t.deepClone=function(e){if("undefined"==typeof e||null===e||e===!0||e===!1)return e;if("string"==typeof e||"number"==typeof e)return e;if(Array.isArray(e)){for(var r=[],n=0;n<e.length;++n)r.push(t.deepClone(e[n]));return r}if("undefined"!=typeof i.Map&&e instanceof Map){var o=new Map;return e.forEach(function(e,r){o.set(t.deepClone(r),t.deepClone(e))}),o}if("undefined"!=typeof i.Set&&e instanceof Set){var a=new Set;return e.forEach(function(e){a.add(t.deepClone(e))}),a}if(e instanceof Function||"function"==typeof e){var s=e,u=function(){return function(){return s.apply(this,arguments)}}();u.prototype=s.prototype;for(var l in s)s.hasOwnProperty(l)&&(u[l]=s[l]);return u}if(e instanceof Object||"object"==typeof e){var h=Object.create(null);if("function"==typeof e.hasOwnProperty)for(var l in e)e.hasOwnProperty(l)&&(h[l]=t.deepClone(e[l]));else for(var l in e)h[l]=t.deepClone(e[l]);return h}},t.trace=function(e,r){t.isUndefined(r)?console.info(e,r):console.info(e),console.trace()},t.colorToCssSharp=function(e){return e|=0,"#"+t.padLeft(e.toString(16),6,"0")},t.colorToCssRgba=function(t){t|=0;var e=t>>24&255,r=t>>16&255,n=t>>8&255,i=255&t;return"rgba("+r+", "+n+", "+i+", "+e+")"},t.rgb=function(e,r,n){return t.rgba(e,r,n,255)},t.rgba=function(t,e,r,n){return(255&n)<<24|(255&t)<<16|(255&e)<<8|255&r},t.decomposeRgb=function(t){var e=t>>16&255,r=t>>8&255,n=255&t;return{r:e,g:r,b:n,a:255}},t.decomposeRgba=function(t){var e=t>>24&255,r=t>>16&255,n=t>>8&255,i=255&t;return{r:r,g:n,b:i,a:e}},t.padLeft=function(t,e,r){for(;t.length<e;)t=r+t;return t.length>e&&(t=t.substring(t.length-e,t.length-1)),t},t.remove=function(t,e,r){if(void 0===r&&(r=null),"function"!=typeof r){var n=t.indexOf(e);return n>=0?(t.splice(n,1),!0):!1}for(var i=0;i<t.length;++i)if(r(e,t[i]))return t.splice(i,1),!0;return!1},t.removeAll=function(t,e,r){void 0===r&&(r=null);for(var i="function"==typeof r?r:n,o=0,a=t.length,s=0;a>s;++s)i(e,t[s])&&(t.splice(s,1),--s,--a,++o);return o},t.removeAt=function(t,e){return e|=0,e>=0&&e<t.length?(t.splice(e,1),!0):!1},t}();r.GLUtil=o},{}],96:[function(t,e,r){"use strict";var n=function(){function t(){}return t.clamp=function(t,e,r){return e>t&&(t=e),t>r&&(t=r),t},t.isValueBetweenNotEquals=function(t,e,r){return t>e&&r>t},t.isValueBetweenEquals=function(t,e,r){return t>=e&&r>=t},t.isPowerOfTwo=function(e){var r=0|e;return r!=e||t.isNaN(r)||!isFinite(r)?!1:r>0&&0===(r&r-1)},t.power2Roundup=function(t){return 0>t?0:(--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1)},t.complementToNegative=function(t){return-(~t+1)},t.isByteComplement=function(t){return 0!==(255&t&128)},t.isInt32Complement=function(t){return 0!==(4294967295&t&2147483648)},t.clampUpper=function(t,e){return t>e?e:t},t.clampLower=function(t,e){return e>t?e:t},t.isNaN=function(t){return t!==t},t}();r.MathUtil=n},{}],97:[function(t,e,r){"use strict";var n=function(){function t(){}return t.requestAnimationFrame=function(t){return window.requestAnimationFrame(t)},t.cancelAnimationFrame=function(t){window.cancelAnimationFrame(t)},t}();r.VisualUtil=n},{}],98:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./EngineBase")),n(t("./ErrorBase")),n(t("./GLUtil")),n(t("./MathUtil")),n(t("./VisualUtil")),n(t("./BitConverter"))},{"./BitConverter":91,"./EngineBase":92,"./ErrorBase":93,"./GLUtil":95,"./MathUtil":96,"./VisualUtil":97}],99:[function(t,e,r){"use strict";function n(t){t.flash=o,t.webgl=a,t.fl=s,t.mx=u}function i(){return c.GLUtil.checkSupportStatus().ok}var o=t("./flash/index");r.flash=o;var a=t("./webgl/index");r.webgl=a;var s=t("./fl/index");r.fl=s;var u=t("./mx/index");r.mx=u;var l=t("./glantern/index");r.glantern=l;var h=t("./glantern/EngineBase");r.EngineBase=h.EngineBase;var c=t("./glantern/GLUtil");r.injectToGlobal=n,r.isSupported=i},{"./fl/index":2,"./flash/index":72,"./glantern/EngineBase":92,"./glantern/GLUtil":95,"./glantern/index":98,"./mx/index":102,"./webgl/index":132}],100:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../flash/display/DisplayObjectContainer"),o=t("../../flash/errors/NotImplementedError"),a=function(t){function e(e,r){t.call(this,e,r)}return n(e,t),e.prototype._$update=function(t){throw new o.NotImplementedError},e.prototype._$render=function(t){throw new o.NotImplementedError},e}(i.DisplayObjectContainer);r.Canvas=a},{"../../flash/display/DisplayObjectContainer":28,"../../flash/errors/NotImplementedError":52}],101:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./Canvas"))},{"./Canvas":100}],102:[function(t,e,r){"use strict";var n=t("./containers/index");r.containers=n},{"./containers/index":101}],103:[function(t,e,r){"use strict";var n=function(){function t(){this.name=null,this.value=void 0,this.location=-1}return t}();r.AttributeCache=n},{}],104:[function(t,e,r){"use strict";var n=function(){function t(t){this._filterManager=null,this._flipY=!1,this._flipX=!1,this._referenceCount=0,this._filterManager=t}return t.prototype.notifyAdded=function(){this._referenceCount<=0&&this._$initialize(),this._referenceCount++},t.prototype.notifyRemoved=function(){this._referenceCount--,this._referenceCount<=0&&this._$dispose()},t.prototype.dispose=function(){this._$dispose()},t.prototype.initialize=function(){this._$initialize()},Object.defineProperty(t.prototype,"filterManager",{get:function(){return this._filterManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipX",{get:function(){return this._flipX},set:function(t){this._flipX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return this._flipY},set:function(t){this._flipY=t},enumerable:!0,configurable:!0}),t.prototype._$initialize=function(){},t.prototype._$dispose=function(){},t}();r.FilterBase=n},{}],105:[function(t,e,r){"use strict";var n=t("./RenderHelper"),i=function(){function t(t){this._tempTarget=null,this._renderer=null,this._filterGroups=null,this._renderer=t,this._filterGroups=[],this._tempTarget=t.createRenderTarget()}return t.prototype.dispose=function(){this._renderer.releaseRenderTarget(this._tempTarget),this.clearFilterGroups(),this._tempTarget=null,this._filterGroups=null,this._renderer=null},t.prototype.clearFilterGroups=function(){var t,e=this._filterGroups;if(e.length>0)for(var r=0;r<e.length;++r)for(t=e[r];t.length>0;)t.pop();for(;e.length>0;)e.pop()},t.prototype.pushFilterGroup=function(t){this._filterGroups.push(t.slice())},t.prototype.popFilterGroup=function(){return this.hasFilterGroups?this._filterGroups.pop():null},Object.defineProperty(t.prototype,"hasFilterGroups",{get:function(){return this._filterGroups.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),t.prototype.processFilters=function(t,e,r,i){if(e===r)return void console.warn("Filter alert: input and output are the same, processing aborted.");if(this.hasFilterGroups){var o,a=this._filterGroups[this._filterGroups.length-1],s=e,u=this._tempTarget;u.clear();for(var l,h=0;h<a.length;h++)o=a[h],null!==o&&(o.process(t,s,u,!0),l=s,s=u,u=l);n.RenderHelper.copyTargetContent(t,s,r,!1,!0,i)}},t}();r.FilterManager=i},{"./RenderHelper":108}],106:[function(t,e,r){"use strict";var n=Object.create(null),i=function(){function t(){}return Object.defineProperty(t,"buffered",{get:function(){return n.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blur",{get:function(){return n.blur},enumerable:!0,configurable:!0}),Object.defineProperty(t,"primitive",{get:function(){return n.primitive},enumerable:!0,configurable:!0}),Object.defineProperty(t,"colorTransform",{get:function(){return n.colorTransform},enumerable:!0,configurable:!0}),Object.defineProperty(t,"fxaa",{get:function(){return n.fxaa},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blur2",{get:function(){return n.blur2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"copyImage",{get:function(){return n.copyImage},enumerable:!0,configurable:!0}),t}();r.FragmentShaders=i,n.buffered="\n    precision mediump float;\n\n    uniform sampler2D uSampler;\n\n    varying vec2 vTextureCoord;\n\n    void main() {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n    }\n",n.blur="\n    precision lowp float;\n\n    varying vec2 vTextureCoord;\n    varying vec2 vBlurTexCoords[6];\n\n    uniform sampler2D uSampler;\n\n    void main()\n    {\n       gl_FragColor = vec4(0.0);\n\n       gl_FragColor += texture2D(uSampler, vBlurTexCoords[0]) * 0.004431848411938341;\n       gl_FragColor += texture2D(uSampler, vBlurTexCoords[1]) * 0.05399096651318985;\n       gl_FragColor += texture2D(uSampler, vBlurTexCoords[2]) * 0.2419707245191454;\n       gl_FragColor += texture2D(uSampler, vTextureCoord    ) * 0.3989422804014327;\n       gl_FragColor += texture2D(uSampler, vBlurTexCoords[3]) * 0.2419707245191454;\n       gl_FragColor += texture2D(uSampler, vBlurTexCoords[4]) * 0.05399096651318985;\n       gl_FragColor += texture2D(uSampler, vBlurTexCoords[5]) * 0.004431848411938341;\n    }\n",n.primitive=["precision mediump float;","","uniform float uAlpha;","","varying vec4 vVertexColor;","","void main() {","   gl_FragColor = vVertexColor * uAlpha;","}"].join("\n"),n.colorTransform="\n    precision mediump float;\n\n    varying vec2 vTextureCoord;\n    uniform sampler2D uSampler;\n    uniform float uColorMatrix[25];\n\n    void main(void)\n    {\n       vec4 c = texture2D(uSampler, vTextureCoord);\n\n       gl_FragColor.r =  (uColorMatrix[0] * c.r);\n       gl_FragColor.r += (uColorMatrix[1] * c.g);\n       gl_FragColor.r += (uColorMatrix[2] * c.b);\n       gl_FragColor.r += (uColorMatrix[3] * c.a);\n       gl_FragColor.r +=  uColorMatrix[4];\n\n       gl_FragColor.g =  (uColorMatrix[5] * c.r);\n       gl_FragColor.g += (uColorMatrix[6] * c.g);\n       gl_FragColor.g += (uColorMatrix[7] * c.b);\n       gl_FragColor.g += (uColorMatrix[8] * c.a);\n       gl_FragColor.g +=  uColorMatrix[9];\n\n       gl_FragColor.b =  (uColorMatrix[10] * c.r);\n       gl_FragColor.b += (uColorMatrix[11] * c.g);\n       gl_FragColor.b += (uColorMatrix[12] * c.b);\n       gl_FragColor.b += (uColorMatrix[13] * c.a);\n       gl_FragColor.b +=  uColorMatrix[14];\n\n       gl_FragColor.a =  (uColorMatrix[15] * c.r);\n       gl_FragColor.a += (uColorMatrix[16] * c.g);\n       gl_FragColor.a += (uColorMatrix[17] * c.b);\n       gl_FragColor.a += (uColorMatrix[18] * c.a);\n       gl_FragColor.a +=  uColorMatrix[19];\n    }\n",n.fxaa="\n    precision lowp float;\n\n    #ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n    #endif\n    #ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n    #endif\n    #ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n    #endif\n\n    vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n    vec2 v_rgbNW, vec2 v_rgbNE,\n    vec2 v_rgbSW, vec2 v_rgbSE,\n    vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n    }\n\n    varying vec2 vTextureCoord;\n    varying vec2 vResolution;\n\n    varying vec2 v_rgbNW;\n    varying vec2 v_rgbNE;\n    varying vec2 v_rgbSW;\n    varying vec2 v_rgbSE;\n    varying vec2 v_rgbM;\n\n    uniform sampler2D uSampler;\n\n    void main() {\n        gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n    }\n",n.blur2="\n    precision lowp float;\n\n    uniform sampler2D uSampler;\n    \n    uniform float uResolution;\n    uniform float uStrength;\n    uniform vec2 uBlurDirection;\n\n    varying vec2 vTextureCoord;\n\n    float offset[3];\n    float weight[3];\n\n    void main()\n    {\n        offset[0] = 0.0; offset[1] = 1.3846153846; offset[2] = 3.2307692308;\n        weight[0] = 0.2270270270; weight[1] = 0.3162162162; weight[2] = 0.0702702703;\n        gl_FragColor = texture2D(uSampler, vec2(vTextureCoord)) * weight[0];\n        float xDir = uBlurDirection.x / sqrt(uBlurDirection.x * uBlurDirection.x + uBlurDirection.y * uBlurDirection.y);\n        float yDir = uBlurDirection.y / sqrt(uBlurDirection.x * uBlurDirection.x + uBlurDirection.y * uBlurDirection.y);\n        for (int i = 1; i < 3; i++)\n        {\n            gl_FragColor += texture2D(uSampler, (vec2(vTextureCoord) + vec2(offset[i] * xDir, offset[i] * yDir) * uStrength / uResolution)) * weight[i];\n            gl_FragColor += texture2D(uSampler, (vec2(vTextureCoord) - vec2(offset[i] * xDir, offset[i] * yDir) * uStrength / uResolution)) * weight[i];\n        }\n    }\n",n.copyImage="\n    precision mediump float;\n\n    uniform sampler2D uSampler;\n    uniform float uAlpha;\n\n    varying vec2 vTextureCoord;\n\n    void main() {\n        gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n    }\n"},{}],107:[function(t,e,r){"use strict";var n=t("../glantern/GLUtil"),i=window.WebGLRenderingContext,o=function(){function t(){this._glc=null,this._isDirty=!0,this._bufferType=0,this._elementGLType=0,this._webglBuffer=null,this._array=null,this._arrayType=null,this._typedArray=null}return t.create=function(e,r,n,i){var o=t.getTypedArrayType(n);if(null===o)return console.warn("Failed to create typed array whose elements are of WebGL type 0x"+n.toString(16)),null;var a=new t;return a._glc=e,a._elementGLType=n,a._webglBuffer=e.createBuffer(),null==a._webglBuffer?(console.warn("Failed to create WebGL buffer."),null):(a._arrayType=o,a._bufferType=i,a.setNewData(r),a.becomeDirty(),a.syncBufferData(),a)},Object.defineProperty(t.prototype,"webglBuffer",{get:function(){return this._webglBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementSize",{get:function(){return this._typedArray.BYTES_PER_ELEMENT},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementCount",{get:function(){return this._typedArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementGLType",{get:function(){return this._elementGLType},enumerable:!0,configurable:!0}),t.prototype.setNewData=function(t){n.GLUtil.isUndefinedOrNull(t)?this._array=[]:this._array=t.slice()},t.prototype.becomeDirty=function(){this._isDirty=!0},t.prototype.syncBufferData=function(){if(this._isDirty){var t=this._arrayType;this._typedArray=new t(this._array),this._isDirty=!1}this._glc.bindBuffer(this._bufferType,this._webglBuffer),this._glc.bufferData(this._bufferType,this._typedArray,i.DYNAMIC_DRAW)},t.prototype.dispose=function(){this._glc.deleteBuffer(this._webglBuffer),this._array=null,this._typedArray=null,this._webglBuffer=null,this._glc=null},t.getTypedArrayType=function(t){switch(t){case i.FLOAT:return Float32Array;case i.UNSIGNED_SHORT:return Uint16Array;case i.UNSIGNED_INT:return Uint32Array;case i.UNSIGNED_BYTE:return Uint8Array;case i.INT:return Int32Array;case i.SHORT:return Int16Array;case i.BYTE:return Int8Array;default:return null}},t}();r.PackedArrayBuffer=o},{"../glantern/GLUtil":95}],108:[function(t,e,r){"use strict";function n(t,e){return s.GLUtil.isUndefinedOrNull(t)?(console.warn("Cannot render a null RenderTarget2D onto another RenderTarget2D."),!1):null===t.texture?(console.warn("Cannot use a RenderTarget2D without texture-based frame buffer to render onto another RenderTarget2D."),!1):t.isRoot?(console.warn("Cannot use a root RenderTarget2D as source."),!1):t===e?(console.warn("Source and destination must not be the same RenderTarget2D."),!1):!0}var i=t("./RenderTarget2D"),o=t("./PackedArrayBuffer"),a=t("./ShaderID"),s=t("../glantern/GLUtil"),u=window.WebGLRenderingContext,l=function(){function t(){}return t.renderPrimitives=function(t,e,r,n,i,o){t.shaderManager.selectShader(a.ShaderID.PRIMITIVE);var s,l=t.shaderManager.currentShader,h=t.context;e.activate(),l.syncUniforms(),r.syncBufferData(),s=l.getAttributeLocation("aVertexPosition"),h.vertexAttribPointer(s,3,r.elementGLType,!1,3*r.elementSize,0),h.enableVertexAttribArray(s),n.syncBufferData(),s=l.getAttributeLocation("aVertexColor"),h.vertexAttribPointer(s,4,n.elementGLType,!1,4*n.elementSize,0),h.enableVertexAttribArray(s),i.syncBufferData(),o&&e.clear(),h.viewport(0,0,e.originalWidth,e.originalHeight),h.drawElements(u.TRIANGLES,i.elementCount,i.elementGLType,0)},t.renderPrimitives2=function(t,e,r,n,i,o,s,l){t.shaderManager.selectShader(a.ShaderID.PRIMITIVE2);var h,c=t.shaderManager.currentShader,f=t.context;e.activate(),c.setOriginalSize([e.originalWidth,e.originalHeight]),c.setFlipX(o),c.setFlipY(s),c.syncUniforms(),r.syncBufferData(),h=c.getAttributeLocation("aVertexPosition"),f.vertexAttribPointer(h,3,r.elementGLType,!1,3*r.elementSize,0),f.enableVertexAttribArray(h),n.syncBufferData(),h=c.getAttributeLocation("aVertexColor"),f.vertexAttribPointer(h,4,n.elementGLType,!1,4*n.elementSize,0),f.enableVertexAttribArray(h),i.syncBufferData(),l&&e.clear(),f.viewport(0,0,e.originalWidth,e.originalHeight),f.drawElements(u.TRIANGLES,i.elementCount,i.elementGLType,0)},t.copyTargetContent=function(e,r,n,i,o,s){t.renderBuffered(e,r,n,a.ShaderID.REPLICATE,s,function(t){var e=t.shaderManager.currentShader;e.setFlipX(i),e.setFlipY(o),(i||o)&&(e.setOriginalSize([n.originalWidth,n.originalHeight]),e.setFitSize([n.fitWidth,n.fitHeight]))})},t.copyImageContent=function(e,r,n,i,o,s,u,l){t.renderBuffered(e,r,n,a.ShaderID.COPY_IMAGE,l,function(t){var e=t.shaderManager.currentShader;e.setFlipX(i),e.setFlipY(o),e.setAlpha(u),e.setTransform(s),(i||o)&&(e.setOriginalSize([n.originalWidth,n.originalHeight]),e.setFitSize([n.fitWidth,n.fitHeight]))})},t.renderImage=function(e,r,n,i){t.renderBuffered(e,r,n,a.ShaderID.COPY_IMAGE,i,function(t){var e=t.shaderManager.currentShader;e.setFlipX(!1),e.setFlipY(!1)})},t.renderBuffered=function(e,r,a,s,l,h){if(n(r,a)){var c=e.context;e.shaderManager.selectShader(s),h(e);var f=e.shaderManager.currentShader;if(f.setTexture(r.texture),f.syncUniforms(),null===t._glVertexPositionBuffer){var p=[0,r.fitHeight,0,r.fitWidth,r.fitHeight,0,0,0,0,r.fitWidth,0,0];t._glVertexPositionBuffer=o.PackedArrayBuffer.create(c,p,u.FLOAT,u.ARRAY_BUFFER)}var d;if(d=f.getAttributeLocation("aVertexPosition"),d>=0){var _=t._glVertexPositionBuffer;_.syncBufferData(),c.vertexAttribPointer(d,3,_.elementGLType,!1,3*_.elementSize,0),c.enableVertexAttribArray(d)}if(d=f.getAttributeLocation("aTextureCoord"),d>=0){var g=i.RenderTarget2D.textureCoords;g.syncBufferData(),c.vertexAttribPointer(d,2,g.elementGLType,!1,2*g.elementSize,0),c.enableVertexAttribArray(d)}var b=i.RenderTarget2D.textureIndices;b.syncBufferData(),a.activate(),l&&a.clear(),c.viewport(0,0,a.originalWidth,a.originalHeight),c.enable(u.SCISSOR_TEST),c.scissor(0,0,r.originalWidth,r.originalHeight),c.drawElements(u.TRIANGLES,b.elementCount,b.elementGLType,0),c.disable(u.SCISSOR_TEST)}},t._glVertexPositionBuffer=null,t}();r.RenderHelper=l},{"../glantern/GLUtil":95,"./PackedArrayBuffer":107,"./RenderTarget2D":109,"./ShaderID":111}],109:[function(t,e,r){"use strict";function n(t){if(!s){var e=[0,1,1,1,0,0,1,0],r=[0,1,2,1,2,3];u.textureCoords=i.PackedArrayBuffer.create(t,e,a.FLOAT,a.ARRAY_BUFFER),u.textureIndices=i.PackedArrayBuffer.create(t,r,a.UNSIGNED_SHORT,a.ELEMENT_ARRAY_BUFFER),s=!0}}var i=t("./PackedArrayBuffer"),o=t("../glantern/MathUtil"),a=window.WebGLRenderingContext,s=!1,u=function(){function t(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1),this._glc=null,this._renderer=null,this._frameBuffer=null,this._depthBuffer=null,this._texture=null,this._originalWidth=0,this._originalHeight=0,this._fitWidth=0,this._fitHeight=0,this._image=null,this._isRoot=!1,s||n(t.context),this._renderer=t,this.__initialize(t.context,t.view.width,t.view.height,e,r)}return t.prototype.dispose=function(){var t=this._glc;t.deleteTexture(this._texture),t.deleteFramebuffer(this._frameBuffer),t.deleteRenderbuffer(this._depthBuffer),this._texture=null,this._frameBuffer=null,this._depthBuffer=null,this._glc=null,this._renderer=null},Object.defineProperty(t.prototype,"originalWidth",{get:function(){return this._originalWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){return this._originalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitWidth",{get:function(){return this._fitWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitHeight",{get:function(){return this._fitHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return this._isRoot},enumerable:!0,configurable:!0}),t.prototype.activate=function(){var t=this._glc;t.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer)},t.prototype.clear=function(){this.activate();var t=this._glc;t.viewport(0,0,this._fitWidth,this._fitHeight),t.clearColor(0,0,0,0),t.clearDepth(0),t.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},t.prototype.resize=function(t,e){this.__resize(t,e,!0)},t.prototype.updateImageContent=function(){var t=this._image;if(null!==this._texture&&null!==t){var e=this._glc;e.bindTexture(a.TEXTURE_2D,this._texture),e.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t),e.bindTexture(a.TEXTURE_2D,null)}},t.prototype.updateImageSize=function(){var t=this._image;if(null!==this._texture&&null!==t){try{t.width=o.MathUtil.power2Roundup(t.width),t.height=o.MathUtil.power2Roundup(t.height)}catch(e){}this._originalWidth=this._fitWidth=t.width,this._originalHeight=this._fitHeight=t.height}},t.prototype.__initialize=function(t,e,r,n,i){function o(e){t.deleteFramebuffer(this._frameBuffer),t.deleteRenderbuffer(this._depthBuffer),t.deleteTexture(this._texture),console.warn(e)}if(this._glc=t,this._isRoot=i,this._image=n,!i){if(this._frameBuffer=t.createFramebuffer(),null===this._frameBuffer)return o("Failed to create the frame buffer.");if(this._depthBuffer=t.createRenderbuffer(),null===this._depthBuffer)return o("Failed to create the depth buffer.");if(this._texture=t.createTexture(),null===this._texture)return o("Failed to create the underlying texture.")}if(this.__resize(e,r,!1),!i){t.bindFramebuffer(a.FRAMEBUFFER,this._frameBuffer),t.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._texture,0),t.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,this._depthBuffer);var s=t.checkFramebufferStatus(a.FRAMEBUFFER);if(s!==a.FRAMEBUFFER_COMPLETE)return o("Frame buffer is not complete: code 0x"+s.toString(16))}t.bindRenderbuffer(a.RENDERBUFFER,null),t.bindTexture(a.TEXTURE_2D,null),t.bindFramebuffer(a.FRAMEBUFFER,null)},t.prototype.__resize=function(t,e,r){var n=this._glc,i=this._image,s=this._isRoot,u=this._texture;null===i?(t|=0,e|=0,this._originalWidth=t,this._originalHeight=e,o.MathUtil.isPowerOfTwo(t)||(t=o.MathUtil.power2Roundup(t)),o.MathUtil.isPowerOfTwo(e)||(e=o.MathUtil.power2Roundup(e)),this._fitWidth=t,this._fitHeight=e):(t=this._originalWidth=this._fitWidth=i.width,e=this._originalHeight=this._fitHeight=i.height),null!==u&&(n.bindTexture(a.TEXTURE_2D,this._texture),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),n.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)),null!==i?null!==u&&n.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i):(n.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,0),null!==u&&n.texImage2D(a.TEXTURE_2D,0,a.RGBA,t,e,0,a.RGBA,a.UNSIGNED_BYTE,null)),s||(n.bindRenderbuffer(a.RENDERBUFFER,this._depthBuffer),n.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,t,e)),r&&(n.bindRenderbuffer(a.RENDERBUFFER,null),n.bindTexture(a.TEXTURE_2D,null))},t.textureCoords=null,t.textureIndices=null,t}();r.RenderTarget2D=u},{"../glantern/MathUtil":96,"./PackedArrayBuffer":107}],110:[function(t,e,r){"use strict";function n(t,e,r){var n=t.createShader(r);if(null===n)return console.warn("Cannot create shader."),null;t.shaderSource(n,e),t.compileShader(n);var i=t.getShaderParameter(n,u.COMPILE_STATUS);if(!i){var o=t.getShaderInfoLog(n);return console.warn("Failed to load shader: "+o),t.deleteShader(n),null}return n}var i=t("./VertexShaders"),o=t("./FragmentShaders"),a=t("./WebGLDataType"),s=t("../glantern/GLUtil"),u=window.WebGLRenderingContext,l=function(){function t(t,e,r,n,i){this._shaderManager=null,this._vertexSource=null,this._fragmentSource=null,this._vertexShader=null,this._fragmentShader=null,this._program=null,this._uniforms=null,this._attributes=null,this._id=-1,this._glc=null,this._shaderManager=t,this._vertexSource=e,this._fragmentSource=r,this._id=t.getNextAvailableID(),this.__initialize(t.context,e,r),this.select(),s.GLUtil.isUndefinedOrNull(n)||s.GLUtil.isUndefinedOrNull(i)?(this._uniforms=new Map,this._attributes=new Map,this._$localInit(t,this._uniforms,this._attributes)):(this._uniforms=n,this._attributes=i),this.__cacheUniformLocations(),this.__cacheAttributeLocations(),this.syncUniforms()}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this._glc;t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._glc=null,this._uniforms=null,this._attributes=null,this._vertexShader=null,this._fragmentShader=null,this._vertexSource=null,this._fragmentSource=null,this._shaderManager=null},t.prototype.syncUniforms=function(){var t=this;this._uniforms.forEach(function(e){t.__syncUniform(e)})},t.prototype.changeValue=function(t,e){var r=this._uniforms.get(t);void 0!==r&&null!==r&&e(r)},t.prototype.select=function(){this._glc.useProgram(this._program)},t.prototype.getUniformLocation=function(t){return null!==this._program?this._glc.getUniformLocation(this._program,t):null},t.prototype.getAttributeLocation=function(t){return null!==this._program?this._glc.getAttribLocation(this._program,t):-1},Object.defineProperty(t.prototype,"vertexSource",{get:function(){return this._vertexSource},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fragmentSource",{get:function(){return this._fragmentSource},enumerable:!0,configurable:!0}),t.prototype._$localInit=function(t,e,r){},t.prototype.__initialize=function(t,e,r){function i(e,r){null!==this._vertexShader&&t.deleteShader(this._vertexShader),null!==this._fragmentShader&&t.deleteShader(this._fragmentShader),null!==this._program&&t.deleteProgram(this._program),this._vertexShader=this._fragmentShader=this._program=null,void 0!==e&&null!==e&&(void 0!==r?console.warn(e,r):console.warn(e))}if(this._glc=t,this._vertexShader=n(t,e,u.VERTEX_SHADER),this._fragmentShader=n(t,r,u.FRAGMENT_SHADER),null===this._vertexShader||null===this._fragmentShader)return i("Vertex shader or fragment shader is null.");if(this._program=t.createProgram(),null===this._program)return i("Failed to create program.");t.attachShader(this._program,this._vertexShader),t.attachShader(this._program,this._fragmentShader),t.linkProgram(this._program);var o=t.getProgramParameter(this._program,u.LINK_STATUS);if(!o){var a=t.getProgramInfoLog(this._program);return i("Failed to link program: ",a)}},t.prototype.__syncUniform=function(t){var e=t.location,r=t.value,n=this._glc,i=0,o=0;switch(t.type){case a.WebGLDataType.UBool:n.uniform1i(e,r?1:0);break;case a.WebGLDataType.U1I:n.uniform1i(e,r);break;case a.WebGLDataType.U1F:n.uniform1f(e,r);break;case a.WebGLDataType.U2F:n.uniform2f(e,r[0],r[1]);break;case a.WebGLDataType.U3F:n.uniform3f(e,r[0],r[1],r[2]);break;case a.WebGLDataType.U4F:n.uniform4f(e,r[0],r[1],r[2],r[3]);break;case a.WebGLDataType.UV2:n.uniform2f(e,r.x,r.y);break;case a.WebGLDataType.UV3:n.uniform3f(e,r.x,r.y,r.z);break;case a.WebGLDataType.UV4:n.uniform4f(e,r.x,r.y,r.z,r.w);break;case a.WebGLDataType.U1IV:n.uniform1iv(e,r);break;case a.WebGLDataType.U2IV:n.uniform2iv(e,r);break;case a.WebGLDataType.U3IV:n.uniform3iv(e,r);break;case a.WebGLDataType.U4IV:n.uniform4iv(e,r);break;case a.WebGLDataType.U1FV:n.uniform1fv(e,r);break;case a.WebGLDataType.U2FV:n.uniform2fv(e,r);break;case a.WebGLDataType.U3FV:n.uniform3fv(e,r);break;case a.WebGLDataType.U4FV:n.uniform4fv(e,r);break;case a.WebGLDataType.UMat2:n.uniformMatrix2fv(e,t.transpose,r);break;case a.WebGLDataType.UMat3:n.uniformMatrix3fv(e,t.transpose,r);break;case a.WebGLDataType.UMat4:n.uniformMatrix4fv(e,t.transpose,r);break;case a.WebGLDataType.UIV:n.uniform3iv(e,r);break;case a.WebGLDataType.UFV:n.uniform3fv(e,r);break;case a.WebGLDataType.UV2V:for(t.array||(t.array=new Float32Array(2*r.length)),i=0,o=r.length;o>i;i++)t.array[2*i]=r[i].x,t.array[2*i+1]=r[i].y;n.uniform2fv(e,t.array);break;case a.WebGLDataType.UV3V:for(t.array||(t.array=new Float32Array(3*r.length)),i=0,o=r.length;o>i;i++)t.array[3*i]=r[i].x,t.array[3*i+1]=r[i].y,t.array[3*i+2]=r[i].z;
n.uniform2fv(e,t.array);break;case a.WebGLDataType.UV4V:for(t.array||(t.array=new Float32Array(4*r.length)),i=0,o=r.length;o>i;i++)t.array[4*i]=r[i].x,t.array[4*i+1]=r[i].y,t.array[4*i+2]=r[i].z,t.array[4*i+3]=r[i].w;n.uniform2fv(e,t.array);break;case a.WebGLDataType.USampler2D:n.activeTexture(u["TEXTURE"+r.toString()]),n.bindTexture(u.TEXTURE_2D,t.texture),n.uniform1i(e,r);break;default:console.warn("Uniform ["+t.name+"]: unknown format "+t.type)}},t.prototype.__cacheUniformLocations=function(){var t=this._glc,e=this._program;this._uniforms.forEach(function(r,n){r.location=t.getUniformLocation(e,n)})},t.prototype.__cacheAttributeLocations=function(){var t=this._glc,e=this._program;this._attributes.forEach(function(r,n){r.location=t.getAttribLocation(e,n)})},t.SHADER_CLASS_NAME="ShaderBase",t.FRAGMENT_SOURCE=o.FragmentShaders.buffered,t.VERTEX_SOURCE=i.VertexShaders.buffered,t}();r.ShaderBase=l},{"../glantern/GLUtil":95,"./FragmentShaders":106,"./VertexShaders":114,"./WebGLDataType":115}],111:[function(t,e,r){"use strict";var n=function(){function t(){}return Object.defineProperty(t,"PRIMITIVE",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BLUR_X",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BLUR_Y",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"REPLICATE",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t,"COLOR_TRANSFORM",{get:function(){return 4},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FXAA",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BLUR2",{get:function(){return 6},enumerable:!0,configurable:!0}),Object.defineProperty(t,"COPY_IMAGE",{get:function(){return 7},enumerable:!0,configurable:!0}),Object.defineProperty(t,"PRIMITIVE2",{get:function(){return 8},enumerable:!0,configurable:!0}),t}();r.ShaderID=n},{}],112:[function(t,e,r){"use strict";var n=t("./shaders/PrimitiveShader"),i=t("./shaders/BlurXShader"),o=t("./shaders/BlurYShader"),a=t("./shaders/ReplicateShader"),s=t("./shaders/ColorTransformShader"),u=t("./shaders/FxaaShader"),l=t("./shaders/Blur2Shader"),h=t("./shaders/CopyImageShader"),c=t("./shaders/Primitive2Shader"),f=function(){function e(t){this._renderer=null,this._shaders=null,this._currentShader=null,this._renderer=t,this._shaders=[],this.__insertShaders()}return e.prototype.dispose=function(){for(var t=0;t<this._shaders.length;++t)this._shaders[t].dispose();this._currentShader=null,this._renderer=null,this._shaders=null},e.prototype.getNextAvailableID=function(){return this._shaders.length},e.prototype.loadShader=function(e,r,n){var i=-1;try{var o=t("./shaders/"+e+"Shader"),a=(o.SHADER_CLASS_NAME,null);a=new o(this,o.VERTEX_SOURCE,o.FRAGMENT_SOURCE,r,n),this._shaders.push(a),i=a.id}catch(s){}return i},e.prototype.selectShader=function(t){var e=this.__getShader(t);null!==e&&(e.select(),this._currentShader=e)},Object.defineProperty(e.prototype,"currentShader",{get:function(){return this._currentShader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._renderer.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),e.prototype.__getShader=function(t){var e=null;try{e=this._shaders[t]}catch(r){}return e},e.prototype.__insertShaders=function(){var t=this._shaders;t.push(new n.PrimitiveShader(this)),t.push(new i.BlurXShader(this)),t.push(new o.BlurYShader(this)),t.push(new a.ReplicateShader(this)),t.push(new s.ColorTransformShader(this)),t.push(new u.FxaaShader(this)),t.push(new l.Blur2Shader(this)),t.push(new h.CopyImageShader(this)),t.push(new c.Primitive2Shader(this))},e}();r.ShaderManager=f},{"./shaders/Blur2Shader":133,"./shaders/BlurXShader":134,"./shaders/BlurYShader":135,"./shaders/ColorTransformShader":137,"./shaders/CopyImageShader":138,"./shaders/FxaaShader":139,"./shaders/Primitive2Shader":140,"./shaders/PrimitiveShader":141,"./shaders/ReplicateShader":142}],113:[function(t,e,r){"use strict";var n=t("./WebGLDataType"),i=function(){function t(){this.name=null,this.type=n.WebGLDataType.UUnknown,this.location=null,this.value=void 0,this.transpose=!1,this.array=null,this.texture=null}return t}();r.UniformCache=i},{"./WebGLDataType":115}],114:[function(t,e,r){"use strict";var n=Object.create(null),i=function(){function t(){}return Object.defineProperty(t,"buffered",{get:function(){return n.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blurX",{get:function(){return n.blurX},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blurY",{get:function(){return n.blurY},enumerable:!0,configurable:!0}),Object.defineProperty(t,"primitive",{get:function(){return n.primitive},enumerable:!0,configurable:!0}),Object.defineProperty(t,"replicate",{get:function(){return n.replicate},enumerable:!0,configurable:!0}),Object.defineProperty(t,"fxaa",{get:function(){return n.fxaa},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blur2",{get:function(){return n.blur2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"copyImage",{get:function(){return n.copyImage},enumerable:!0,configurable:!0}),Object.defineProperty(t,"primitive2",{get:function(){return n.primitive2},enumerable:!0,configurable:!0}),t}();r.VertexShaders=i,n.buffered="\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uProjectionMatrix;\n\n    varying vec2 vTextureCoord;\n\n    void main() {\n       gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n       vTextureCoord = aTextureCoord;\n    }\n",n.blurX="\n    precision mediump float;\n\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform float uStrength;\n    uniform mat4 uProjectionMatrix;\n\n    varying vec2 vTextureCoord;\n    varying vec2 vBlurTexCoords[6];\n\n    void main()\n    {\n        gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n        vTextureCoord = aTextureCoord;\n\n        vBlurTexCoords[0] = aTextureCoord + vec2(-0.012 * uStrength, 0.0);\n        vBlurTexCoords[1] = aTextureCoord + vec2(-0.008 * uStrength, 0.0);\n        vBlurTexCoords[2] = aTextureCoord + vec2(-0.004 * uStrength, 0.0);\n        vBlurTexCoords[3] = aTextureCoord + vec2( 0.004 * uStrength, 0.0);\n        vBlurTexCoords[4] = aTextureCoord + vec2( 0.008 * uStrength, 0.0);\n        vBlurTexCoords[5] = aTextureCoord + vec2( 0.012 * uStrength, 0.0);\n    }\n",n.blurY="\n    precision mediump float;\n\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform float uStrength;\n    uniform mat4 uProjectionMatrix;\n\n    varying vec2 vTextureCoord;\n    varying vec2 vBlurTexCoords[6];\n\n    void main()\n    {\n        gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n        vTextureCoord = aTextureCoord;\n\n        vBlurTexCoords[0] = aTextureCoord + vec2(0.0, -0.012 * uStrength);\n        vBlurTexCoords[1] = aTextureCoord + vec2(0.0, -0.008 * uStrength);\n        vBlurTexCoords[2] = aTextureCoord + vec2(0.0, -0.004 * uStrength);\n        vBlurTexCoords[3] = aTextureCoord + vec2(0.0,  0.004 * uStrength);\n        vBlurTexCoords[4] = aTextureCoord + vec2(0.0,  0.008 * uStrength);\n        vBlurTexCoords[5] = aTextureCoord + vec2(0.0,  0.012 * uStrength);\n    }\n",n.primitive="\n    precision mediump float;\n\n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uProjectionMatrix;\n    uniform mat4 uTransformMatrix;\n\n    varying vec4 vVertexColor;\n\n    void main() {\n       gl_Position = uProjectionMatrix * uTransformMatrix * vec4(aVertexPosition.xyz, 1.0);\n       vVertexColor = aVertexColor;\n    }\n",n.replicate="\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uProjectionMatrix;\n    uniform vec2 uOriginalSize;\n    uniform vec2 uFitSize;\n    uniform bool uFlipX;\n    uniform bool uFlipY;\n\n    varying vec2 vTextureCoord;\n\n    void main() {\n        vec3 newVertexPostion = aVertexPosition;\n       vec2 newTextureCoord = aTextureCoord;\n       if (uFlipX) {\n           newTextureCoord.x = 1.0 - newTextureCoord.x;\n           newVertexPostion.x -= (uFitSize - uOriginalSize).x;\n       }\n       if (uFlipY) {\n           newTextureCoord.y = 1.0 - newTextureCoord.y;\n           newVertexPostion.y -= (uFitSize - uOriginalSize).y;\n       }\n       gl_Position = uProjectionMatrix * vec4(newVertexPostion.xyz, 1.0);\n       vTextureCoord = newTextureCoord;\n    }\n",n.fxaa="\n    precision mediump float;\n\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uProjectionMatrix;\n    uniform vec2 uResolution;\n\n    varying vec2 vTextureCoord;\n    varying vec2 vResolution;\n\n    varying vec2 v_rgbNW;\n    varying vec2 v_rgbNE;\n    varying vec2 v_rgbSW;\n    varying vec2 v_rgbSE;\n    varying vec2 v_rgbM;\n\n    void texcoords(vec2 fragCoord, vec2 resolution,\n       out vec2 v_rgbNW, out vec2 v_rgbNE,\n       out vec2 v_rgbSW, out vec2 v_rgbSE,\n       out vec2 v_rgbM) {\n       vec2 inverseVP = 1.0 / resolution.xy;\n       v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n       v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n       v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n       v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n       v_rgbM = vec2(fragCoord * inverseVP);\n    }\n\n    void main() {\n       gl_Position = uProjectionMatrix * vec4(aVertexPosition, 1.0);\n       vTextureCoord = aTextureCoord;\n       vResolution = uResolution;\n\n       texcoords(aTextureCoord * uResolution, uResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n    }\n",n.blur2="\n    precision mediump float;\n\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uProjectionMatrix;\n\n    varying vec2 vTextureCoord;\n\n    void main()\n    {\n        gl_Position = uProjectionMatrix * vec4(aVertexPosition.xyz, 1.0);\n        vTextureCoord = aTextureCoord;\n    }\n",n.copyImage="\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uProjectionMatrix;\n    uniform mat4 uTransformMatrix;\n    uniform vec2 uOriginalSize;\n    uniform vec2 uFitSize;\n    uniform bool uFlipX;\n    uniform bool uFlipY;\n\n    varying vec2 vTextureCoord;\n\n    void main() {\n        vec3 newVertexPostion = aVertexPosition;\n        vec2 newTextureCoord = aTextureCoord;\n        if (uFlipX) {\n            newTextureCoord.x = 1.0 - newTextureCoord.x;\n            newVertexPostion.x -= (uFitSize - uOriginalSize).x;\n        }\n        if (uFlipY) {\n            newTextureCoord.y = 1.0 - newTextureCoord.y;\n            newVertexPostion.y -= (uFitSize - uOriginalSize).y;\n        }\n        gl_Position = uProjectionMatrix * uTransformMatrix * vec4(newVertexPostion.xyz, 1.0);\n        vTextureCoord = newTextureCoord;\n    }\n",n.primitive2="\n    precision mediump float;\n\n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uProjectionMatrix;\n    uniform mat4 uTransformMatrix;\n    uniform vec2 uOriginalSize;\n    uniform bool uFlipX;\n    uniform bool uFlipY;\n\n    varying vec4 vVertexColor;\n\n    void main() {\n        vec3 newVertexPostion = aVertexPosition;\n        if (uFlipX) {\n            newVertexPostion.x = uOriginalSize.x - newVertexPostion.x;\n        }\n        if (uFlipY) {\n            newVertexPostion.y = uOriginalSize.y - newVertexPostion.y;\n        }\n        gl_Position = uProjectionMatrix * uTransformMatrix * vec4(newVertexPostion.xyz, 1.0);\n        vVertexColor = aVertexColor;\n    }\n"},{}],115:[function(t,e,r){"use strict";!function(t){t[t.UUnknown=0]="UUnknown",t[t.UBool=1]="UBool",t[t.U1I=2]="U1I",t[t.U1F=3]="U1F",t[t.U2F=4]="U2F",t[t.U3F=5]="U3F",t[t.U4F=6]="U4F",t[t.UV2=7]="UV2",t[t.UV3=8]="UV3",t[t.UV4=9]="UV4",t[t.U1IV=10]="U1IV",t[t.U2IV=11]="U2IV",t[t.U3IV=12]="U3IV",t[t.U4IV=13]="U4IV",t[t.U1FV=14]="U1FV",t[t.U2FV=15]="U2FV",t[t.U3FV=16]="U3FV",t[t.U4FV=17]="U4FV",t[t.UMat2=18]="UMat2",t[t.UMat3=19]="UMat3",t[t.UMat4=20]="UMat4",t[t.UIV=21]="UIV",t[t.UFV=22]="UFV",t[t.UV2V=23]="UV2V",t[t.UV3V=24]="UV3V",t[t.UV4V=25]="UV4V",t[t.USampler2D=26]="USampler2D"}(r.WebGLDataType||(r.WebGLDataType={}));r.WebGLDataType},{}],116:[function(t,e,r){"use strict";var n=t("libtess"),i=t("./ShaderManager"),o=t("./FilterManager"),a=t("./RenderTarget2D"),s=t("./WebGLUtils"),u=t("../flash/display/BlendMode"),l=t("../glantern/GLUtil"),h=t("../flash/errors/ArgumentError"),c=window.WebGLRenderingContext,f=function(){function t(t,e,r){if(this._currentRenderTarget=null,this._currentBlendMode=null,this._screenTarget=null,this._filterManager=null,this._shaderManager=null,this._tessellator=null,this._context=null,this._options=null,this._isInitialized=!1,"number"==typeof t)this.__initialize(r,null,t,e);else{if(!(t instanceof HTMLCanvasElement))throw new h.ArgumentError("Invalid constructor parameters.");this.__initialize(e,t)}}return t.prototype.clear=function(){null!==this._screenTarget&&this._screenTarget.clear()},t.prototype.dispose=function(){this._isInitialized&&(this._screenTarget.dispose(),this._filterManager.dispose(),this._shaderManager.dispose(),this._filterManager=null,this._shaderManager=null,this._screenTarget=null,this._context=null,null!==this._view.parentNode&&void 0!==this._view.parentNode&&this._view.parentNode.removeChild(this._view),this._view=null)},t.prototype.setRenderTarget=function(t){void 0===t&&(t=null),t===this._currentRenderTarget&&null!==t||(l.GLUtil.isUndefinedOrNull(t)?this._currentRenderTarget=this._screenTarget:this._currentRenderTarget=t,this._currentRenderTarget.activate())},Object.defineProperty(t.prototype,"currentRenderTarget",{get:function(){return this._currentRenderTarget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shaderManager",{get:function(){return this._shaderManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterManager",{get:function(){return this._filterManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tessellator",{get:function(){return this._tessellator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screenTarget",{get:function(){return this._screenTarget},enumerable:!0,configurable:!0}),t.prototype.createRenderTarget=function(t){return void 0===t&&(t=null),new a.RenderTarget2D(this,t,!1)},t.prototype.createRootRenderTarget=function(t){return void 0===t&&(t=null),new a.RenderTarget2D(this,t,!0)},t.prototype.releaseRenderTarget=function(t){null!==t&&void 0!==t&&t.dispose()},t.prototype.setBlendMode=function(t){if(this._isInitialized&&this._currentBlendMode!==t){var e=p[t]||p[u.BlendMode.NORMAL],r=this._context;e[0]>=0?r.blendEquation(c.FUNC_ADD):r.blendEquation(c.FUNC_SUBTRACT),r.blendFunc(e[1],e[2]),this._currentBlendMode=t}},t.prototype.__initialize=function(t,e,r,a){if(void 0===e&&(e=null),void 0===r&&(r=400),void 0===a&&(a=300),!this._isInitialized){this._isInitialized=!0,this._options=l.GLUtil.deepClone(t),e||(e=window.document.createElement("canvas"),e.className="glantern-view",e.width=r,e.height=a);var h=Object.create(null);h.alpha=t.transparent,h.antialias=t.antialias,h.premultipliedAlpha=!0,h.depth=!1,this._context=s.WebGLUtils.setupWebGL(e,h),this._view=e;var f=this._context;f.disable(c.DEPTH_TEST),f.disable(c.CULL_FACE),f.enable(c.BLEND),this.setBlendMode(u.BlendMode.NORMAL),this._screenTarget=this.createRootRenderTarget(),e.addEventListener("webglcontextlost",this.__onContextLost.bind(this)),e.addEventListener("webglcontextrestored",this.__onContextRestored.bind(this)),this._tessellator=new n.GluTesselator,this._shaderManager=new i.ShaderManager(this),this._filterManager=new o.FilterManager(this),this.setRenderTarget(null),this.__initializeTessellator()}},t.prototype.__initializeTessellator=function(){var t=this._tessellator;t.gluTessCallback(n.gluEnum.GLU_TESS_VERTEX_DATA,function(t,e){e[e.length-1].push(t[0],t[1],t[2])}),t.gluTessCallback(n.gluEnum.GLU_TESS_BEGIN_DATA,function(t,e){t!==n.primitiveType.GL_TRIANGLES&&console.warn("{TESS} expected TRIANGLES but got type: "+t),e.push([])}),t.gluTessCallback(n.gluEnum.GLU_TESS_ERROR,function(t){console.warn("{TESS} error number: ",t)}),t.gluTessCallback(n.gluEnum.GLU_TESS_COMBINE,function(t,e,r){return[t[0],t[1],t[2]]}),t.gluTessCallback(n.gluEnum.GLU_TESS_EDGE_FLAG,function(t){})},t.prototype.__onContextLost=function(t){},t.prototype.__onContextRestored=function(t){},t.DEFAULT_OPTIONS={antialias:!0,depth:!1,transparent:!0},t}();r.WebGLRenderer=f;var p=Object.create(null);p[u.BlendMode.ADD]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.ALPHA]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.DARKEN]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.DIFFERENCE]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.ERASE]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.HARDLIGHT]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.INVERT]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.LAYER]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.LIGHTEN]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.MULTIPLY]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.NORMAL]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.OVERLAY]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.SCREEN]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.SHADER]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA],p[u.BlendMode.SUBTRACT]=[1,c.ONE,c.ONE_MINUS_SRC_ALPHA]},{"../flash/display/BlendMode":23,"../flash/errors/ArgumentError":49,"../glantern/GLUtil":95,"./FilterManager":105,"./RenderTarget2D":109,"./ShaderManager":112,"./WebGLUtils":117,libtess:144}],117:[function(t,e,r){"use strict";function n(t,e){var r=i(e);console.error(r),t&&(t.innerHTML=r)}function i(t){return'\n<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>\n<td align="center">\n<div style="display: table-cell; vertical-align: middle;">\n<div>'+t+"</div>\n</div>\n</td></tr></table>"}function o(t,e){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,i=0;i<r.length;++i){try{n=t.getContext(r[i],e)}catch(o){}if(n)break}return n}var a=t("../glantern/GLUtil"),s=window.WebGLRenderingContext,u='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',l='It appears your computer may not support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>',h=function(){function t(){}return t.setupWebGL=function(t,e){if(a.GLUtil.isUndefined(s))return n(t.parentElement,u),null;var r=o(t,e);return r||n(t.parentElement,l),r},t}();r.WebGLUtils=h},{"../glantern/GLUtil":95}],118:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../FilterBase"),o=t("../RenderHelper"),a=t("../ShaderID"),s=t("../../glantern/MathUtil"),u=function(t){function e(e){t.call(this,e),this._tempTarget=null,this._strengthX=5,this._strengthY=5,this._pass=1,this._tempTarget=e.renderer.createRenderTarget()}return n(e,t),Object.defineProperty(e.prototype,"strengthX",{get:function(){return this._strengthX},set:function(t){0>t&&(t=1),this._strengthX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strengthY",{get:function(){return this._strengthY},set:function(t){0>t&&(t=1),this._strengthY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pass",{get:function(){return this._pass},set:function(t){t=0|s.MathUtil.clamp(t,1,3),this._pass=t},enumerable:!0,configurable:!0}),e.prototype.process=function(t,e,r,n){var i=this,s=3,u=e,l=this._tempTarget;l.clear();for(var h,c=0;c<this.pass*s;++c)o.RenderHelper.renderBuffered(t,u,l,a.ShaderID.BLUR2,!0,function(t){var r=t.shaderManager.currentShader;r.setStrength(i.strengthX/4/i.pass/(u.fitWidth/u.originalWidth)),r.setResolution(e.fitWidth),r.setBlurDirection([1,0])}),h=u,u=l,l=h;for(var c=0;c<this.pass*s;++c)o.RenderHelper.renderBuffered(t,u,l,a.ShaderID.BLUR2,!0,function(t){var r=t.shaderManager.currentShader;r.setStrength(i.strengthY/4/i.pass/(u.fitWidth/u.originalWidth)),r.setResolution(e.fitHeight),r.setBlurDirection([0,1])}),h=u,u=l,l=h;o.RenderHelper.copyTargetContent(t,u,r,this.flipX,this.flipY,n)},e.prototype._$initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},e.prototype._$dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},e}(i.FilterBase);r.Blur2Filter=u},{"../../glantern/MathUtil":96,"../FilterBase":104,"../RenderHelper":108,"../ShaderID":111}],119:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./BlurYFilter"),o=t("./BlurXFilter"),a=t("../FilterBase"),s=t("../../glantern/MathUtil"),u=function(t){function e(e){t.call(this,e),this._tempTarget=null,this._strengthX=5,this._strengthY=5,this._pass=1,this._blurXFilter=null,this._blurYFilter=null}return n(e,t),Object.defineProperty(e.prototype,"strengthX",{get:function(){return this._strengthX},set:function(t){0>t&&(t=1),this._strengthX=t,null!==this._blurXFilter&&(this._blurXFilter.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strengthY",{get:function(){return this._strengthY},set:function(t){0>t&&(t=1),this._strengthY=t,null!==this._blurYFilter&&(this._blurYFilter.strength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pass",{get:function(){return this._pass},set:function(t){t=0|s.MathUtil.clamp(t,1,3),this._pass=t,null!==this._blurXFilter&&(this._blurXFilter.pass=t),null!==this._blurYFilter&&(this._blurYFilter.pass=t)},enumerable:!0,configurable:!0}),e.prototype.process=function(t,e,r,n){this._blurXFilter.process(t,e,this._tempTarget,!0),this._blurYFilter.process(t,this._tempTarget,r,n)},e.prototype._$initialize=function(){this._blurXFilter=new o.BlurXFilter(this.filterManager),this._blurYFilter=new i.BlurYFilter(this.filterManager),this._blurXFilter.initialize(),this._blurYFilter.initialize(),this._blurXFilter.strength=this.strengthX,this._blurYFilter.strength=this.strengthY,this._blurXFilter.pass=this.pass,this._blurYFilter.pass=this.pass,this._blurXFilter.flipY=!1,this._tempTarget=this.filterManager.renderer.createRenderTarget()},e.prototype._$dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null,this._blurXFilter.dispose(),this._blurYFilter.dispose(),this._blurXFilter=this._blurYFilter=null},e}(a.FilterBase);r.BlurFilter=u},{"../../glantern/MathUtil":96,"../FilterBase":104,"./BlurXFilter":120,"./BlurYFilter":121}],120:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../FilterBase"),o=t("../ShaderID"),a=t("../RenderHelper"),s=t("../../glantern/MathUtil"),u=function(t){function e(e){t.call(this,e),this._strength=5,this._pass=1,this._tempTarget=null}return n(e,t),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){0>t&&(t=1),this._strength=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pass",{get:function(){return this._pass},set:function(t){t=0|s.MathUtil.clamp(t,1,3),this._pass=t},enumerable:!0,configurable:!0}),e.prototype.process=function(t,e,r,n){var i=this,s=3,u=e,l=this._tempTarget;l.clear();for(var h,c=0;c<s*this.pass;++c)a.RenderHelper.renderBuffered(t,u,l,o.ShaderID.BLUR_X,!0,function(t){var e=t.shaderManager.currentShader;e.setStrength(i.strength/4/i.pass/(u.fitWidth/u.originalWidth))}),h=u,u=l,l=h;a.RenderHelper.copyTargetContent(t,u,r,this.flipX,this.flipY,n)},e.prototype._$initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},e.prototype._$dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},e}(i.FilterBase);r.BlurXFilter=u},{"../../glantern/MathUtil":96,"../FilterBase":104,"../RenderHelper":108,"../ShaderID":111}],121:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../FilterBase"),o=t("../ShaderID"),a=t("../RenderHelper"),s=t("../../glantern/MathUtil"),u=function(t){function e(e){t.call(this,e),this._strength=5,this._pass=1,this._tempTarget=null}return n(e,t),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){0>t&&(t=1),this._strength=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pass",{get:function(){return this._pass},set:function(t){t=0|s.MathUtil.clamp(t,1,3),this._pass=t},enumerable:!0,configurable:!0}),e.prototype.process=function(t,e,r,n){var i=this,s=3,u=e,l=this._tempTarget;l.clear();for(var h,c=0;c<s*this.pass;++c)a.RenderHelper.renderBuffered(t,u,l,o.ShaderID.BLUR_Y,!0,function(t){var e=t.shaderManager.currentShader;e.setStrength(i.strength/4/i.pass/(u.fitWidth/u.originalWidth))}),h=u,u=l,l=h;a.RenderHelper.copyTargetContent(t,u,r,this.flipX,this.flipY,n)},e.prototype._$initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},e.prototype._$dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},e}(i.FilterBase);r.BlurYFilter=u},{"../../glantern/MathUtil":96,"../FilterBase":104,"../RenderHelper":108,"../ShaderID":111}],122:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../FilterBase"),o=t("../RenderHelper"),a=t("../ShaderID"),s=function(t){function e(e){t.call(this,e),this._colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this._tempTarget=null}return n(e,t),e.prototype.setColorMatrix=function(t){this._colorMatrix=t.slice()},e.prototype.process=function(t,e,r,n){var i=this;o.RenderHelper.renderBuffered(t,e,this._tempTarget,a.ShaderID.COLOR_TRANSFORM,!0,function(t){var e=t.shaderManager.currentShader;e.setColorMatrix(i._colorMatrix)}),o.RenderHelper.copyTargetContent(t,this._tempTarget,r,this.flipX,this.flipY,n)},e.prototype._$initialize=function(){this._tempTarget=this.filterManager.renderer.createRenderTarget()},e.prototype._$dispose=function(){this.filterManager.renderer.releaseRenderTarget(this._tempTarget),this._tempTarget=null},e}(i.FilterBase);r.ColorTransformFilter=s},{"../FilterBase":104,"../RenderHelper":108,"../ShaderID":111}],123:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./ColorTransformFilter"),o=t("../FilterBase"),a=t("./Blur2Filter"),s=t("../RenderHelper"),u=t("../../glantern/MathUtil"),l=function(t){function e(e){t.call(this,e),this._strengthX=5,this._strengthY=5,this._pass=1,this._colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this._blurFilter=null,this._colorTransformFilter=null,this._tempOriginalTarget=null,this._tempColorTransformedTarget=null}return n(e,t),Object.defineProperty(e.prototype,"strengthX",{get:function(){return this._strengthX},set:function(t){0>t&&(t=1),this._strengthX=t,null!==this._blurFilter&&(this._blurFilter.strengthX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strengthY",{get:function(){return this._strengthY},set:function(t){0>t&&(t=1),this._strengthY=t,null!==this._blurFilter&&(this._blurFilter.strengthY=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pass",{get:function(){return this._pass},set:function(t){t=0|u.MathUtil.clamp(t,1,3),this._pass=t,null!==this._blurFilter&&(this._blurFilter.pass=t)},enumerable:!0,configurable:!0}),e.prototype.setColorMatrix=function(t){null!==this._colorTransformFilter&&this._colorTransformFilter.setColorMatrix(t),this._colorMatrix=t.slice()},e.prototype.process=function(t,e,r,n){s.RenderHelper.copyTargetContent(t,e,this._tempOriginalTarget,!1,!1,!0),this._colorTransformFilter.process(t,e,this._tempColorTransformedTarget,!0),this._blurFilter.process(t,this._tempColorTransformedTarget,r,!1),s.RenderHelper.copyTargetContent(t,this._tempOriginalTarget,r,this.flipX,this.flipY,!1)},e.prototype._$initialize=function(){this._blurFilter=new a.Blur2Filter(this.filterManager),this._colorTransformFilter=new i.ColorTransformFilter(this.filterManager),this._blurFilter.initialize(),this._colorTransformFilter.initialize(),this._blurFilter.strengthX=this.strengthX,this._blurFilter.strengthY=this.strengthY,this._blurFilter.pass=this.pass,this._colorTransformFilter.setColorMatrix(this._colorMatrix),this._tempOriginalTarget=this.filterManager.renderer.createRenderTarget(),this._tempColorTransformedTarget=this.filterManager.renderer.createRenderTarget()},e.prototype._$dispose=function(){this._blurFilter.dispose(),this._colorTransformFilter.dispose(),this._blurFilter=this._colorTransformFilter=null,this.filterManager.renderer.releaseRenderTarget(this._tempOriginalTarget),this.filterManager.renderer.releaseRenderTarget(this._tempColorTransformedTarget),this._tempOriginalTarget=this._tempColorTransformedTarget=null},e}(o.FilterBase);r.GlowFilter=l},{"../../glantern/MathUtil":96,"../FilterBase":104,"../RenderHelper":108,"./Blur2Filter":118,"./ColorTransformFilter":122}],124:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./BlurFilter")),n(t("./BlurXFilter")),n(t("./BlurYFilter")),n(t("./ColorTransformFilter")),n(t("./GlowFilter")),n(t("./Blur2Filter"))},{"./Blur2Filter":118,"./BlurFilter":119,"./BlurXFilter":120,"./BlurYFilter":121,"./ColorTransformFilter":122,"./GlowFilter":123}],125:[function(t,e,r){"use strict";!function(t){t[t.SOLID=0]="SOLID",t[t.GRADIENT=1]="GRADIENT",t[t.BITMAP=2]="BITMAP",t[t.SHADER=3]="SHADER"}(r.BrushType||(r.BrushType={}));r.BrushType},{}],126:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./GraphicsDataRendererBase"),o=function(t){function e(e,r,n){t.call(this,e,r,n,r,n),this.beginIndex=-1,this.endIndex=-1,this._contours=null,this._startingNewContour=!0,this._contours=[[]],this.beginIndex=-1,this.endIndex=-1,this._hasDrawnAnything=!1,this._startingNewContour=!0}return n(e,t),e.prototype.moveTo=function(t,e){this.closePath(),this._hasDrawnAnything?this._currentX===t&&this._currentY===e||(this._startingNewContour=!0):this._startingNewContour=!0,this._currentX=t,this._currentY=e,this._lastPathStartX=t,this._lastPathStartY=e},e.prototype._$getContourForClosedShapes=function(){var t;return this._hasDrawnAnything?(t=[],this._contours.push(t),this._startingNewContour=!1):t=this._contours[0],t},e.prototype._$getContourForLines=function(){var t;return this._hasDrawnAnything?this._startingNewContour?(t=[],this._contours.push(t),this._startingNewContour=!1):t=this._contours[this._contours.length-1]:t=this._contours[0],t},e}(i.GraphicsDataRendererBase);r.FillRendererBase=o},{"./GraphicsDataRendererBase":128}],127:[function(t,e,r){"use strict";r.CURVE_ACCURACY=20,
r.STD_Z=0},{}],128:[function(t,e,r){"use strict";var n=t("../PackedArrayBuffer"),i=t("../../flash/errors/NotImplementedError"),o=window.WebGLRenderingContext,a=function(){function t(t,e,r,n,i){this._graphics=null,this._glc=null,this._isDirty=!0,this._vertices=null,this._colors=null,this._indices=null,this._vertexBuffer=null,this._colorBuffer=null,this._indexBuffer=null,this._currentX=0,this._currentY=0,this._hasDrawnAnything=!1,this._lastPathStartX=0,this._lastPathStartY=0,this._graphics=t,this._glc=t.renderer.context,this.__initializeBuffers(),this._hasDrawnAnything=!1,this._lastPathStartX=e,this._lastPathStartY=r,this.moveTo(n,i),this._isDirty=!0}return t.prototype.bezierCurveTo=function(t,e,r,n,o,a){throw new i.NotImplementedError},t.prototype.closePath=function(){!this._hasDrawnAnything||this._currentX==this._lastPathStartX&&this._currentY==this._lastPathStartY||this.lineTo(this._lastPathStartX,this._lastPathStartY)},t.prototype.curveTo=function(t,e,r,n){throw new i.NotImplementedError},t.prototype.drawCircle=function(t,e,r){throw new i.NotImplementedError},t.prototype.drawEllipse=function(t,e,r,n){throw new i.NotImplementedError},t.prototype.drawRect=function(t,e,r,n){throw new i.NotImplementedError},t.prototype.drawRoundRect=function(t,e,r,n,o,a){throw void 0===a&&(a=NaN),new i.NotImplementedError},t.prototype.lineTo=function(t,e){throw new i.NotImplementedError},t.prototype.moveTo=function(t,e){throw new i.NotImplementedError},t.prototype.update=function(){this._$syncBuffers()},t.prototype.render=function(t){console.warn("Do not call GraphicsDataRendererBase.render().")},t.prototype.dispose=function(){this._vertexBuffer.dispose(),this._colorBuffer.dispose(),this._indexBuffer.dispose(),this._vertexBuffer=this._colorBuffer=this._indexBuffer=null,this._vertices=this._colors=this._indices=null,this._glc=null},t.prototype.becomeDirty=function(){this._isDirty=!0},Object.defineProperty(t.prototype,"hasDrawnAnything",{get:function(){return this._hasDrawnAnything},enumerable:!0,configurable:!0}),t.prototype._$syncBuffers=function(){this._isDirty&&(this._vertexBuffer.setNewData(this._vertices),this._vertexBuffer.becomeDirty(),this._colorBuffer.setNewData(this._colors),this._colorBuffer.becomeDirty(),this._indexBuffer.setNewData(this._indices),this._indexBuffer.becomeDirty(),this._isDirty=!1)},t.prototype.__initializeBuffers=function(){this._vertices=[],this._colors=[],this._indices=[],this._vertexBuffer=n.PackedArrayBuffer.create(this._glc,this._vertices,o.FLOAT,o.ARRAY_BUFFER),this._colorBuffer=n.PackedArrayBuffer.create(this._glc,this._colors,o.FLOAT,o.ARRAY_BUFFER),this._indexBuffer=n.PackedArrayBuffer.create(this._glc,this._indices,o.UNSIGNED_SHORT,o.ELEMENT_ARRAY_BUFFER)},t}();r.GraphicsDataRendererBase=a},{"../../flash/errors/NotImplementedError":52,"../PackedArrayBuffer":107}],129:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("libtess"),o=t("./FillRendererBase"),a=t("./GRAPHICS_CONST"),s=t("../RenderHelper"),u=t("../../flash/errors/NotImplementedError"),l=t("../../glantern/MathUtil"),h=function(t){function e(e,r,n,i,o){t.call(this,e,r,n),this._r=0,this._g=0,this._b=0,this._a=1,this._a=l.MathUtil.clamp(o,0,1),this._r=(i>>>16&255)/255,this._g=(i>>>8&255)/255,this._b=(255&i)/255}return n(e,t),e.prototype.bezierCurveTo=function(t,e,r,n,i,o){this._isDirty=!0;var s=this._$getContourForLines();this._hasDrawnAnything&&!this._startingNewContour||s.push(this._currentX,this._currentY,a.STD_Z);for(var u,l,h,c,f,p,d,_,g=this._currentX,b=this._currentY,m=1;m<=a.CURVE_ACCURACY;m++)_=m/a.CURVE_ACCURACY,u=1-_,l=u*u,h=l*u,c=_*_,f=c*_,p=h*g+3*l*_*t+3*u*c*r+f*i,d=h*b+3*l*_*e+3*u*c*n+f*o,s.push(p,d,a.STD_Z);this._currentX=i,this._currentY=o,this._hasDrawnAnything=!0,this._startingNewContour=!1},e.prototype.curveTo=function(t,e,r,n){this._isDirty=!0;var i=this._$getContourForLines();this._hasDrawnAnything&&!this._startingNewContour||i.push(this._currentX,this._currentY,a.STD_Z);for(var o,s,u,l=this._currentX,h=this._currentY,c=1;c<=a.CURVE_ACCURACY;c++)o=c/a.CURVE_ACCURACY,s=l+(t-l)*o,u=h+(e-h)*o,s+=(t+(r-t)*o-s)*o,u+=(e+(n-e)*o-u)*o,i.push(s,u,a.STD_Z);this._currentX=r,this._currentY=n,this._hasDrawnAnything=!0,this._startingNewContour=!1},e.prototype.drawCircle=function(t,e,r){this._isDirty=!0,this.moveTo(t,e);var n,i,o,s,u=this._$getContourForClosedShapes(),l=Math.PI/2;u.push(this._currentX+r,this._currentY,a.STD_Z),i=0;for(var h=0;4>h;h++){for(var c=1;c<=a.CURVE_ACCURACY;c++)n=i-c/a.CURVE_ACCURACY*l,o=t+r*Math.cos(n),s=e+r*Math.sin(n),u.push(o,s,a.STD_Z);i-=l}this._currentX=t+r,this._currentY=e,this._lastPathStartX=t+r,this._lastPathStartY=e,this._hasDrawnAnything=!0,this._startingNewContour=!1},e.prototype.drawEllipse=function(t,e,r,n){this._isDirty=!0,this.moveTo(t,e+n/2);var i,o,s,u,l=this._$getContourForClosedShapes(),h=t+r/2,c=e+n/2,f=Math.PI/2;l.push(this._currentX,this._currentY,a.STD_Z),o=Math.PI;for(var p=0;4>p;p++){for(var d=1;d<=a.CURVE_ACCURACY;d++)i=o-d/a.CURVE_ACCURACY*f,s=h+r/2*Math.cos(i),u=c+n/2*Math.sin(i),l.push(s,u,a.STD_Z);o-=f}this._currentX=t+r,this._currentY=e+n/2,this._lastPathStartX=t+r,this._lastPathStartY=e+n/2,this._hasDrawnAnything=!0,this._startingNewContour=!1},e.prototype.drawRect=function(t,e,r,n){this._isDirty=!0,this.moveTo(t,e);var i=this._$getContourForClosedShapes();i.push(t,e,a.STD_Z),i.push(t+r,e,a.STD_Z),i.push(t+r,e+n,a.STD_Z),i.push(t,e+n,a.STD_Z),this._currentX=t,this._currentY=e,this._hasDrawnAnything=!0,this._startingNewContour=!1},e.prototype.drawRoundRect=function(t,e,r,n,i,o){throw void 0===o&&(o=NaN),new u.NotImplementedError},e.prototype.lineTo=function(t,e){this._isDirty=!0;var r=this._$getContourForLines();this._hasDrawnAnything&&!this._startingNewContour||r.push(this._currentX,this._currentY,a.STD_Z),r.push(t,e,a.STD_Z),this._currentX=t,this._currentY=e,this._hasDrawnAnything=!0,this._startingNewContour=!1},e.prototype.update=function(){if(this._isDirty){var e=this._graphics.renderer.tessellator;e.gluTessProperty(i.gluEnum.GLU_TESS_WINDING_RULE,i.windingRule.GLU_TESS_WINDING_ODD),e.gluTessNormal(0,0,1);var r=[];e.gluTessBeginPolygon(r);for(var n,o=0;o<this._contours.length;o++)if(n=this._contours[o],n.length>0){e.gluTessBeginContour();for(var a=0;a<n.length;a+=3){var s=[n[a],n[a+1],n[a+2]];e.gluTessVertex(s,s)}e.gluTessEndContour()}e.gluTessEndPolygon(),this._vertices=[],this._colors=[],this._indices=[];var u=this._colors,l=this._indices,h=this._vertices;a=0;for(var c,o=0;o<r.length;o++){c=r[o];for(var a=0;a<c.length;a++)h.push(c[a])}a=0;for(var o=0;o<h.length;o+=3)u.push(this._r*this._a,this._g*this._a,this._b*this._a,this._a),l.push(a),a++}t.prototype.update.call(this)},e.prototype.render=function(t){if(this._vertices.length>0){var e=t.currentRenderTarget;s.RenderHelper.renderPrimitives2(t,e,this._vertexBuffer,this._colorBuffer,this._indexBuffer,!1,e.isRoot,!1)}},e}(o.FillRendererBase);r.SolidFillRenderer=h},{"../../flash/errors/NotImplementedError":52,"../../glantern/MathUtil":96,"../RenderHelper":108,"./FillRendererBase":126,"./GRAPHICS_CONST":127,libtess:144}],130:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./StrokeRendererBase"),o=t("./GRAPHICS_CONST"),a=t("../RenderHelper"),s=t("../../flash/errors/NotImplementedError"),u=t("../../glantern/MathUtil"),l=function(t){function e(e,r,n,i,o,a,s,l){t.call(this,e,r,n,i,o),this._r=0,this._g=0,this._b=0,this._a=1,this._w=1,this._a=u.MathUtil.clamp(l,0,1),this._r=(s>>>16&255)/255,this._g=(s>>>8&255)/255,this._b=(255&s)/255,this._w=a}return n(e,t),e.prototype.bezierCurveTo=function(t,e,r,n,i,a){if(this._w>0){this._isDirty=!0;for(var s,u,l,h,c,f,p,d,_=this._currentX,g=this._currentY,b=1;b<=o.CURVE_ACCURACY;b++)d=b/o.CURVE_ACCURACY,s=1-d,u=s*s,l=u*s,h=d*d,c=h*d,f=l*_+3*u*d*t+3*s*h*r+c*i,p=l*g+3*u*d*e+3*s*h*n+c*a,this.lineTo(f,p)}this._currentX=i,this._currentY=a},e.prototype.curveTo=function(t,e,r,n){if(this._w>0){this._isDirty=!0;for(var i,a,s,u=this._currentX,l=this._currentY,h=1;h<=o.CURVE_ACCURACY;h++)i=h/o.CURVE_ACCURACY,a=u+(t-u)*i,s=l+(e-l)*i,a+=(t+(r-t)*i-a)*i,s+=(e+(n-e)*i-s)*i,this.lineTo(a,s)}this._currentX=r,this._currentY=n},e.prototype.drawCircle=function(t,e,r){if(this.moveTo(t-r,e),this._w>0){this._isDirty=!0;var n,i,a,s,u=Math.PI/2;i=Math.PI;for(var l=0;4>l;l++){for(var h=1;h<=o.CURVE_ACCURACY;h++)n=i-h/o.CURVE_ACCURACY*u,a=t+r*Math.cos(n),s=e+r*Math.sin(n),this.lineTo(a,s);i-=u}}this._currentX=t+r,this._currentY=e,this._lastPathStartX=t+r,this._lastPathStartY=e},e.prototype.drawEllipse=function(t,e,r,n){if(this.moveTo(t,e+n/2),this._w>0){this._isDirty=!0;var i,a,s,u,l=t+r/2,h=e+n/2,c=Math.PI/2;a=Math.PI;for(var f=0;4>f;f++){for(var p=1;p<=o.CURVE_ACCURACY;p++)i=a-p/o.CURVE_ACCURACY*c,s=l+r/2*Math.cos(i),u=h+n/2*Math.sin(i),this.lineTo(s,u);a-=c}}this._currentX=t+r,this._currentY=e+n/2,this._lastPathStartX=t+r,this._lastPathStartY=e+n/2},e.prototype.drawRect=function(t,e,r,n){this._isDirty=!0,this.moveTo(t,e),this.lineTo(t,e+n),this.lineTo(t+r,e+n),this.lineTo(t+r,e),this.lineTo(t,e)},e.prototype.drawRoundRect=function(t,e,r,n,i,o){throw void 0===o&&(o=NaN),new s.NotImplementedError},e.prototype.lineTo=function(t,e){if(this._w>0){this._isDirty=!0;var r=this._$getSimLineVertices(this._currentX,this._currentY,t,e,o.STD_Z,this._w);if(r.length>0){for(var n=this._vertices.length/3,i=0;12>i;i++)this._vertices.push(r[i]);for(var i=0;4>i;i++)this._colors.push(this._r*this._a,this._g*this._a,this._b*this._a,this._a);this._indices.push(n,n+1,n+2,n+1,n+2,n+3),this._hasDrawnAnything=!0}}this._currentX=t,this._currentY=e},e.prototype.render=function(t){if(this._vertices.length>0){var e=t.currentRenderTarget;a.RenderHelper.renderPrimitives2(t,e,this._vertexBuffer,this._colorBuffer,this._indexBuffer,!1,e.isRoot,!1)}},e}(i.StrokeRendererBase);r.SolidStrokeRenderer=l},{"../../flash/errors/NotImplementedError":52,"../../glantern/MathUtil":96,"../RenderHelper":108,"./GRAPHICS_CONST":127,"./StrokeRendererBase":131}],131:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("./GraphicsDataRendererBase"),o=function(t){function e(e,r,n,i,o){t.call(this,e,r,n,i,o),this._lineVerticesStorage=null,this._lineVerticesStorage=[[0,0],[0,0],[0,0],[0,0]]}return n(e,t),e.prototype.moveTo=function(t,e){this._graphics.isFilling&&this.closePath(),this._currentX=t,this._currentY=e,this._lastPathStartX=t,this._lastPathStartY=e},e.prototype._$getSimLineVertices=function(t,e,r,n,i,o){if(0>o)return[];var a=o/2,s=this._lineVerticesStorage[0],u=this._lineVerticesStorage[1],l=this._lineVerticesStorage[2],h=this._lineVerticesStorage[3];if(t===r)s[0]=t-a,s[1]=e>n?e+a:e-a,u[0]=t+a,u[1]=e>n?e+a:e-a,l[0]=r-a,l[1]=e>n?n-a:n+a,h[0]=r+a,h[1]=e>n?n-a:n+a;else{var c=(n-e)/(r-t),f=1/Math.sqrt(1+c*c),p=Math.sqrt(1-f*f),d=a*p,_=a*f,g=_,b=d;t>r?(t+=g,r-=g):(t-=g,r+=g),e>n?(e+=b,n-=b):(e-=b,n+=b),s[0]=t-d,u[0]=t+d,l[0]=r-d,h[0]=r+d,c>=0?(s[1]=e+_,u[1]=e-_,l[1]=n+_,h[1]=n-_):(s[1]=e-_,u[1]=e+_,l[1]=n-_,h[1]=n+_)}return[s[0],s[1],i,u[0],u[1],i,l[0],l[1],i,h[0],h[1],i]},e}(i.GraphicsDataRendererBase);r.StrokeRendererBase=o},{"./GraphicsDataRendererBase":128}],132:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./AttributeCache")),n(t("./FilterBase")),n(t("./FilterManager")),n(t("./FragmentShaders")),n(t("./PackedArrayBuffer")),n(t("./RenderHelper")),n(t("./RenderTarget2D")),n(t("./ShaderBase")),n(t("./ShaderID")),n(t("./ShaderManager")),n(t("./UniformCache")),n(t("./VertexShaders")),n(t("./WebGLDataType")),n(t("./WebGLRenderer")),n(t("./WebGLUtils"));var i=t("./filters/index");r.filters=i;var o=t("./shaders/index");r.shaders=o},{"./AttributeCache":103,"./FilterBase":104,"./FilterManager":105,"./FragmentShaders":106,"./PackedArrayBuffer":107,"./RenderHelper":108,"./RenderTarget2D":109,"./ShaderBase":110,"./ShaderID":111,"./ShaderManager":112,"./UniformCache":113,"./VertexShaders":114,"./WebGLDataType":115,"./WebGLRenderer":116,"./WebGLUtils":117,"./filters/index":124,"./shaders/index":143}],133:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../UniformCache"),o=t("../VertexShaders"),a=t("../FragmentShaders"),s=t("./BufferedShader"),u=t("../WebGLDataType"),l=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE)}return n(e,t),e.prototype.setStrength=function(t){0>t&&(t=1),this._uniforms.get("uStrength").value=t},e.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},e.prototype.setResolution=function(t){0>t&&(t=1),this._uniforms.get("uResolution").value=t},e.prototype.setBlurDirection=function(t){this._uniforms.get("uBlurDirection").value=[t[0],t[1]]},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var o;o=new i.UniformCache,o.name="uStrength",o.type=u.WebGLDataType.U1F,o.value=5,r.set(o.name,o),o=new i.UniformCache,o.name="uResolution",o.type=u.WebGLDataType.U1F,o.value=1,r.set(o.name,o),o=new i.UniformCache,o.name="uBlurDirection",o.type=u.WebGLDataType.U2F,o.value=[1,0],r.set(o.name,o)},e.SHADER_CLASS_NAME="Blur2Shader",e.FRAGMENT_SOURCE=a.FragmentShaders.blur2,e.VERTEX_SOURCE=o.VertexShaders.blur2,e}(s.BufferedShader);r.Blur2Shader=l},{"../FragmentShaders":106,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115,"./BufferedShader":136}],134:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../UniformCache"),o=t("../VertexShaders"),a=t("../FragmentShaders"),s=t("./BufferedShader"),u=t("../WebGLDataType"),l=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE)}return n(e,t),e.prototype.setStrength=function(t){0>t&&(t=1),this._uniforms.get("uStrength").value=t},e.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var o;o=new i.UniformCache,o.name="uStrength",o.type=u.WebGLDataType.U1F,o.value=5,r.set(o.name,o)},e.SHADER_CLASS_NAME="BlurXShader",e.FRAGMENT_SOURCE=a.FragmentShaders.blur,e.VERTEX_SOURCE=o.VertexShaders.blurX,e}(s.BufferedShader);r.BlurXShader=l},{"../FragmentShaders":106,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115,"./BufferedShader":136}],135:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../UniformCache"),o=t("../VertexShaders"),a=t("../FragmentShaders"),s=t("./BufferedShader"),u=t("../WebGLDataType"),l=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE)}return n(e,t),e.prototype.setStrength=function(t){0>t&&(t=1),this._uniforms.get("uStrength").value=t},e.prototype.getStrength=function(){return this._uniforms.get("uStrength").value},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var o;o=new i.UniformCache,o.name="uStrength",o.type=u.WebGLDataType.U1F,o.value=5,r.set(o.name,o)},e.SHADER_CLASS_NAME="BlurYShader",e.FRAGMENT_SOURCE=a.FragmentShaders.blur,e.VERTEX_SOURCE=o.VertexShaders.blurY,e}(s.BufferedShader);r.BlurYShader=l},{"../FragmentShaders":106,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115,"./BufferedShader":136}],136:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../flash/geom/Matrix3D"),o=t("../UniformCache"),a=t("../VertexShaders"),s=t("../FragmentShaders"),u=t("../ShaderBase"),l=t("../WebGLDataType"),h=function(t){function e(e,r,n){t.call(this,e,r,n,null,null)}return n(e,t),e.prototype.setTexture=function(t){this._uniforms.get("uSampler").texture=t},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var a,s=new i.Matrix3D,u=e.renderer.view.width,h=e.renderer.view.height;s.setOrthographicProjection(0,u,h,0,-1e3,1e3),a=new o.UniformCache,a.name="uSampler",a.type=l.WebGLDataType.USampler2D,a.value=0,a.texture=null,r.set(a.name,a),a=new o.UniformCache,a.name="uProjectionMatrix",a.type=l.WebGLDataType.UMat4,a.value=s.toArray(),a.transpose=!1,r.set(a.name,a)},e.SHADER_CLASS_NAME="BufferedShader",e.FRAGMENT_SOURCE=s.FragmentShaders.buffered,e.VERTEX_SOURCE=a.VertexShaders.buffered,e}(u.ShaderBase);r.BufferedShader=h},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":106,"../ShaderBase":110,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115}],137:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../UniformCache"),o=t("../VertexShaders"),a=t("../FragmentShaders"),s=t("./BufferedShader"),u=t("../WebGLDataType"),l=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE)}return n(e,t),e.prototype.setColorMatrix=function(t){return t.length<20?void console.warn("ColorTransformShader.setColorMatrix needs a 4x5 matrix."):void(this._uniforms.get("uColorMatrix").value=t.slice())},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var o,a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];o=new i.UniformCache,o.name="uColorMatrix",o.type=u.WebGLDataType.U1FV,o.value=a,r.set(o.name,o)},e.SHADER_CLASS_NAME="ColorTransformShader",e.FRAGMENT_SOURCE=a.FragmentShaders.colorTransform,e.VERTEX_SOURCE=o.VertexShaders.buffered,e}(s.BufferedShader);r.ColorTransformShader=l},{"../FragmentShaders":106,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115,"./BufferedShader":136}],138:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../UniformCache"),o=t("../VertexShaders"),a=t("../FragmentShaders"),s=t("./BufferedShader"),u=t("../WebGLDataType"),l=t("../../flash/geom/Matrix3D"),h=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE)}return n(e,t),e.prototype.setFlipX=function(t){this._uniforms.get("uFlipX").value=t},e.prototype.setFlipY=function(t){this._uniforms.get("uFlipY").value=t},e.prototype.setOriginalSize=function(t){this._uniforms.get("uOriginalSize").value=t.slice()},e.prototype.setFitSize=function(t){this._uniforms.get("uFitSize").value=t.slice()},e.prototype.setAlpha=function(t){this._uniforms.get("uAlpha").value=t},e.prototype.setTransform=function(t){this._uniforms.get("uTransformMatrix").value=t.toArray()},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var o,a=new l.Matrix3D;a.identity(),o=new i.UniformCache,o.name="uFlipX",o.type=u.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uFlipY",o.type=u.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uOriginalSize",o.type=u.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o),o=new i.UniformCache,o.name="uFitSize",o.type=u.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o),o=new i.UniformCache,o.name="uTransformMatrix",o.type=u.WebGLDataType.UMat4,o.value=a.toArray(),o.transpose=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uAlpha",o.type=u.WebGLDataType.U1F,o.value=1,r.set(o.name,o)},e.SHADER_CLASS_NAME="CopyImageShader",e.FRAGMENT_SOURCE=a.FragmentShaders.copyImage,e.VERTEX_SOURCE=o.VertexShaders.copyImage,e}(s.BufferedShader);r.CopyImageShader=h},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":106,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115,"./BufferedShader":136}],139:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../UniformCache"),o=t("../VertexShaders"),a=t("../FragmentShaders"),s=t("./BufferedShader"),u=t("../WebGLDataType"),l=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE)}return n(e,t),e.prototype.setResolutionXY=function(t){this._uniforms.get("uResolution").value=t.slice()},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var o;o=new i.UniformCache,o.name="uResolution",o.type=u.WebGLDataType.U2F,o.value=[1,1],r.set(o.name,o)},e.SHADER_CLASS_NAME="FxaaShader",e.FRAGMENT_SOURCE=a.FragmentShaders.fxaa,e.VERTEX_SOURCE=o.VertexShaders.fxaa,e}(s.BufferedShader);r.FxaaShader=l},{"../FragmentShaders":106,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115,"./BufferedShader":136}],140:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../flash/geom/Matrix3D"),o=t("../UniformCache"),a=t("../VertexShaders"),s=t("../FragmentShaders"),u=t("../ShaderBase"),l=t("../WebGLDataType"),h=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE,null,null)}return n(e,t),e.prototype.setProjection=function(t){this._uniforms.get("uProjectionMatrix").value=t.toArray()},e.prototype.setTransform=function(t){this._uniforms.get("uTransformMatrix").value=t.toArray()},e.prototype.setAlpha=function(t){this._uniforms.get("uAlpha").value=t},e.prototype.setFlipX=function(t){this._uniforms.get("uFlipX").value=t},e.prototype.setFlipY=function(t){this._uniforms.get("uFlipY").value=t},e.prototype.setOriginalSize=function(t){this._uniforms.get("uOriginalSize").value=t.slice()},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var a,s=new i.Matrix3D,u=new i.Matrix3D,h=e.renderer.view.width,c=e.renderer.view.height;u.setOrthographicProjection(0,h,c,0,-1e3,1e3),a=new o.UniformCache,a.name="uProjectionMatrix",a.type=l.WebGLDataType.UMat4,a.value=u.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uTransformMatrix",a.type=l.WebGLDataType.UMat4,a.value=s.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uAlpha",a.type=l.WebGLDataType.U1F,a.value=1,r.set(a.name,a),a=new o.UniformCache,a.name="uFlipX",a.type=l.WebGLDataType.UBool,a.value=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uFlipY",a.type=l.WebGLDataType.UBool,a.value=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uOriginalSize",a.type=l.WebGLDataType.U2F,a.value=[0,0],r.set(a.name,a)},e.SHADER_CLASS_NAME="Primitive2Shader",e.FRAGMENT_SOURCE=s.FragmentShaders.primitive,e.VERTEX_SOURCE=a.VertexShaders.primitive2,e}(u.ShaderBase);r.Primitive2Shader=h},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":106,"../ShaderBase":110,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115}],141:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../../flash/geom/Matrix3D"),o=t("../UniformCache"),a=t("../VertexShaders"),s=t("../FragmentShaders"),u=t("../ShaderBase"),l=t("../WebGLDataType"),h=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE,null,null)}return n(e,t),e.prototype.setProjection=function(t){this._uniforms.get("uProjectionMatrix").value=t.toArray()},e.prototype.setTransform=function(t){this._uniforms.get("uTransformMatrix").value=t.toArray()},e.prototype.setAlpha=function(t){this._uniforms.get("uAlpha").value=t},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var a,s=new i.Matrix3D,u=new i.Matrix3D,h=e.renderer.view.width,c=e.renderer.view.height;u.setOrthographicProjection(0,h,c,0,-1e3,1e3),a=new o.UniformCache,a.name="uProjectionMatrix",a.type=l.WebGLDataType.UMat4,a.value=u.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uTransformMatrix",a.type=l.WebGLDataType.UMat4,a.value=s.toArray(),a.transpose=!1,r.set(a.name,a),a=new o.UniformCache,a.name="uAlpha",a.type=l.WebGLDataType.U1F,a.value=1,r.set(a.name,a)},e.SHADER_CLASS_NAME="PrimitiveShader",e.FRAGMENT_SOURCE=s.FragmentShaders.primitive,e.VERTEX_SOURCE=a.VertexShaders.primitive,e}(u.ShaderBase);r.PrimitiveShader=h},{"../../flash/geom/Matrix3D":64,"../FragmentShaders":106,"../ShaderBase":110,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115}],142:[function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=t("../UniformCache"),o=t("../VertexShaders"),a=t("../FragmentShaders"),s=t("./BufferedShader"),u=t("../WebGLDataType"),l=function(t){function e(r){t.call(this,r,e.VERTEX_SOURCE,e.FRAGMENT_SOURCE)}return n(e,t),e.prototype.setFlipX=function(t){this._uniforms.get("uFlipX").value=t},e.prototype.setFlipY=function(t){this._uniforms.get("uFlipY").value=t},e.prototype.setOriginalSize=function(t){this._uniforms.get("uOriginalSize").value=t.slice()},e.prototype.setFitSize=function(t){this._uniforms.get("uFitSize").value=t.slice()},e.prototype._$localInit=function(e,r,n){t.prototype._$localInit.call(this,e,r,n);var o;o=new i.UniformCache,o.name="uFlipX",o.type=u.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uFlipY",o.type=u.WebGLDataType.UBool,o.value=!1,r.set(o.name,o),o=new i.UniformCache,o.name="uOriginalSize",o.type=u.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o),o=new i.UniformCache,o.name="uFitSize",o.type=u.WebGLDataType.U2F,o.value=[0,0],r.set(o.name,o)},e.SHADER_CLASS_NAME="ReplicateShader",e.FRAGMENT_SOURCE=a.FragmentShaders.buffered,e.VERTEX_SOURCE=o.VertexShaders.replicate,e}(s.BufferedShader);r.ReplicateShader=l},{"../FragmentShaders":106,"../UniformCache":113,"../VertexShaders":114,"../WebGLDataType":115,"./BufferedShader":136}],143:[function(t,e,r){"use strict";function n(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}n(t("./BlurXShader")),n(t("./BlurYShader")),n(t("./BufferedShader")),n(t("./ColorTransformShader")),n(t("./FxaaShader")),n(t("./PrimitiveShader")),n(t("./ReplicateShader")),n(t("./Blur2Shader")),n(t("./CopyImageShader"))},{"./Blur2Shader":133,"./BlurXShader":134,"./BlurYShader":135,"./BufferedShader":136,"./ColorTransformShader":137,"./CopyImageShader":138,"./FxaaShader":139,"./PrimitiveShader":141,"./ReplicateShader":142}],144:[function(t,e,r){"use strict";function n(t,e){return t.b===e.b&&t.a===e.a}function i(t,e){return t.b<e.b||t.b===e.b&&t.a<=e.a}function o(t,e,r){var n=e.b-t.b,i=r.b-e.b;return n+i>0?i>n?e.a-t.a+n/(n+i)*(t.a-r.a):e.a-r.a+i/(n+i)*(r.a-t.a):0}function a(t,e,r){var n=e.b-t.b,i=r.b-e.b;return n+i>0?(e.a-r.a)*n+(e.a-t.a)*i:0}function s(t,e){return t.a<e.a||t.a===e.a&&t.b<=e.b}function u(t,e,r){var n=e.a-t.a,i=r.a-e.a;return n+i>0?i>n?e.b-t.b+n/(n+i)*(t.b-r.b):e.b-r.b+i/(n+i)*(r.b-t.b):0}function l(t,e,r){var n=e.a-t.a,i=r.a-e.a;return n+i>0?(e.b-r.b)*n+(e.b-t.b)*i:0}function h(t){return i(t.b.a,t.a)}function c(t){return i(t.a,t.b.a)}function f(t,e,r,n){return t=0>t?0:t,r=0>r?0:r,r>=t?0===r?(e+n)/2:e+t/(t+r)*(n-e):n+r/(t+r)*(e-n)}function p(t){var e=m(t.b);return v(e,t.c),v(e.b,t.c),w(e,t.a),e}function d(t,e){var r=!1,n=!1;t!==e&&(e.a!==t.a&&(n=!0,T(e.a,t.a)),e.d!==t.d&&(r=!0,E(e.d,t.d)),y(e,t),n||(v(e,t.a),t.a.c=t),r||(w(e,t.d),t.d.a=t))}function _(t){var e=t.b,r=!1;t.d!==t.b.d&&(r=!0,E(t.d,t.b.d)),t.c===t?T(t.a,null):(t.b.d.a=K(t),t.a.c=t.c,y(t,K(t)),r||w(t,t.d)),e.c===e?(T(e.a,null),E(e.d,null)):(t.d.a=K(e),e.a.c=e.c,y(e,K(e))),x(t)}function g(t){var e=m(t),r=e.b;return y(e,t.e),e.a=t.b.a,v(r,e.a),e.d=r.d=t.d,e=e.b,y(t.b,K(t.b)),y(t.b,e),t.b.a=e.a,e.b.a.c=e.b,e.b.d=t.b.d,e.f=t.f,e.b.f=t.b.f,e}function b(t,e){var r=!1,n=m(t),i=n.b;return e.d!==t.d&&(r=!0,E(e.d,t.d)),y(n,t.e),y(i,e),n.a=t.b.a,i.a=e.a,n.d=i.d=t.d,t.d.a=i,r||w(n,t.d),n}function m(t){var e=new Q,r=new Q,n=t.b.h;return r.h=n,n.b.h=e,e.h=t,t.b.h=r,e.b=r,e.c=e,e.e=r,r.b=e,r.c=r,r.e=e}function y(t,e){var r=t.c,n=e.c;r.b.e=e,n.b.e=t,t.c=n,e.c=r}function v(t,e){var r=e.f,n=new tt(e,r);r.e=n,e.f=n,r=n.c=t;do r.a=n,r=r.c;while(r!==t)}function w(t,e){var r=e.d,n=new q(e,r);r.b=n,e.d=n,n.a=t,n.c=e.c,r=t;do r.d=n,r=r.e;while(r!==t)}function x(t){var e=t.h;t=t.b.h,e.b.h=t,t.b.h=e}function T(t,e){var r=t.c,n=r;do n.a=e,n=n.c;while(n!==r);r=t.f,n=t.e,n.f=r,r.e=n}function E(t,e){var r=t.a,n=r;do n.d=e,n=n.e;while(n!==r);r=t.d,n=t.b,n.d=r,r.b=n}function S(t){var e=0;return Math.abs(t[1])>Math.abs(t[0])&&(e=1),Math.abs(t[2])>Math.abs(t[e])&&(e=2),e}function O(t,e){t.f+=e.f,t.b.f+=e.b.f}function C(t,e,r){return t=t.a,e=e.a,r=r.a,e.b.a===t?r.b.a===t?i(e.a,r.a)?0>=a(r.b.a,e.a,r.a):0<=a(e.b.a,r.a,e.a):0>=a(r.b.a,t,r.a):r.b.a===t?0<=a(e.b.a,t,e.a):(e=o(e.b.a,t,e.a),t=o(r.b.a,t,r.a),e>=t)}function P(t){t.a.i=null;var e=t.e;e.a.c=e.c,e.c.a=e.a,t.e=null}function R(t,e){_(t.a),t.c=!1,t.a=e,e.i=t}function A(t){var e=t.a.a;do t=dt(t);while(t.a.a===e);return t.c&&(e=b(pt(t).a.b,t.a.e),R(t,e),t=dt(t)),t}function U(t,e,r){var n=new ft;return n.a=r,n.e=X(t.f,e.e,n),r.i=n}function I(t,e){switch(t.s){case 100130:return 0!==(1&e);case 100131:return 0!==e;case 100132:return e>0;case 100133:return 0>e;case 100134:return e>=2||-2>=e}return!1}function M(t){var e=t.a,r=e.d;r.c=t.d,r.a=e,P(t)}function F(t,e,r){for(t=e,e=e.a;t!==r;){t.c=!1;var n=pt(t),i=n.a;if(i.a!==e.a){if(!n.c){M(t);break}i=b(e.c.b,i.b),R(n,i)}e.c!==i&&(d(K(i),i),d(e,i)),M(t),e=n.a,t=n}return e}function D(t,e,r,n,i,o){var a=!0;do U(t,e,r.b),r=r.c;while(r!==n);for(null===i&&(i=pt(e).a.b.c);n=pt(e),r=n.a.b,r.a===i.a;)r.c!==i&&(d(K(r),r),d(K(i),r)),n.f=e.f-r.f,n.d=I(t,n.f),e.b=!0,!a&&k(t,e)&&(O(r,i),P(e),_(i)),a=!1,e=n,i=r;e.b=!0,o&&G(t,e)}function N(t,e,r,n,i){var o=[e.g[0],e.g[1],e.g[2]];e.d=null,e.d=t.o?t.o(o,r,n,t.c)||null:null,null===e.d&&(i?t.n||(Z(t,100156),t.n=!0):e.d=r[0])}function B(t,e,r){var n=[null,null,null,null];n[0]=e.a.d,n[1]=r.a.d,N(t,e.a,n,[.5,.5,0,0],!1),d(e,r)}function L(t,e,r,n,i){var o=Math.abs(e.b-t.b)+Math.abs(e.a-t.a),a=Math.abs(r.b-t.b)+Math.abs(r.a-t.a),s=i+1;n[i]=.5*a/(o+a),n[s]=.5*o/(o+a),t.g[0]+=n[i]*e.g[0]+n[s]*r.g[0],t.g[1]+=n[i]*e.g[1]+n[s]*r.g[1],t.g[2]+=n[i]*e.g[2]+n[s]*r.g[2]}function k(t,e){var r=pt(e),o=e.a,s=r.a;if(i(o.a,s.a)){if(0<a(s.b.a,o.a,s.a))return!1;if(n(o.a,s.a)){if(o.a!==s.a){var r=t.e,u=o.a.h;if(u>=0){var r=r.b,l=r.d,h=r.e,c=r.c,f=c[u];l[f]=l[r.a],c[l[f]]=f,f<=--r.a&&(1>=f?ht(r,f):i(h[l[f>>1]],h[l[f]])?ht(r,f):ct(r,f)),h[u]=null,c[u]=r.b,r.b=u}else for(r.c[-(u+1)]=null;0<r.a&&null===r.c[r.d[r.a-1]];)--r.a;B(t,K(s),o)}}else g(s.b),d(o,K(s)),e.b=r.b=!0}else{if(0>a(o.b.a,s.a,o.a))return!1;dt(e).b=e.b=!0,g(o.b),d(K(s),o)}return!0}function j(t,e){var r=pt(e),h=e.a,c=r.a,p=h.a,_=c.a,b=h.b.a,m=c.b.a,y=new tt;if(a(b,t.a,p),a(m,t.a,_),p===_||Math.min(p.a,b.a)>Math.max(_.a,m.a))return!1;if(i(p,_)){if(0<a(m,p,_))return!1}else if(0>a(b,_,p))return!1;var v,w,x=b,T=p,E=m,S=_;if(i(x,T)||(v=x,x=T,T=v),i(E,S)||(v=E,E=S,S=v),i(x,E)||(v=x,x=E,E=v,v=T,T=S,S=v),i(E,T)?i(T,S)?(v=o(x,E,T),w=o(E,T,S),0>v+w&&(v=-v,w=-w),y.b=f(v,E.b,w,T.b)):(v=a(x,E,T),w=-a(x,S,T),0>v+w&&(v=-v,w=-w),y.b=f(v,E.b,w,S.b)):y.b=(E.b+T.b)/2,s(x,T)||(v=x,x=T,T=v),s(E,S)||(v=E,E=S,S=v),s(x,E)||(v=x,x=E,E=v,v=T,
T=S,S=v),s(E,T)?s(T,S)?(v=u(x,E,T),w=u(E,T,S),0>v+w&&(v=-v,w=-w),y.a=f(v,E.a,w,T.a)):(v=l(x,E,T),w=-l(x,S,T),0>v+w&&(v=-v,w=-w),y.a=f(v,E.a,w,S.a)):y.a=(E.a+T.a)/2,i(y,t.a)&&(y.b=t.a.b,y.a=t.a.a),x=i(p,_)?p:_,i(x,y)&&(y.b=x.b,y.a=x.a),n(y,p)||n(y,_))return k(t,e),!1;if(!n(b,t.a)&&0<=a(b,t.a,y)||!n(m,t.a)&&0>=a(m,t.a,y)){if(m===t.a)return g(h.b),d(c.b,h),e=A(e),h=pt(e).a,F(t,pt(e),r),D(t,e,K(h),h,h,!0),!0;if(b===t.a){g(c.b),d(h.e,K(c)),p=r=e,_=p.a.b.a;do p=dt(p);while(p.a.b.a===_);return e=p,p=pt(e).a.b.c,r.a=K(c),c=F(t,r,null),D(t,e,c.c,h.b.c,p,!0),!0}return 0<=a(b,t.a,y)&&(dt(e).b=e.b=!0,g(h.b),h.a.b=t.a.b,h.a.a=t.a.a),0>=a(m,t.a,y)&&(e.b=r.b=!0,g(c.b),c.a.b=t.a.b,c.a.a=t.a.a),!1}return g(h.b),g(c.b),d(K(c),h),h.a.b=y.b,h.a.a=y.a,h.a.h=nt(t.e,h.a),h=h.a,c=[0,0,0,0],y=[p.d,b.d,_.d,m.d],h.g[0]=h.g[1]=h.g[2]=0,L(h,p,b,c,0),L(h,_,m,c,2),N(t,h,y,c,!0),dt(e).b=e.b=r.b=!0,!1}function G(t,e){for(var r=pt(e);;){for(;r.b;)e=r,r=pt(r);if(!e.b&&(r=e,e=dt(e),null===e||!e.b))break;e.b=!1;var n,o=e.a,s=r.a;if(n=o.b.a!==s.b.a)t:{n=e;var u=pt(n),l=n.a,h=u.a,c=void 0;if(i(l.b.a,h.b.a)){if(0>a(l.b.a,h.b.a,l.a)){n=!1;break t}dt(n).b=n.b=!0,c=g(l),d(h.b,c),c.d.c=n.d}else{if(0<a(h.b.a,l.b.a,h.a)){n=!1;break t}n.b=u.b=!0,c=g(h),d(l.e,h.b),c.b.d.c=n.d}n=!0}if(n&&(r.c?(P(r),_(s),r=pt(e),s=r.a):e.c&&(P(e),_(o),e=dt(r),o=e.a)),o.a!==s.a)if(o.b.a===s.b.a||e.c||r.c||o.b.a!==t.a&&s.b.a!==t.a)k(t,e);else if(j(t,e))break;o.a===s.a&&o.b.a===s.b.a&&(O(s,o),P(e),_(o),e=dt(r))}}function z(t,e){t.a=e;for(var r=e.c;null===r.i;)if(r=r.c,r===e.c){var r=t,o=e,s=new ft;s.a=o.c.b;var u=r.f,l=u.a;do l=l.a;while(null!==l.b&&!u.c(u.b,s,l.b));var u=l.b,h=pt(u),s=u.a,l=h.a;if(0===a(s.b.a,o,s.a))s=u.a,n(s.a,o)||n(s.b.a,o)||(g(s.b),u.c&&(_(s.c),u.c=!1),d(o.c,s),z(r,o));else{var c=i(l.b.a,s.b.a)?u:h,h=void 0;u.d||c.c?(h=c===u?b(o.c.b,s.e):b(l.b.c.b,o.c).b,c.c?R(c,h):(s=r,u=U(r,u,h),u.f=dt(u).f+u.a.f,u.d=I(s,u.f)),z(r,o)):D(r,u,o.c,o.c,null,!0)}return}if(r=A(r.i),s=pt(r),u=s.a,s=F(t,s,null),s.c===u){var u=s,s=u.c,l=pt(r),h=r.a,c=l.a,f=!1;h.b.a!==c.b.a&&j(t,r),n(h.a,t.a)&&(d(K(s),h),r=A(r),s=pt(r).a,F(t,pt(r),l),f=!0),n(c.a,t.a)&&(d(u,K(c)),u=F(t,l,null),f=!0),f?D(t,r,u.c,s,s,!0):(o=i(c.a,h.a)?K(c):h,o=b(u.c.b,o),D(t,r,o,o.c,o.c,!1),o.b.i.c=!0,G(t,r))}else D(t,r,s.c,u,u,!0)}function V(t,e){var r=new ft,n=p(t.b);n.a.b=gt,n.a.a=e,n.b.a.b=-gt,n.b.a.a=e,t.a=n.b.a,r.a=n,r.f=0,r.d=!1,r.c=!1,r.h=!0,r.b=!1,n=t.f,n=X(n,n.a,r),r.e=n}function W(t){this.a=new Y,this.b=t,this.c=C}function X(t,e,r){do e=e.c;while(null!==e.b&&!t.c(t.b,e.b,r));return t=new Y(r,e.a,e),e.a.c=t,e.a=t}function Y(t,e,r){this.b=t||null,this.a=e||this,this.c=r||this}function H(){this.d=bt,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function $(t,e){if(t.d!==e)for(;t.d!==e;)if(t.d<e)switch(t.d){case bt:Z(t,100151),t.u(null);break;case 1:Z(t,100152),t.t()}else switch(t.d){case 2:Z(t,100154),t.v();break;case 1:Z(t,100153),t.w()}}function Z(t,e){t.p&&t.p(e,t.c)}function q(t,e){this.b=t||this,this.d=e||this,this.a=null,this.c=!1}function Q(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function K(t){return t.b.e}function J(){this.c=new tt,this.a=new q,this.b=new Q,this.d=new Q,this.b.b=this.d,this.d.b=this.b}function tt(t,e){this.e=t||this,this.f=e||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function et(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ot}function rt(t){t.d=[];for(var e=0;e<t.a;e++)t.d[e]=e;t.d.sort(function(t){return function(e,r){return i(t[e],t[r])?1:-1}}(t.c)),t.e=!0,st(t.b)}function nt(t,e){if(t.e){var r=t.b,n=++r.a;2*n>r.f&&(r.f*=2,r.c=at(r.c,r.f+1));var i;return 0===r.b?i=n:(i=r.b,r.b=r.c[r.b]),r.e[i]=e,r.c[i]=n,r.d[n]=i,r.h&&ct(r,n),i}return r=t.a++,t.c[r]=e,-(r+1)}function it(t){if(0===t.a)return lt(t.b);var e=t.c[t.d[t.a-1]];if(0!==t.b.a&&i(ut(t.b),e))return lt(t.b);do--t.a;while(0<t.a&&null===t.c[t.d[t.a-1]]);return e}function ot(){this.d=at([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function at(t,e){for(var r=Array(e),n=0;n<t.length;n++)r[n]=t[n];for(;e>n;n++)r[n]=0;return r}function st(t){for(var e=t.a;e>=1;--e)ht(t,e);t.h=!0}function ut(t){return t.e[t.d[1]]}function lt(t){var e=t.d,r=t.e,n=t.c,i=e[1],o=r[i];return 0<t.a&&(e[1]=e[t.a],n[e[1]]=1,r[i]=null,n[i]=t.b,t.b=i,0<--t.a&&ht(t,1)),o}function ht(t,e){for(var r=t.d,n=t.e,o=t.c,a=e,s=r[a];;){var u=a<<1;u<t.a&&i(n[r[u+1]],n[r[u]])&&(u+=1);var l=r[u];if(u>t.a||i(n[s],n[l])){r[a]=s,o[s]=a;break}r[a]=l,o[l]=a,a=u}}function ct(t,e){for(var r=t.d,n=t.e,o=t.c,a=e,s=r[a];;){var u=a>>1,l=r[u];if(0===u||i(n[l],n[s])){r[a]=s,o[s]=a;break}r[a]=l,o[l]=a,a=u}}function ft(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function pt(t){return t.e.c.b}function dt(t){return t.e.a.b}var _t,gt=4e150,bt=0;_t=H.prototype,_t.x=function(){$(this,bt)},_t.B=function(t,e){switch(t){case 100142:return;case 100140:switch(e){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=e)}break;case 100141:return void(this.m=!!e);default:return void Z(this,100900)}Z(this,100901)},_t.y=function(t){switch(t){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Z(this,100900)}return!1},_t.A=function(t,e,r){this.j[0]=t,this.j[1]=e,this.j[2]=r},_t.z=function(t,e){var r=e?e:null;switch(t){case 100100:case 100106:this.h=r;break;case 100104:case 100110:this.l=r;break;case 100101:case 100107:this.k=r;break;case 100102:case 100108:this.i=r;break;case 100103:case 100109:this.p=r;break;case 100105:case 100111:this.o=r;break;case 100112:this.r=r;break;default:Z(this,100900)}},_t.C=function(t,e){var r=!1,n=[0,0,0];$(this,2);for(var i=0;3>i;++i){var o=t[i];-1e150>o&&(o=-1e150,r=!0),o>1e150&&(o=1e150,r=!0),n[i]=o}r&&Z(this,100155),r=this.q,null===r?(r=p(this.b),d(r,r.b)):(g(r),r=r.e),r.a.d=e,r.a.g[0]=n[0],r.a.g[1]=n[1],r.a.g[2]=n[2],r.f=1,r.b.f=-1,this.q=r},_t.u=function(t){$(this,bt),this.d=1,this.b=new J,this.c=t},_t.t=function(){$(this,1),this.d=2,this.q=null},_t.v=function(){$(this,2),this.d=1},_t.w=function(){$(this,1),this.d=bt;var t=this.j[0],e=this.j[1],r=this.j[2],o=!1,s=[t,e,r];if(0===t&&0===e&&0===r){for(var e=[-2e150,-2e150,-2e150],u=[2e150,2e150,2e150],r=[],l=[],o=this.b.c,t=o.e;t!==o;t=t.e)for(var f=0;3>f;++f){var p=t.g[f];p<u[f]&&(u[f]=p,l[f]=t),p>e[f]&&(e[f]=p,r[f]=t)}if(t=0,e[1]-u[1]>e[0]-u[0]&&(t=1),e[2]-u[2]>e[t]-u[t]&&(t=2),u[t]>=e[t])s[0]=0,s[1]=0,s[2]=1;else{for(e=0,u=l[t],r=r[t],l=[0,0,0],u=[u.g[0]-r.g[0],u.g[1]-r.g[1],u.g[2]-r.g[2]],f=[0,0,0],t=o.e;t!==o;t=t.e)f[0]=t.g[0]-r.g[0],f[1]=t.g[1]-r.g[1],f[2]=t.g[2]-r.g[2],l[0]=u[1]*f[2]-u[2]*f[1],l[1]=u[2]*f[0]-u[0]*f[2],l[2]=u[0]*f[1]-u[1]*f[0],p=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],p>e&&(e=p,s[0]=l[0],s[1]=l[1],s[2]=l[2]);0>=e&&(s[0]=s[1]=s[2]=0,s[S(u)]=1)}o=!0}for(l=S(s),t=this.b.c,e=(l+1)%3,r=(l+2)%3,l=0<s[l]?1:-1,s=t.e;s!==t;s=s.e)s.b=s.g[e],s.a=l*s.g[r];if(o){for(s=0,o=this.b.a,t=o.b;t!==o;t=t.b)if(e=t.a,!(0>=e.f))do s+=(e.a.b-e.b.a.b)*(e.a.a+e.b.a.a),e=e.e;while(e!==t.a);if(0>s)for(s=this.b.c,o=s.e;o!==s;o=o.e)o.a=-o.a}for(this.n=!1,s=this.b.b,t=s.h;t!==s;t=o)o=t.h,e=t.e,n(t.a,t.b.a)&&t.e.e!==t&&(B(this,e,t),_(t),t=e,e=t.e),e.e===t&&(e!==t&&(e!==o&&e!==o.b||(o=o.h),_(e)),t!==o&&t!==o.b||(o=o.h),_(t));for(this.e=s=new et,o=this.b.c,t=o.e;t!==o;t=t.e)t.h=nt(s,t);for(rt(s),this.f=new W(this),V(this,-gt),V(this,gt);null!==(s=it(this.e));){for(;;){t:if(t=this.e,0===t.a)o=ut(t.b);else if(o=t.c[t.d[t.a-1]],0!==t.b.a&&(t=ut(t.b),i(t,o))){o=t;break t}if(null===o||!n(o,s))break;o=it(this.e),B(this,s.c,o.c)}z(this,s)}for(this.a=this.f.a.a.b.a.a,s=0;null!==(o=this.f.a.a.b);)o.h||++s,P(o);for(this.f=null,s=this.e,s.b=null,s.d=null,this.e=s.c=null,s=this.b,t=s.a.b;t!==s.a;t=o)o=t.b,t=t.a,t.e.e===t&&(O(t.c,t),_(t));if(!this.n){if(s=this.b,this.m)for(t=s.b.h;t!==s.b;t=o)o=t.h,t.b.d.c!==t.d.c?t.f=t.d.c?1:-1:_(t);else for(t=s.a.b;t!==s.a;t=o)if(o=t.b,t.c){for(t=t.a;i(t.b.a,t.a);t=t.c.b);for(;i(t.a,t.b.a);t=t.e);for(e=t.c.b,r=void 0;t.e!==e;)if(i(t.b.a,e.a)){for(;e.e!==t&&(h(e.e)||0>=a(e.a,e.b.a,e.e.b.a));)r=b(e.e,e),e=r.b;e=e.c.b}else{for(;e.e!==t&&(c(t.c.b)||0<=a(t.b.a,t.a,t.c.b.a));)r=b(t,t.c.b),t=r.b;t=t.e}for(;e.e.e!==t;)r=b(e.e,e),e=r.b}if(this.h||this.i||this.k||this.l)if(this.m){for(s=this.b,o=s.a.b;o!==s.a;o=o.b)if(o.c){this.h&&this.h(2,this.c),t=o.a;do this.k&&this.k(t.a.d,this.c),t=t.e;while(t!==o.a);this.i&&this.i(this.c)}}else{for(s=this.b,o=!!this.l,t=!1,e=-1,r=s.a.d;r!==s.a;r=r.d)if(r.c){t||(this.h&&this.h(4,this.c),t=!0),l=r.a;do o&&(u=l.b.d.c?0:1,e!==u&&(e=u,this.l&&this.l(!!e,this.c))),this.k&&this.k(l.a.d,this.c),l=l.e;while(l!==r.a)}t&&this.i&&this.i(this.c)}if(this.r){for(s=this.b,t=s.a.b;t!==s.a;t=o)if(o=t.b,!t.c){e=t.a,r=e.e,l=void 0;do l=r,r=l.e,l.d=null,null===l.b.d&&(l.c===l?T(l.a,null):(l.a.c=l.c,y(l,K(l))),u=l.b,u.c===u?T(u.a,null):(u.a.c=u.c,y(u,K(u))),x(l));while(l!==e);e=t.d,t=t.b,t.d=e,e.b=t}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:H,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},H.prototype.gluDeleteTess=H.prototype.x,H.prototype.gluTessProperty=H.prototype.B,H.prototype.gluGetTessProperty=H.prototype.y,H.prototype.gluTessNormal=H.prototype.A,H.prototype.gluTessCallback=H.prototype.z,H.prototype.gluTessVertex=H.prototype.C,H.prototype.gluTessBeginPolygon=H.prototype.u,H.prototype.gluTessBeginContour=H.prototype.t,H.prototype.gluTessEndContour=H.prototype.v,H.prototype.gluTessEndPolygon=H.prototype.w,"undefined"!=typeof e&&(e.exports=this.libtess)},{}],145:[function(t,e,r){r.endianness=function(){return"LE"},r.hostname=function(){return"undefined"!=typeof location?location.hostname:""},r.loadavg=function(){return[]},r.uptime=function(){return 0},r.freemem=function(){return Number.MAX_VALUE},r.totalmem=function(){return Number.MAX_VALUE},r.cpus=function(){return[]},r.type=function(){return"Browser"},r.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},r.networkInterfaces=r.getNetworkInterfaces=function(){return{}},r.arch=function(){return"javascript"},r.platform=function(){return"browser"},r.tmpdir=r.tmpDir=function(){return"/tmp"},r.EOL="\n"},{}],146:[function(t,e,r){"use strict";var n=t("./lib/utils/common").assign,i=t("./lib/deflate"),o=t("./lib/inflate"),a=t("./lib/zlib/constants"),s={};n(s,i,o,a),e.exports=s},{"./lib/deflate":147,"./lib/inflate":148,"./lib/utils/common":149,"./lib/zlib/constants":152}],147:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=u.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==_)throw new Error(h[r]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===f.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=s.deflateSetDictionary(this.strm,i),r!==_)throw new Error(h[r]);this._dict_set=!0}}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function o(t,e){return e=e||{},e.raw=!0,i(t,e)}function a(t,e){return e=e||{},e.gzip=!0,i(t,e)}var s=t("./zlib/deflate"),u=t("./utils/common"),l=t("./utils/strings"),h=t("./zlib/messages"),c=t("./zlib/zstream"),f=Object.prototype.toString,p=0,d=4,_=0,g=1,b=2,m=-1,y=0,v=8;n.prototype.push=function(t,e){var r,n,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?d:p,"string"==typeof t?i.input=l.string2buf(t):"[object ArrayBuffer]"===f.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(o),i.next_out=0,i.avail_out=o),r=s.deflate(i,n),r!==g&&r!==_)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||n!==d&&n!==b)||("string"===this.options.to?this.onData(l.buf2binstring(u.shrinkBuf(i.output,i.next_out))):this.onData(u.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&r!==g);return n===d?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===_):n===b?(this.onEnd(_),i.avail_out=0,!0):!0},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===_&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=n,r.deflate=i,r.deflateRaw=o,r.gzip=a},{"./utils/common":149,"./utils/strings":150,"./zlib/deflate":154,"./zlib/messages":159,"./zlib/zstream":161}],148:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,e.windowBits);if(r!==l.Z_OK)throw new Error(h[r]);this.header=new f,a.inflateGetHeader(this.strm,this.header)}function i(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function o(t,e){return e=e||{},e.raw=!0,i(t,e)}var a=t("./zlib/inflate"),s=t("./utils/common"),u=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),c=t("./zlib/zstream"),f=t("./zlib/gzheader"),p=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,i,o,h,c,f=this.strm,d=this.options.chunkSize,_=this.options.dictionary,g=!1;if(this.ended)return!1;n=e===~~e?e:e===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof t?f.input=u.binstring2buf(t):"[object ArrayBuffer]"===p.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(d),f.next_out=0,f.avail_out=d),r=a.inflate(f,l.Z_NO_FLUSH),r===l.Z_NEED_DICT&&_&&(c="string"==typeof _?u.string2buf(_):"[object ArrayBuffer]"===p.call(_)?new Uint8Array(_):_,r=a.inflateSetDictionary(this.strm,c)),r===l.Z_BUF_ERROR&&g===!0&&(r=l.Z_OK,g=!1),r!==l.Z_STREAM_END&&r!==l.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==l.Z_STREAM_END&&(0!==f.avail_in||n!==l.Z_FINISH&&n!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(i=u.utf8border(f.output,f.next_out),o=f.next_out-i,h=u.buf2string(f.output,i),f.next_out=o,f.avail_out=d-o,o&&s.arraySet(f.output,f.output,i,o,0),this.onData(h)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==l.Z_STREAM_END);return r===l.Z_STREAM_END&&(n=l.Z_FINISH),n===l.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l.Z_OK):n===l.Z_SYNC_FLUSH?(this.onEnd(l.Z_OK),f.avail_out=0,!0):!0},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=n,r.inflate=i,r.inflateRaw=o,r.ungzip=i},{"./utils/common":149,"./utils/strings":150,"./zlib/constants":152,"./zlib/gzheader":155,"./zlib/inflate":157,"./zlib/messages":159,"./zlib/zstream":161}],149:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var o=0;n>o;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;r>e;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;r>e;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,r,n,i){for(var o=0;n>o;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],150:[function(t,e,r){"use strict";function n(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;e>n;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(s){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){a=!1}for(var u=new i.Buf8(256),l=0;256>l;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,r.string2buf=function(t){var e,r,n,o,a,s=t.length,u=0;for(o=0;s>o;o++)r=t.charCodeAt(o),55296===(64512&r)&&s>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),u+=128>r?1:2048>r?2:65536>r?3:4;for(e=new i.Buf8(u),a=0,o=0;u>a;o++)r=t.charCodeAt(o),55296===(64512&r)&&s>o+1&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),o++)),128>r?e[a++]=r:2048>r?(e[a++]=192|r>>>6,e[a++]=128|63&r):65536>r?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;n>r;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,o,a,s=e||t.length,l=new Array(2*s);for(i=0,r=0;s>r;)if(o=t[r++],128>o)l[i++]=o;else if(a=u[o],a>4)l[i++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&s>r;)o=o<<6|63&t[r++],a--;a>1?l[i++]=65533:65536>o?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return n(l,i)},r.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+u[t[r]]>e?r:e}},{"./common":149}],151:[function(t,e,r){"use strict";function n(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}e.exports=n},{}],152:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],153:[function(t,e,r){"use strict";function n(){for(var t,e=[],r=0;256>r;r++){t=r;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function i(t,e,r,n){var i=o,a=n+r;t^=-1;for(var s=n;a>s;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}var o=n();e.exports=i},{}],154:[function(t,e,r){"use strict";function n(t,e){return t.msg=F[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(A.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function s(t,e){U._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function h(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,A.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=I(t.adler,e,i,r):2===t.state.wrap&&(t.adler=M(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function c(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,h=t.w_mask,c=t.prev,f=t.strstart+ht,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do if(r=e,l[r+a]===d&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do;while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&f>o);if(n=ht-(f-o),o=f-ht,n>a){if(t.match_start=e,a=n,n>=s)break;p=l[o+a-1],d=l[o+a]}}while((e=c[e&h])>u&&0!==--i);return a<=t.lookahead?a:t.lookahead}function f(t){var e,r,n,i,o,a=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-ct)){A.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,r=t.hash_size,e=r;do n=t.head[--e],t.head[e]=n>=a?n-a:0;while(--r);r=a,e=r;do n=t.prev[--e],t.prev[e]=n>=a?n-a:0;while(--r);i+=a}if(0===t.strm.avail_in)break;if(r=h(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=lt)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+lt-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<lt)););}while(t.lookahead<ct&&0!==t.strm.avail_in)}function p(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(f(t),0===t.lookahead&&e===D)return vt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,s(t,!1),0===t.strm.avail_out))return vt;if(t.strstart-t.block_start>=t.w_size-ct&&(s(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===L?(s(t,!0),0===t.strm.avail_out?xt:Tt):t.strstart>t.block_start&&(s(t,!1),0===t.strm.avail_out)?vt:vt}function d(t,e){for(var r,n;;){if(t.lookahead<ct){if(f(t),t.lookahead<ct&&e===D)return vt;if(0===t.lookahead)break}if(r=0,t.lookahead>=lt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-ct&&(t.match_length=c(t,r)),t.match_length>=lt)if(n=U._tr_tally(t,t.strstart-t.match_start,t.match_length-lt),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=lt){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=U._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(s(t,!1),0===t.strm.avail_out))return vt}return t.insert=t.strstart<lt-1?t.strstart:lt-1,e===L?(s(t,!0),0===t.strm.avail_out?xt:Tt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?vt:wt}function _(t,e){for(var r,n,i;;){if(t.lookahead<ct){if(f(t),t.lookahead<ct&&e===D)return vt;if(0===t.lookahead)break}if(r=0,t.lookahead>=lt&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=lt-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-ct&&(t.match_length=c(t,r),t.match_length<=5&&(t.strategy===Y||t.match_length===lt&&t.strstart-t.match_start>4096)&&(t.match_length=lt-1)),t.prev_length>=lt&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-lt,n=U._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-lt),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+lt-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=lt-1,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return vt}else if(t.match_available){if(n=U._tr_tally(t,0,t.window[t.strstart-1]),n&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return vt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=U._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<lt-1?t.strstart:lt-1,e===L?(s(t,!0),0===t.strm.avail_out?xt:Tt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?vt:wt}function g(t,e){for(var r,n,i,o,a=t.window;;){if(t.lookahead<=ht){if(f(t),t.lookahead<=ht&&e===D)return vt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=lt&&t.strstart>0&&(i=t.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=t.strstart+ht;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&o>i);t.match_length=ht-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=lt?(r=U._tr_tally(t,1,t.match_length-lt),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=U._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(s(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===L?(s(t,!0),0===t.strm.avail_out?xt:Tt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?vt:wt}function b(t,e){for(var r;;){if(0===t.lookahead&&(f(t),0===t.lookahead)){if(e===D)return vt;break}if(t.match_length=0,r=U._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===L?(s(t,!0),0===t.strm.avail_out?xt:Tt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?vt:wt}function m(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function y(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=R[t.level].max_lazy,t.good_match=R[t.level].good_length,t.nice_match=R[t.level].nice_length,t.max_chain_length=R[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=lt-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*st),this.dyn_dtree=new A.Buf16(2*(2*ot+1)),this.bl_tree=new A.Buf16(2*(2*at+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(ut+1),this.heap=new A.Buf16(2*it+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*it+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?pt:mt,t.adler=2===e.wrap?0:1,e.last_flush=D,U._tr_init(e),j):n(t,z)}function x(t){var e=w(t);return e===j&&y(t.state),e}function T(t,e){return t&&t.state?2!==t.state.wrap?z:(t.state.gzhead=e,j):z}function E(t,e,r,i,o,a){if(!t)return z;var s=1;if(e===X&&(e=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>o||o>J||r!==K||8>i||i>15||0>e||e>9||0>a||a>Z)return n(t,z);8===i&&(i=9);var u=new v;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+lt-1)/lt),u.window=new A.Buf8(2*u.w_size),u.head=new A.Buf16(u.hash_size),u.prev=new A.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new A.Buf8(u.pending_buf_size),u.d_buf=u.lit_bufsize>>1,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,x(t)}function S(t,e){return E(t,e,K,tt,et,q)}function O(t,e){var r,s,h,c;if(!t||!t.state||e>k||0>e)return t?n(t,z):z;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===yt&&e!==L)return n(t,0===t.avail_out?W:z);if(s.strm=t,r=s.last_flush,s.last_flush=e,s.status===pt)if(2===s.wrap)t.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=M(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=dt):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),u(s,Et),s.status=mt);else{var f=K+(s.w_bits-8<<4)<<8,p=-1;p=s.strategy>=H||s.level<2?0:s.level<6?1:6===s.level?2:3,f|=p<<6,0!==s.strstart&&(f|=ft),f+=31-f%31,s.status=mt,l(s,f),0!==s.strstart&&(l(s,t.adler>>>16),l(s,65535&t.adler)),t.adler=1}if(s.status===dt)if(s.gzhead.extra){for(h=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>h&&(t.adler=M(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>h&&(t.adler=M(t.adler,s.pending_buf,s.pending-h,h)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=_t)}else s.status=_t;if(s.status===_t)if(s.gzhead.name){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=M(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>h&&(t.adler=M(t.adler,s.pending_buf,s.pending-h,h)),0===c&&(s.gzindex=0,s.status=gt)}else s.status=gt;if(s.status===gt)if(s.gzhead.comment){h=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>h&&(t.adler=M(t.adler,s.pending_buf,s.pending-h,h)),a(t),h=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>h&&(t.adler=M(t.adler,s.pending_buf,s.pending-h,h)),0===c&&(s.status=bt)}else s.status=bt;if(s.status===bt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(t),s.pending+2<=s.pending_buf_size&&(u(s,255&t.adler),u(s,t.adler>>8&255),
t.adler=0,s.status=mt)):s.status=mt),0!==s.pending){if(a(t),0===t.avail_out)return s.last_flush=-1,j}else if(0===t.avail_in&&i(e)<=i(r)&&e!==L)return n(t,W);if(s.status===yt&&0!==t.avail_in)return n(t,W);if(0!==t.avail_in||0!==s.lookahead||e!==D&&s.status!==yt){var d=s.strategy===H?b(s,e):s.strategy===$?g(s,e):R[s.level].func(s,e);if(d!==xt&&d!==Tt||(s.status=yt),d===vt||d===xt)return 0===t.avail_out&&(s.last_flush=-1),j;if(d===wt&&(e===N?U._tr_align(s):e!==k&&(U._tr_stored_block(s,0,0,!1),e===B&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(t),0===t.avail_out))return s.last_flush=-1,j}return e!==L?j:s.wrap<=0?G:(2===s.wrap?(u(s,255&t.adler),u(s,t.adler>>8&255),u(s,t.adler>>16&255),u(s,t.adler>>24&255),u(s,255&t.total_in),u(s,t.total_in>>8&255),u(s,t.total_in>>16&255),u(s,t.total_in>>24&255)):(l(s,t.adler>>>16),l(s,65535&t.adler)),a(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?j:G)}function C(t){var e;return t&&t.state?(e=t.state.status,e!==pt&&e!==dt&&e!==_t&&e!==gt&&e!==bt&&e!==mt&&e!==yt?n(t,z):(t.state=null,e===mt?n(t,V):j)):z}function P(t,e){var r,n,i,a,s,u,l,h,c=e.length;if(!t||!t.state)return z;if(r=t.state,a=r.wrap,2===a||1===a&&r.status!==pt||r.lookahead)return z;for(1===a&&(t.adler=I(t.adler,e,c,0)),r.wrap=0,c>=r.w_size&&(0===a&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new A.Buf8(r.w_size),A.arraySet(h,e,c-r.w_size,r.w_size,0),e=h,c=r.w_size),s=t.avail_in,u=t.next_in,l=t.input,t.avail_in=c,t.next_in=0,t.input=e,f(r);r.lookahead>=lt;){n=r.strstart,i=r.lookahead-(lt-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+lt-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++;while(--i);r.strstart=n,r.lookahead=lt-1,f(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=lt-1,r.match_available=0,t.next_in=u,t.input=l,t.avail_in=s,r.wrap=a,j}var R,A=t("../utils/common"),U=t("./trees"),I=t("./adler32"),M=t("./crc32"),F=t("./messages"),D=0,N=1,B=3,L=4,k=5,j=0,G=1,z=-2,V=-3,W=-5,X=-1,Y=1,H=2,$=3,Z=4,q=0,Q=2,K=8,J=9,tt=15,et=8,rt=29,nt=256,it=nt+1+rt,ot=30,at=19,st=2*it+1,ut=15,lt=3,ht=258,ct=ht+lt+1,ft=32,pt=42,dt=69,_t=73,gt=91,bt=103,mt=113,yt=666,vt=1,wt=2,xt=3,Tt=4,Et=3;R=[new m(0,0,0,0,p),new m(4,4,8,4,d),new m(4,5,16,8,d),new m(4,6,32,32,d),new m(4,4,16,16,_),new m(8,16,32,32,_),new m(8,16,128,128,_),new m(8,32,128,256,_),new m(32,128,258,1024,_),new m(32,258,258,4096,_)],r.deflateInit=S,r.deflateInit2=E,r.deflateReset=x,r.deflateResetKeep=w,r.deflateSetHeader=T,r.deflate=O,r.deflateEnd=C,r.deflateSetDictionary=P,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":149,"./adler32":151,"./crc32":153,"./messages":159,"./trees":160}],155:[function(t,e,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},{}],156:[function(t,e,r){"use strict";var n=30,i=12;e.exports=function(t,e){var r,o,a,s,u,l,h,c,f,p,d,_,g,b,m,y,v,w,x,T,E,S,O,C,P;r=t.state,o=t.next_in,C=t.input,a=o+(t.avail_in-5),s=t.next_out,P=t.output,u=s-(e-t.avail_out),l=s+(t.avail_out-257),h=r.dmax,c=r.wsize,f=r.whave,p=r.wnext,d=r.window,_=r.hold,g=r.bits,b=r.lencode,m=r.distcode,y=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{15>g&&(_+=C[o++]<<g,g+=8,_+=C[o++]<<g,g+=8),w=b[_&y];e:for(;;){if(x=w>>>24,_>>>=x,g-=x,x=w>>>16&255,0===x)P[s++]=65535&w;else{if(!(16&x)){if(0===(64&x)){w=b[(65535&w)+(_&(1<<x)-1)];continue e}if(32&x){r.mode=i;break t}t.msg="invalid literal/length code",r.mode=n;break t}T=65535&w,x&=15,x&&(x>g&&(_+=C[o++]<<g,g+=8),T+=_&(1<<x)-1,_>>>=x,g-=x),15>g&&(_+=C[o++]<<g,g+=8,_+=C[o++]<<g,g+=8),w=m[_&v];r:for(;;){if(x=w>>>24,_>>>=x,g-=x,x=w>>>16&255,!(16&x)){if(0===(64&x)){w=m[(65535&w)+(_&(1<<x)-1)];continue r}t.msg="invalid distance code",r.mode=n;break t}if(E=65535&w,x&=15,x>g&&(_+=C[o++]<<g,g+=8,x>g&&(_+=C[o++]<<g,g+=8)),E+=_&(1<<x)-1,E>h){t.msg="invalid distance too far back",r.mode=n;break t}if(_>>>=x,g-=x,x=s-u,E>x){if(x=E-x,x>f&&r.sane){t.msg="invalid distance too far back",r.mode=n;break t}if(S=0,O=d,0===p){if(S+=c-x,T>x){T-=x;do P[s++]=d[S++];while(--x);S=s-E,O=P}}else if(x>p){if(S+=c+p-x,x-=p,T>x){T-=x;do P[s++]=d[S++];while(--x);if(S=0,T>p){x=p,T-=x;do P[s++]=d[S++];while(--x);S=s-E,O=P}}}else if(S+=p-x,T>x){T-=x;do P[s++]=d[S++];while(--x);S=s-E,O=P}for(;T>2;)P[s++]=O[S++],P[s++]=O[S++],P[s++]=O[S++],T-=3;T&&(P[s++]=O[S++],T>1&&(P[s++]=O[S++]))}else{S=s-E;do P[s++]=P[S++],P[s++]=P[S++],P[s++]=P[S++],T-=3;while(T>2);T&&(P[s++]=P[S++],T>1&&(P[s++]=P[S++]))}break}}break}}while(a>o&&l>s);T=g>>3,o-=T,g-=T<<3,_&=(1<<g)-1,t.next_in=o,t.next_out=s,t.avail_in=a>o?5+(a-o):5-(o-a),t.avail_out=l>s?257+(l-s):257-(s-l),r.hold=_,r.bits=g}},{}],157:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=B,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(_t),e.distcode=e.distdyn=new m.Buf32(gt),e.sane=1,e.back=-1,R):I}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):I}function s(t,e){var r,n;return t&&t.state?(n=t.state,0>e?(r=0,e=-e):(r=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?I:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,a(t))):I}function u(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=s(t,e),r!==R&&(t.state=null),r):I}function l(t){return u(t,mt)}function h(t){if(yt){var e;for(g=new m.Buf32(512),b=new m.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(x(E,t.lens,0,288,g,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;x(S,t.lens,0,32,b,0,t.work,{bits:5}),yt=!1}t.lencode=g,t.lenbits=9,t.distcode=b,t.distbits=5}function c(t,e,r,n){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new m.Buf8(o.wsize)),n>=o.wsize?(m.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),m.arraySet(o.window,e,r-n,i,o.wnext),n-=i,n?(m.arraySet(o.window,e,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function f(t,e){var r,i,o,a,s,u,l,f,p,d,_,g,b,_t,gt,bt,mt,yt,vt,wt,xt,Tt,Et,St,Ot=0,Ct=new m.Buf8(4),Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return I;r=t.state,r.mode===$&&(r.mode=Z),s=t.next_out,o=t.output,l=t.avail_out,a=t.next_in,i=t.input,u=t.avail_in,f=r.hold,p=r.bits,d=u,_=l,Tt=R;t:for(;;)switch(r.mode){case B:if(0===r.wrap){r.mode=Z;break}for(;16>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(2&r.wrap&&35615===f){r.check=0,Ct[0]=255&f,Ct[1]=f>>>8&255,r.check=v(r.check,Ct,2,0),f=0,p=0,r.mode=L;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&f)<<8)+(f>>8))%31){t.msg="incorrect header check",r.mode=ft;break}if((15&f)!==N){t.msg="unknown compression method",r.mode=ft;break}if(f>>>=4,p-=4,xt=(15&f)+8,0===r.wbits)r.wbits=xt;else if(xt>r.wbits){t.msg="invalid window size",r.mode=ft;break}r.dmax=1<<xt,t.adler=r.check=1,r.mode=512&f?Y:$,f=0,p=0;break;case L:for(;16>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(r.flags=f,(255&r.flags)!==N){t.msg="unknown compression method",r.mode=ft;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ft;break}r.head&&(r.head.text=f>>8&1),512&r.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,r.check=v(r.check,Ct,2,0)),f=0,p=0,r.mode=k;case k:for(;32>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}r.head&&(r.head.time=f),512&r.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,Ct[2]=f>>>16&255,Ct[3]=f>>>24&255,r.check=v(r.check,Ct,4,0)),f=0,p=0,r.mode=j;case j:for(;16>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}r.head&&(r.head.xflags=255&f,r.head.os=f>>8),512&r.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,r.check=v(r.check,Ct,2,0)),f=0,p=0,r.mode=G;case G:if(1024&r.flags){for(;16>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}r.length=f,r.head&&(r.head.extra_len=f),512&r.flags&&(Ct[0]=255&f,Ct[1]=f>>>8&255,r.check=v(r.check,Ct,2,0)),f=0,p=0}else r.head&&(r.head.extra=null);r.mode=z;case z:if(1024&r.flags&&(g=r.length,g>u&&(g=u),g&&(r.head&&(xt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),m.arraySet(r.head.extra,i,a,g,xt)),512&r.flags&&(r.check=v(r.check,i,g,a)),u-=g,a+=g,r.length-=g),r.length))break t;r.length=0,r.mode=V;case V:if(2048&r.flags){if(0===u)break t;g=0;do xt=i[a+g++],r.head&&xt&&r.length<65536&&(r.head.name+=String.fromCharCode(xt));while(xt&&u>g);if(512&r.flags&&(r.check=v(r.check,i,g,a)),u-=g,a+=g,xt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=W;case W:if(4096&r.flags){if(0===u)break t;g=0;do xt=i[a+g++],r.head&&xt&&r.length<65536&&(r.head.comment+=String.fromCharCode(xt));while(xt&&u>g);if(512&r.flags&&(r.check=v(r.check,i,g,a)),u-=g,a+=g,xt)break t}else r.head&&(r.head.comment=null);r.mode=X;case X:if(512&r.flags){for(;16>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(f!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ft;break}f=0,p=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=$;break;case Y:for(;32>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}t.adler=r.check=n(f),f=0,p=0,r.mode=H;case H:if(0===r.havedict)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=u,r.hold=f,r.bits=p,U;t.adler=r.check=1,r.mode=$;case $:if(e===C||e===P)break t;case Z:if(r.last){f>>>=7&p,p-=7&p,r.mode=lt;break}for(;3>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}switch(r.last=1&f,f>>>=1,p-=1,3&f){case 0:r.mode=q;break;case 1:if(h(r),r.mode=rt,e===P){f>>>=2,p-=2;break t}break;case 2:r.mode=J;break;case 3:t.msg="invalid block type",r.mode=ft}f>>>=2,p-=2;break;case q:for(f>>>=7&p,p-=7&p;32>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if((65535&f)!==(f>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ft;break}if(r.length=65535&f,f=0,p=0,r.mode=Q,e===P)break t;case Q:r.mode=K;case K:if(g=r.length){if(g>u&&(g=u),g>l&&(g=l),0===g)break t;m.arraySet(o,i,a,g,s),u-=g,a+=g,l-=g,s+=g,r.length-=g;break}r.mode=$;break;case J:for(;14>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(r.nlen=(31&f)+257,f>>>=5,p-=5,r.ndist=(31&f)+1,f>>>=5,p-=5,r.ncode=(15&f)+4,f>>>=4,p-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ft;break}r.have=0,r.mode=tt;case tt:for(;r.have<r.ncode;){for(;3>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}r.lens[Pt[r.have++]]=7&f,f>>>=3,p-=3}for(;r.have<19;)r.lens[Pt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Et={bits:r.lenbits},Tt=x(T,r.lens,0,19,r.lencode,0,r.work,Et),r.lenbits=Et.bits,Tt){t.msg="invalid code lengths set",r.mode=ft;break}r.have=0,r.mode=et;case et:for(;r.have<r.nlen+r.ndist;){for(;Ot=r.lencode[f&(1<<r.lenbits)-1],gt=Ot>>>24,bt=Ot>>>16&255,mt=65535&Ot,!(p>=gt);){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(16>mt)f>>>=gt,p-=gt,r.lens[r.have++]=mt;else{if(16===mt){for(St=gt+2;St>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(f>>>=gt,p-=gt,0===r.have){t.msg="invalid bit length repeat",r.mode=ft;break}xt=r.lens[r.have-1],g=3+(3&f),f>>>=2,p-=2}else if(17===mt){for(St=gt+3;St>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}f>>>=gt,p-=gt,xt=0,g=3+(7&f),f>>>=3,p-=3}else{for(St=gt+7;St>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}f>>>=gt,p-=gt,xt=0,g=11+(127&f),f>>>=7,p-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ft;break}for(;g--;)r.lens[r.have++]=xt}}if(r.mode===ft)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ft;break}if(r.lenbits=9,Et={bits:r.lenbits},Tt=x(E,r.lens,0,r.nlen,r.lencode,0,r.work,Et),r.lenbits=Et.bits,Tt){t.msg="invalid literal/lengths set",r.mode=ft;break}if(r.distbits=6,r.distcode=r.distdyn,Et={bits:r.distbits},Tt=x(S,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Et),r.distbits=Et.bits,Tt){t.msg="invalid distances set",r.mode=ft;break}if(r.mode=rt,e===P)break t;case rt:r.mode=nt;case nt:if(u>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=u,r.hold=f,r.bits=p,w(t,_),s=t.next_out,o=t.output,l=t.avail_out,a=t.next_in,i=t.input,u=t.avail_in,f=r.hold,p=r.bits,r.mode===$&&(r.back=-1);break}for(r.back=0;Ot=r.lencode[f&(1<<r.lenbits)-1],gt=Ot>>>24,bt=Ot>>>16&255,mt=65535&Ot,!(p>=gt);){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(bt&&0===(240&bt)){for(yt=gt,vt=bt,wt=mt;Ot=r.lencode[wt+((f&(1<<yt+vt)-1)>>yt)],gt=Ot>>>24,bt=Ot>>>16&255,mt=65535&Ot,!(p>=yt+gt);){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}f>>>=yt,p-=yt,r.back+=yt}if(f>>>=gt,p-=gt,r.back+=gt,r.length=mt,0===bt){r.mode=ut;break}if(32&bt){r.back=-1,r.mode=$;break}if(64&bt){t.msg="invalid literal/length code",r.mode=ft;break}r.extra=15&bt,r.mode=it;case it:if(r.extra){for(St=r.extra;St>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,p-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ot;case ot:for(;Ot=r.distcode[f&(1<<r.distbits)-1],gt=Ot>>>24,bt=Ot>>>16&255,mt=65535&Ot,!(p>=gt);){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(0===(240&bt)){for(yt=gt,vt=bt,wt=mt;Ot=r.distcode[wt+((f&(1<<yt+vt)-1)>>yt)],gt=Ot>>>24,bt=Ot>>>16&255,mt=65535&Ot,!(p>=yt+gt);){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}f>>>=yt,p-=yt,r.back+=yt}if(f>>>=gt,p-=gt,r.back+=gt,64&bt){t.msg="invalid distance code",r.mode=ft;break}r.offset=mt,r.extra=15&bt,r.mode=at;case at:if(r.extra){for(St=r.extra;St>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,p-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ft;break}r.mode=st;case st:if(0===l)break t;if(g=_-l,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ft;break}g>r.wnext?(g-=r.wnext,b=r.wsize-g):b=r.wnext-g,g>r.length&&(g=r.length),_t=r.window}else _t=o,b=s-r.offset,g=r.length;g>l&&(g=l),l-=g,r.length-=g;do o[s++]=_t[b++];while(--g);0===r.length&&(r.mode=nt);break;case ut:if(0===l)break t;o[s++]=r.length,l--,r.mode=nt;break;case lt:if(r.wrap){for(;32>p;){if(0===u)break t;u--,f|=i[a++]<<p,p+=8}if(_-=l,t.total_out+=_,r.total+=_,_&&(t.adler=r.check=r.flags?v(r.check,o,_,s-_):y(r.check,o,_,s-_)),_=l,(r.flags?f:n(f))!==r.check){t.msg="incorrect data check",r.mode=ft;break}f=0,p=0}r.mode=ht;case ht:if(r.wrap&&r.flags){for(;32>p;){if(0===u)break t;u--,f+=i[a++]<<p,p+=8}if(f!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ft;break}f=0,p=0}r.mode=ct;case ct:Tt=A;break t;case ft:Tt=M;break t;case pt:return F;case dt:default:return I}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=u,r.hold=f,r.bits=p,(r.wsize||_!==t.avail_out&&r.mode<ft&&(r.mode<lt||e!==O))&&c(t,t.output,t.next_out,_-t.avail_out)?(r.mode=pt,F):(d-=t.avail_in,_-=t.avail_out,t.total_in+=d,t.total_out+=_,r.total+=_,r.wrap&&_&&(t.adler=r.check=r.flags?v(r.check,o,_,t.next_out-_):y(r.check,o,_,t.next_out-_)),t.data_type=r.bits+(r.last?64:0)+(r.mode===$?128:0)+(r.mode===rt||r.mode===Q?256:0),(0===d&&0===_||e===O)&&Tt===R&&(Tt=D),Tt)}function p(t){if(!t||!t.state)return I;var e=t.state;return e.window&&(e.window=null),t.state=null,R}function d(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?I:(r.head=e,e.done=!1,R)):I}function _(t,e){var r,n,i,o=e.length;return t&&t.state?(r=t.state,0!==r.wrap&&r.mode!==H?I:r.mode===H&&(n=1,n=y(n,e,o,0),n!==r.check)?M:(i=c(t,e,o,o))?(r.mode=pt,F):(r.havedict=1,R)):I}var g,b,m=t("../utils/common"),y=t("./adler32"),v=t("./crc32"),w=t("./inffast"),x=t("./inftrees"),T=0,E=1,S=2,O=4,C=5,P=6,R=0,A=1,U=2,I=-2,M=-3,F=-4,D=-5,N=8,B=1,L=2,k=3,j=4,G=5,z=6,V=7,W=8,X=9,Y=10,H=11,$=12,Z=13,q=14,Q=15,K=16,J=17,tt=18,et=19,rt=20,nt=21,it=22,ot=23,at=24,st=25,ut=26,lt=27,ht=28,ct=29,ft=30,pt=31,dt=32,_t=852,gt=592,bt=15,mt=bt,yt=!0;r.inflateReset=a,r.inflateReset2=s,r.inflateResetKeep=o,r.inflateInit=l,r.inflateInit2=u,r.inflate=f,r.inflateEnd=p,r.inflateGetHeader=d,r.inflateSetDictionary=_,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":149,"./adler32":151,"./crc32":153,"./inffast":156,"./inftrees":158}],158:[function(t,e,r){"use strict";var n=t("../utils/common"),i=15,o=852,a=592,s=0,u=1,l=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,d,_,g,b,m){var y,v,w,x,T,E,S,O,C,P=m.bits,R=0,A=0,U=0,I=0,M=0,F=0,D=0,N=0,B=0,L=0,k=null,j=0,G=new n.Buf16(i+1),z=new n.Buf16(i+1),V=null,W=0;for(R=0;i>=R;R++)G[R]=0;for(A=0;d>A;A++)G[e[r+A]]++;for(M=P,I=i;I>=1&&0===G[I];I--);if(M>I&&(M=I),0===I)return _[g++]=20971520,_[g++]=20971520,m.bits=1,0;for(U=1;I>U&&0===G[U];U++);for(U>M&&(M=U),N=1,R=1;i>=R;R++)if(N<<=1,N-=G[R],0>N)return-1;if(N>0&&(t===s||1!==I))return-1;for(z[1]=0,R=1;i>R;R++)z[R+1]=z[R]+G[R];for(A=0;d>A;A++)0!==e[r+A]&&(b[z[e[r+A]]++]=A);if(t===s?(k=V=b,E=19):t===u?(k=h,j-=257,V=c,W-=257,E=256):(k=f,V=p,E=-1),L=0,A=0,R=U,T=g,F=M,D=0,w=-1,B=1<<M,x=B-1,t===u&&B>o||t===l&&B>a)return 1;for(var X=0;;){X++,S=R-D,b[A]<E?(O=0,C=b[A]):b[A]>E?(O=V[W+b[A]],C=k[j+b[A]]):(O=96,C=0),y=1<<R-D,v=1<<F,U=v;do v-=y,_[T+(L>>D)+v]=S<<24|O<<16|C|0;while(0!==v);for(y=1<<R-1;L&y;)y>>=1;if(0!==y?(L&=y-1,L+=y):L=0,A++,0===--G[R]){if(R===I)break;R=e[r+b[A]]}if(R>M&&(L&x)!==w){for(0===D&&(D=M),T+=U,F=R-D,N=1<<F;I>F+D&&(N-=G[F+D],!(0>=N));)F++,N<<=1;if(B+=1<<F,t===u&&B>o||t===l&&B>a)return 1;w=L&x,_[w]=M<<24|F<<16|T-g|0}}return 0!==L&&(_[T+L]=R-D<<24|64<<16|0),m.bits=M,0}},{"../utils/common":149}],159:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],160:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return 256>t?ut[t]:ut[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,r){t.bi_valid>Z-r?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>Z-t.bi_valid,t.bi_valid+=r-Z):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function l(t,e,r){u(t,r[2*e],r[2*e+1])}function h(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function c(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function f(t,e){var r,n,i,o,a,s,u=e.dyn_tree,l=e.max_code,h=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,_=0;for(o=0;$>=o;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;H>r;r++)n=t.heap[r],o=u[2*u[2*n+1]+1]+1,o>d&&(o=d,_++),u[2*n+1]=o,n>l||(t.bl_count[o]++,a=0,n>=p&&(a=f[n-p]),s=u[2*n],t.opt_len+=s*(o+a),c&&(t.static_len+=s*(h[2*n+1]+a)));if(0!==_){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,_-=2}while(_>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)i=t.heap[--r],i>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}function p(t,e,r){var n,i,o=new Array($+1),a=0;for(n=1;$>=n;n++)o[n]=a=a+r[n-1]<<1;for(i=0;e>=i;i++){var s=t[2*i+1];0!==s&&(t[2*i]=h(o[s]++,s))}}function d(){var t,e,r,n,o,a=new Array($+1);for(r=0,n=0;z-1>n;n++)for(ht[n]=r,t=0;t<1<<et[n];t++)lt[r++]=n;for(lt[r-1]=n,o=0,n=0;16>n;n++)for(ct[n]=o,t=0;t<1<<rt[n];t++)ut[o++]=n;for(o>>=7;X>n;n++)for(ct[n]=o<<7,t=0;t<1<<rt[n]-7;t++)ut[256+o++]=n;for(e=0;$>=e;e++)a[e]=0;for(t=0;143>=t;)at[2*t+1]=8,t++,a[8]++;for(;255>=t;)at[2*t+1]=9,t++,a[9]++;for(;279>=t;)at[2*t+1]=7,t++,a[7]++;for(;287>=t;)at[2*t+1]=8,t++,a[8]++;for(p(at,W+1,a),t=0;X>t;t++)st[2*t+1]=5,st[2*t]=h(t,5);ft=new i(at,et,V+1,W,$),pt=new i(st,rt,0,X,$),dt=new i(new Array(0),nt,0,Y,q)}function _(t){var e;for(e=0;W>e;e++)t.dyn_ltree[2*e]=0;for(e=0;X>e;e++)t.dyn_dtree[2*e]=0;for(e=0;Y>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function g(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function b(t,e,r,n){g(t),n&&(s(t,r),s(t,~r)),I.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function m(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function y(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&m(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!m(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function v(t,e,r){var n,i,o,s,h=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],i=t.pending_buf[t.l_buf+h],h++,0===n?l(t,i,e):(o=lt[i],l(t,o+V+1,e),s=et[o],0!==s&&(i-=ht[o],u(t,i,s)),n--,o=a(n),l(t,o,r),s=rt[o],0!==s&&(n-=ct[o],u(t,n,s)));while(h<t.last_lit);l(t,Q,e)}function w(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=H,r=0;u>r;r++)0!==o[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=2>l?++l:0,o[2*i]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)y(t,o,r);i=u;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],y(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,y(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],f(t,e),p(o,l,t.bl_count)}function x(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(r+1)+1]=65535,n=0;r>=n;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(l>s?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*K]++):10>=s?t.bl_tree[2*J]++:t.bl_tree[2*tt]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function T(t,e,r){var n,i,o=-1,a=e[1],s=0,h=7,c=4;for(0===a&&(h=138,c=3),n=0;r>=n;n++)if(i=a,a=e[2*(n+1)+1],!(++s<h&&i===a)){if(c>s){do l(t,i,t.bl_tree);while(0!==--s)}else 0!==i?(i!==o&&(l(t,i,t.bl_tree),s--),l(t,K,t.bl_tree),u(t,s-3,2)):10>=s?(l(t,J,t.bl_tree),u(t,s-3,3)):(l(t,tt,t.bl_tree),u(t,s-11,7));s=0,o=i,0===a?(h=138,c=3):i===a?(h=6,c=3):(h=7,c=4)}}function E(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=Y-1;e>=3&&0===t.bl_tree[2*it[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function S(t,e,r,n){var i;for(u(t,e-257,5),u(t,r-1,5),u(t,n-4,4),i=0;n>i;i++)u(t,t.bl_tree[2*it[i]+1],3);T(t,t.dyn_ltree,e-1),T(t,t.dyn_dtree,r-1)}function O(t){var e,r=4093624447;for(e=0;31>=e;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return F;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;V>e;e++)if(0!==t.dyn_ltree[2*e])return D;return F}function C(t){_t||(d(),_t=!0),t.l_desc=new o(t.dyn_ltree,ft),t.d_desc=new o(t.dyn_dtree,pt),t.bl_desc=new o(t.bl_tree,dt),t.bi_buf=0,t.bi_valid=0,_(t)}function P(t,e,r,n){u(t,(B<<1)+(n?1:0),3),b(t,e,r,!0)}function R(t){u(t,L<<1,3),l(t,Q,at),c(t)}function A(t,e,r,n){var i,o,a=0;t.level>0?(t.strm.data_type===N&&(t.strm.data_type=O(t)),w(t,t.l_desc),w(t,t.d_desc),a=E(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,i>=o&&(i=o)):i=o=r+5,i>=r+4&&-1!==e?P(t,e,r,n):t.strategy===M||o===i?(u(t,(L<<1)+(n?1:0),3),v(t,at,st)):(u(t,(k<<1)+(n?1:0),3),S(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),v(t,t.dyn_ltree,t.dyn_dtree)),_(t),n&&g(t)}function U(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(lt[r]+V+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var I=t("../utils/common"),M=4,F=0,D=1,N=2,B=0,L=1,k=2,j=3,G=258,z=29,V=256,W=V+1+z,X=30,Y=19,H=2*W+1,$=15,Z=16,q=7,Q=256,K=16,J=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],rt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot=512,at=new Array(2*(W+2));n(at);var st=new Array(2*X);n(st);var ut=new Array(ot);n(ut);var lt=new Array(G-j+1);n(lt);var ht=new Array(z);n(ht);var ct=new Array(X);n(ct);var ft,pt,dt,_t=!1;r._tr_init=C,r._tr_stored_block=P,r._tr_flush_block=A,r._tr_tally=U,r._tr_align=R},{"../utils/common":149}],161:[function(t,e,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}]},{},[1]);
//# sourceMappingURL=GLantern-browser.min.js.map
